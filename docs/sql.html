<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Basics of SQL Language | Computational Tools for Reproducible Science</title>
  <meta name="description" content="WILD 6900: Computational Tools for Reproducible Science" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Basics of SQL Language | Computational Tools for Reproducible Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="WILD 6900: Computational Tools for Reproducible Science" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Basics of SQL Language | Computational Tools for Reproducible Science" />
  
  <meta name="twitter:description" content="WILD 6900: Computational Tools for Reproducible Science" />
  

<meta name="author" content="Simona Picardi" />


<meta name="date" content="2021-01-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="relational-databases.html"/>
<link rel="next" href="rsqlite.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://github.com/EcoRepSci/reproducible-science">Course Material</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#software-requirements-and-installation-instructions"><i class="fa fa-check"></i><b>0.1</b> Software Requirements and Installation Instructions</a><ul>
<li class="chapter" data-level="0.1.1" data-path="index.html"><a href="index.html#git"><i class="fa fa-check"></i><b>0.1.1</b> Git</a></li>
<li class="chapter" data-level="0.1.2" data-path="index.html"><a href="index.html#spreadsheet-editor"><i class="fa fa-check"></i><b>0.1.2</b> Spreadsheet Editor</a></li>
<li class="chapter" data-level="0.1.3" data-path="index.html"><a href="index.html#sqlite"><i class="fa fa-check"></i><b>0.1.3</b> SQLite</a></li>
<li class="chapter" data-level="0.1.4" data-path="index.html"><a href="index.html#r"><i class="fa fa-check"></i><b>0.1.4</b> R</a></li>
<li class="chapter" data-level="0.1.5" data-path="index.html"><a href="index.html#rstudio"><i class="fa fa-check"></i><b>0.1.5</b> RStudio</a></li>
<li class="chapter" data-level="0.1.6" data-path="index.html"><a href="index.html#required-r-packages"><i class="fa fa-check"></i><b>0.1.6</b> Required R Packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="project-organization.html"><a href="project-organization.html"><i class="fa fa-check"></i><b>1</b> Project Organization</a><ul>
<li class="chapter" data-level="1.1" data-path="project-organization.html"><a href="project-organization.html#directory-structure"><i class="fa fa-check"></i><b>1.1</b> Directory structure</a><ul>
<li class="chapter" data-level="1.1.1" data-path="project-organization.html"><a href="project-organization.html#overlap"><i class="fa fa-check"></i><b>1.1.1</b> Overlap</a></li>
<li class="chapter" data-level="1.1.2" data-path="project-organization.html"><a href="project-organization.html#minimizing-duplication"><i class="fa fa-check"></i><b>1.1.2</b> Minimizing duplication</a></li>
<li class="chapter" data-level="1.1.3" data-path="project-organization.html"><a href="project-organization.html#self-containedness"><i class="fa fa-check"></i><b>1.1.3</b> Self-containedness</a></li>
<li class="chapter" data-level="1.1.4" data-path="project-organization.html"><a href="project-organization.html#tradeoffs"><i class="fa fa-check"></i><b>1.1.4</b> Tradeoffs</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="project-organization.html"><a href="project-organization.html#golden-rules"><i class="fa fa-check"></i><b>1.2</b> Golden rules</a></li>
<li class="chapter" data-level="1.3" data-path="project-organization.html"><a href="project-organization.html#be-flexible"><i class="fa fa-check"></i><b>1.3</b> Be flexible</a></li>
<li class="chapter" data-level="1.4" data-path="project-organization.html"><a href="project-organization.html#documentation"><i class="fa fa-check"></i><b>1.4</b> Documentation</a></li>
<li class="chapter" data-level="1.5" data-path="project-organization.html"><a href="project-organization.html#naming-files"><i class="fa fa-check"></i><b>1.5</b> Naming files</a><ul>
<li class="chapter" data-level="1.5.1" data-path="project-organization.html"><a href="project-organization.html#computer-readable-file-names"><i class="fa fa-check"></i><b>1.5.1</b> Computer-readable file names</a></li>
<li class="chapter" data-level="1.5.2" data-path="project-organization.html"><a href="project-organization.html#human-readable-file-names"><i class="fa fa-check"></i><b>1.5.2</b> Human-readable file names</a></li>
<li class="chapter" data-level="1.5.3" data-path="project-organization.html"><a href="project-organization.html#file-names-that-work-well-with-default-ordering"><i class="fa fa-check"></i><b>1.5.3</b> File names that work well with default ordering</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="project-organization.html"><a href="project-organization.html#rstudio-projects"><i class="fa fa-check"></i><b>1.6</b> RStudio Projects</a></li>
<li class="chapter" data-level="1.7" data-path="project-organization.html"><a href="project-organization.html#relative-and-absolute-paths"><i class="fa fa-check"></i><b>1.7</b> Relative and absolute paths</a><ul>
<li class="chapter" data-level="1.7.1" data-path="project-organization.html"><a href="project-organization.html#path-separators"><i class="fa fa-check"></i><b>1.7.1</b> Path separators</a></li>
<li class="chapter" data-level="1.7.2" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>1.7.2</b> References</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="version-control-git.html"><a href="version-control-git.html"><i class="fa fa-check"></i><b>2</b> Version Control with Git</a><ul>
<li class="chapter" data-level="2.1" data-path="version-control-git.html"><a href="version-control-git.html#command-line-basics"><i class="fa fa-check"></i><b>2.1</b> Command line basics</a></li>
<li class="chapter" data-level="2.2" data-path="version-control-git.html"><a href="version-control-git.html#configuring-git"><i class="fa fa-check"></i><b>2.2</b> Configuring Git</a></li>
<li class="chapter" data-level="2.3" data-path="version-control-git.html"><a href="version-control-git.html#getting-help"><i class="fa fa-check"></i><b>2.3</b> Getting help</a></li>
<li class="chapter" data-level="2.4" data-path="version-control-git.html"><a href="version-control-git.html#creating-a-repository"><i class="fa fa-check"></i><b>2.4</b> Creating a repository</a></li>
<li class="chapter" data-level="2.5" data-path="version-control-git.html"><a href="version-control-git.html#tracking-files"><i class="fa fa-check"></i><b>2.5</b> Tracking files</a></li>
<li class="chapter" data-level="2.6" data-path="version-control-git.html"><a href="version-control-git.html#ignoring-files"><i class="fa fa-check"></i><b>2.6</b> Ignoring files</a></li>
<li class="chapter" data-level="2.7" data-path="version-control-git.html"><a href="version-control-git.html#the-3-states"><i class="fa fa-check"></i><b>2.7</b> The 3 states</a></li>
<li class="chapter" data-level="2.8" data-path="version-control-git.html"><a href="version-control-git.html#un-staging-files"><i class="fa fa-check"></i><b>2.8</b> Un-staging files</a></li>
<li class="chapter" data-level="2.9" data-path="version-control-git.html"><a href="version-control-git.html#recovering-a-previous-version-of-a-file"><i class="fa fa-check"></i><b>2.9</b> Recovering a previous version of a file</a></li>
<li class="chapter" data-level="2.10" data-path="version-control-git.html"><a href="version-control-git.html#removing-git"><i class="fa fa-check"></i><b>2.10</b> Removing Git</a></li>
<li class="chapter" data-level="2.11" data-path="version-control-git.html"><a href="version-control-git.html#git-everyday"><i class="fa fa-check"></i><b>2.11</b> Git everyday</a></li>
<li class="chapter" data-level="2.12" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>2.12</b> References</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>3</b> Collaborative Science with GitHub</a><ul>
<li class="chapter" data-level="3.1" data-path="github.html"><a href="github.html#adding-a-remote-to-a-local-repository"><i class="fa fa-check"></i><b>3.1</b> Adding a remote to a local repository</a></li>
<li class="chapter" data-level="3.2" data-path="github.html"><a href="github.html#pushing-to-a-remote-repository"><i class="fa fa-check"></i><b>3.2</b> Pushing to a remote repository</a></li>
<li class="chapter" data-level="3.3" data-path="github.html"><a href="github.html#cloning-a-repository"><i class="fa fa-check"></i><b>3.3</b> Cloning a repository</a></li>
<li class="chapter" data-level="3.4" data-path="github.html"><a href="github.html#synchronizing-changes-among-collaborators"><i class="fa fa-check"></i><b>3.4</b> Synchronizing changes among collaborators</a></li>
<li class="chapter" data-level="3.5" data-path="github.html"><a href="github.html#resolving-conflicts"><i class="fa fa-check"></i><b>3.5</b> Resolving conflicts</a></li>
<li class="chapter" data-level="3.6" data-path="github.html"><a href="github.html#avoiding-conflicts"><i class="fa fa-check"></i><b>3.6</b> Avoiding conflicts</a></li>
<li class="chapter" data-level="3.7" data-path="github.html"><a href="github.html#working-with-branches"><i class="fa fa-check"></i><b>3.7</b> Working with branches</a></li>
<li class="chapter" data-level="3.8" data-path="github.html"><a href="github.html#forking-a-repository"><i class="fa fa-check"></i><b>3.8</b> Forking a repository</a></li>
<li class="chapter" data-level="3.9" data-path="github.html"><a href="github.html#pull-requests"><i class="fa fa-check"></i><b>3.9</b> Pull requests</a></li>
<li class="chapter" data-level="3.10" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>3.10</b> References</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="spreadsheets.html"><a href="spreadsheets.html"><i class="fa fa-check"></i><b>4</b> Best Practices in the Use of Spreadsheets</a><ul>
<li class="chapter" data-level="4.1" data-path="spreadsheets.html"><a href="spreadsheets.html#what-are-spreadsheets-good-for"><i class="fa fa-check"></i><b>4.1</b> What are spreadsheets good for?</a></li>
<li class="chapter" data-level="4.2" data-path="spreadsheets.html"><a href="spreadsheets.html#human-readable-vs.-computer-readable-data"><i class="fa fa-check"></i><b>4.2</b> Human-readable vs. computer-readable data</a></li>
<li class="chapter" data-level="4.3" data-path="spreadsheets.html"><a href="spreadsheets.html#tidydata"><i class="fa fa-check"></i><b>4.3</b> Tidy data</a></li>
<li class="chapter" data-level="4.4" data-path="spreadsheets.html"><a href="spreadsheets.html#problematic-practices"><i class="fa fa-check"></i><b>4.4</b> Problematic practices</a><ul>
<li class="chapter" data-level="4.4.1" data-path="spreadsheets.html"><a href="spreadsheets.html#multiple-variables-in-a-single-column"><i class="fa fa-check"></i><b>4.4.1</b> Multiple variables in a single column</a></li>
<li class="chapter" data-level="4.4.2" data-path="spreadsheets.html"><a href="spreadsheets.html#rows-for-variables-columns-for-observation"><i class="fa fa-check"></i><b>4.4.2</b> Rows for variables, columns for observation</a></li>
<li class="chapter" data-level="4.4.3" data-path="spreadsheets.html"><a href="spreadsheets.html#multiple-tables-in-a-single-spreadsheet"><i class="fa fa-check"></i><b>4.4.3</b> Multiple tables in a single spreadsheet</a></li>
<li class="chapter" data-level="4.4.4" data-path="spreadsheets.html"><a href="spreadsheets.html#multiple-sheets"><i class="fa fa-check"></i><b>4.4.4</b> Multiple sheets</a></li>
<li class="chapter" data-level="4.4.5" data-path="spreadsheets.html"><a href="spreadsheets.html#using-formatting-to-convey-information"><i class="fa fa-check"></i><b>4.4.5</b> Using formatting to convey information</a></li>
<li class="chapter" data-level="4.4.6" data-path="spreadsheets.html"><a href="spreadsheets.html#putting-units-in-cells"><i class="fa fa-check"></i><b>4.4.6</b> Putting units in cells</a></li>
<li class="chapter" data-level="4.4.7" data-path="spreadsheets.html"><a href="spreadsheets.html#using-problematic-column-names"><i class="fa fa-check"></i><b>4.4.7</b> Using problematic column names</a></li>
<li class="chapter" data-level="4.4.8" data-path="spreadsheets.html"><a href="spreadsheets.html#conflating-zeros-and-missing-values"><i class="fa fa-check"></i><b>4.4.8</b> Conflating zeros and missing values</a></li>
<li class="chapter" data-level="4.4.9" data-path="spreadsheets.html"><a href="spreadsheets.html#using-problematic-null-values"><i class="fa fa-check"></i><b>4.4.9</b> Using problematic null values</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="spreadsheets.html"><a href="spreadsheets.html#document-document-document"><i class="fa fa-check"></i><b>4.5</b> Document, document, document!</a></li>
<li class="chapter" data-level="4.6" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>4.6</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="relational-databases.html"><a href="relational-databases.html"><i class="fa fa-check"></i><b>5</b> Relational Databases</a><ul>
<li class="chapter" data-level="5.1" data-path="relational-databases.html"><a href="relational-databases.html#what-is-a-relational-database"><i class="fa fa-check"></i><b>5.1</b> What is a relational database?</a></li>
<li class="chapter" data-level="5.2" data-path="relational-databases.html"><a href="relational-databases.html#why-bothering-with-relational-databases"><i class="fa fa-check"></i><b>5.2</b> Why bothering with relational databases?</a></li>
<li class="chapter" data-level="5.3" data-path="relational-databases.html"><a href="relational-databases.html#database-components"><i class="fa fa-check"></i><b>5.3</b> Database components</a></li>
<li class="chapter" data-level="5.4" data-path="relational-databases.html"><a href="relational-databases.html#database-design-and-architecture"><i class="fa fa-check"></i><b>5.4</b> Database design and architecture</a></li>
<li class="chapter" data-level="5.5" data-path="relational-databases.html"><a href="relational-databases.html#data-types"><i class="fa fa-check"></i><b>5.5</b> Data types</a></li>
<li class="chapter" data-level="5.6" data-path="relational-databases.html"><a href="relational-databases.html#a-first-look-at-our-practice-database"><i class="fa fa-check"></i><b>5.6</b> A first look at our practice database</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sql.html"><a href="sql.html"><i class="fa fa-check"></i><b>6</b> Basics of SQL Language</a><ul>
<li class="chapter" data-level="6.1" data-path="sql.html"><a href="sql.html#the-sql-language"><i class="fa fa-check"></i><b>6.1</b> The SQL language</a></li>
<li class="chapter" data-level="6.2" data-path="sql.html"><a href="sql.html#writing-sql-queries"><i class="fa fa-check"></i><b>6.2</b> Writing SQL queries</a><ul>
<li class="chapter" data-level="6.2.1" data-path="sql.html"><a href="sql.html#limiting-results"><i class="fa fa-check"></i><b>6.2.1</b> Limiting results</a></li>
<li class="chapter" data-level="6.2.2" data-path="sql.html"><a href="sql.html#sorting-results"><i class="fa fa-check"></i><b>6.2.2</b> Sorting results</a></li>
<li class="chapter" data-level="6.2.3" data-path="sql.html"><a href="sql.html#finding-unique-values"><i class="fa fa-check"></i><b>6.2.3</b> Finding unique values</a></li>
<li class="chapter" data-level="6.2.4" data-path="sql.html"><a href="sql.html#filtering"><i class="fa fa-check"></i><b>6.2.4</b> Filtering</a></li>
<li class="chapter" data-level="6.2.5" data-path="sql.html"><a href="sql.html#calculations"><i class="fa fa-check"></i><b>6.2.5</b> Calculations</a></li>
<li class="chapter" data-level="6.2.6" data-path="sql.html"><a href="sql.html#aggregate-functions"><i class="fa fa-check"></i><b>6.2.6</b> Aggregate functions</a></li>
<li class="chapter" data-level="6.2.7" data-path="sql.html"><a href="sql.html#aliases"><i class="fa fa-check"></i><b>6.2.7</b> Aliases</a></li>
<li class="chapter" data-level="6.2.8" data-path="sql.html"><a href="sql.html#grouping"><i class="fa fa-check"></i><b>6.2.8</b> Grouping</a></li>
<li class="chapter" data-level="6.2.9" data-path="sql.html"><a href="sql.html#filtering-based-on-computed-values"><i class="fa fa-check"></i><b>6.2.9</b> Filtering based on computed values</a></li>
<li class="chapter" data-level="6.2.10" data-path="sql.html"><a href="sql.html#null-values"><i class="fa fa-check"></i><b>6.2.10</b> Null values</a></li>
<li class="chapter" data-level="6.2.11" data-path="sql.html"><a href="sql.html#joins"><i class="fa fa-check"></i><b>6.2.11</b> Joins</a></li>
<li class="chapter" data-level="6.2.12" data-path="sql.html"><a href="sql.html#nested-select-statements"><i class="fa fa-check"></i><b>6.2.12</b> Nested <code>SELECT</code> statements</a></li>
<li class="chapter" data-level="6.2.13" data-path="sql.html"><a href="sql.html#order-of-operations"><i class="fa fa-check"></i><b>6.2.13</b> Order of operations</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="sql.html"><a href="sql.html#building-a-database"><i class="fa fa-check"></i><b>6.3</b> Building a database</a><ul>
<li class="chapter" data-level="6.3.1" data-path="sql.html"><a href="sql.html#creating-a-new-database-in-sqlite-studio"><i class="fa fa-check"></i><b>6.3.1</b> Creating a new database in SQLite Studio</a></li>
<li class="chapter" data-level="6.3.2" data-path="sql.html"><a href="sql.html#creating-tables"><i class="fa fa-check"></i><b>6.3.2</b> Creating tables</a></li>
<li class="chapter" data-level="6.3.3" data-path="sql.html"><a href="sql.html#adding-constraints"><i class="fa fa-check"></i><b>6.3.3</b> Adding constraints</a></li>
<li class="chapter" data-level="6.3.4" data-path="sql.html"><a href="sql.html#order-of-table-creation"><i class="fa fa-check"></i><b>6.3.4</b> Order of table creation</a></li>
<li class="chapter" data-level="6.3.5" data-path="sql.html"><a href="sql.html#populating-the-tables"><i class="fa fa-check"></i><b>6.3.5</b> Populating the tables</a></li>
<li class="chapter" data-level="6.3.6" data-path="sql.html"><a href="sql.html#autoincrements-as-primary-keys"><i class="fa fa-check"></i><b>6.3.6</b> Autoincrements as primary keys</a></li>
<li class="chapter" data-level="6.3.7" data-path="sql.html"><a href="sql.html#foreign-keys"><i class="fa fa-check"></i><b>6.3.7</b> Foreign keys</a></li>
<li class="chapter" data-level="6.3.8" data-path="sql.html"><a href="sql.html#crossing-existing-information-to-derive-new-tables"><i class="fa fa-check"></i><b>6.3.8</b> Crossing existing information to derive new tables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rsqlite.html"><a href="rsqlite.html"><i class="fa fa-check"></i><b>7</b> Interfacing Databases in R with RSQLite</a><ul>
<li class="chapter" data-level="7.1" data-path="rsqlite.html"><a href="rsqlite.html#the-rsqlite-package"><i class="fa fa-check"></i><b>7.1</b> The RSQLite package</a></li>
<li class="chapter" data-level="7.2" data-path="rsqlite.html"><a href="rsqlite.html#establising-a-database-connection"><i class="fa fa-check"></i><b>7.2</b> Establising a database connection</a></li>
<li class="chapter" data-level="7.3" data-path="rsqlite.html"><a href="rsqlite.html#sending-queries-to-the-database"><i class="fa fa-check"></i><b>7.3</b> Sending queries to the database</a></li>
<li class="chapter" data-level="7.4" data-path="rsqlite.html"><a href="rsqlite.html#a-note-on-reproducibility"><i class="fa fa-check"></i><b>7.4</b> A note on reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>8</b> Dynamic Documents with RMarkdown</a><ul>
<li class="chapter" data-level="8.1" data-path="rmarkdown.html"><a href="rmarkdown.html#what-is-a-dynamic-document"><i class="fa fa-check"></i><b>8.1</b> What is a dynamic document?</a></li>
<li class="chapter" data-level="8.2" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-and-rmarkdown"><i class="fa fa-check"></i><b>8.2</b> Markdown and RMarkdown</a></li>
<li class="chapter" data-level="8.3" data-path="rmarkdown.html"><a href="rmarkdown.html#installing-rmarkdown"><i class="fa fa-check"></i><b>8.3</b> Installing RMarkdown</a></li>
<li class="chapter" data-level="8.4" data-path="rmarkdown.html"><a href="rmarkdown.html#writing-an-rmarkdown-document"><i class="fa fa-check"></i><b>8.4</b> Writing an RMarkdown document</a><ul>
<li class="chapter" data-level="8.4.1" data-path="rmarkdown.html"><a href="rmarkdown.html#creating-the-document"><i class="fa fa-check"></i><b>8.4.1</b> Creating the document</a></li>
<li class="chapter" data-level="8.4.2" data-path="rmarkdown.html"><a href="rmarkdown.html#yaml-headers"><i class="fa fa-check"></i><b>8.4.2</b> YAML headers</a></li>
<li class="chapter" data-level="8.4.3" data-path="rmarkdown.html"><a href="rmarkdown.html#code-chunks"><i class="fa fa-check"></i><b>8.4.3</b> Code chunks</a></li>
<li class="chapter" data-level="8.4.4" data-path="rmarkdown.html"><a href="rmarkdown.html#inline-code"><i class="fa fa-check"></i><b>8.4.4</b> Inline code</a></li>
<li class="chapter" data-level="8.4.5" data-path="rmarkdown.html"><a href="rmarkdown.html#text-formatting"><i class="fa fa-check"></i><b>8.4.5</b> Text formatting</a></li>
<li class="chapter" data-level="8.4.6" data-path="rmarkdown.html"><a href="rmarkdown.html#embedding-images"><i class="fa fa-check"></i><b>8.4.6</b> Embedding images</a></li>
<li class="chapter" data-level="8.4.7" data-path="rmarkdown.html"><a href="rmarkdown.html#adding-a-table-of-contents"><i class="fa fa-check"></i><b>8.4.7</b> Adding a table of contents</a></li>
<li class="chapter" data-level="8.4.8" data-path="rmarkdown.html"><a href="rmarkdown.html#knitting-the-document"><i class="fa fa-check"></i><b>8.4.8</b> Knitting the document</a></li>
<li class="chapter" data-level="8.4.9" data-path="rmarkdown.html"><a href="rmarkdown.html#the-sky-is-the-limit"><i class="fa fa-check"></i><b>8.4.9</b> The sky is the limit!</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="github-pages.html"><a href="github-pages.html"><i class="fa fa-check"></i><b>9</b> Automatically Generated Websites with GitHub Pages</a><ul>
<li class="chapter" data-level="9.1" data-path="github-pages.html"><a href="github-pages.html#bookdown"><i class="fa fa-check"></i><b>9.1</b> Bookdown</a><ul>
<li class="chapter" data-level="9.1.1" data-path="github-pages.html"><a href="github-pages.html#creating-a-book"><i class="fa fa-check"></i><b>9.1.1</b> Creating a book</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="github-pages.html"><a href="github-pages.html#publishing-a-book-with-github-pages"><i class="fa fa-check"></i><b>9.2</b> Publishing a book with GitHub Pages</a><ul>
<li class="chapter" data-level="9.2.1" data-path="github-pages.html"><a href="github-pages.html#step-1-set-up-compatibility-with-github-pages"><i class="fa fa-check"></i><b>9.2.1</b> Step 1: Set up compatibility with GitHub Pages</a></li>
<li class="chapter" data-level="9.2.2" data-path="github-pages.html"><a href="github-pages.html#step-2-set-up-git-repository"><i class="fa fa-check"></i><b>9.2.2</b> Step 2: Set up Git repository</a></li>
<li class="chapter" data-level="9.2.3" data-path="github-pages.html"><a href="github-pages.html#step-3-link-git-repository-to-remote-github-repository"><i class="fa fa-check"></i><b>9.2.3</b> Step 3: Link Git repository to remote GitHub repository</a></li>
<li class="chapter" data-level="9.2.4" data-path="github-pages.html"><a href="github-pages.html#step-4-enable-github-pages"><i class="fa fa-check"></i><b>9.2.4</b> Step 4: Enable GitHub Pages</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="github-pages.html"><a href="github-pages.html#maintaining-the-website"><i class="fa fa-check"></i><b>9.3</b> Maintaining the website</a></li>
<li class="chapter" data-level="9.4" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>9.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>10</b> Introduction to R</a><ul>
<li class="chapter" data-level="10.1" data-path="intro-to-r.html"><a href="intro-to-r.html#getting-started"><i class="fa fa-check"></i><b>10.1</b> Getting started</a></li>
<li class="chapter" data-level="10.2" data-path="intro-to-r.html"><a href="intro-to-r.html#basics-of-r-programming"><i class="fa fa-check"></i><b>10.2</b> Basics of R programming</a><ul>
<li class="chapter" data-level="10.2.1" data-path="intro-to-r.html"><a href="intro-to-r.html#assigning-objects"><i class="fa fa-check"></i><b>10.2.1</b> Assigning objects</a></li>
<li class="chapter" data-level="10.2.2" data-path="intro-to-r.html"><a href="intro-to-r.html#adding-comments"><i class="fa fa-check"></i><b>10.2.2</b> Adding comments</a></li>
<li class="chapter" data-level="10.2.3" data-path="intro-to-r.html"><a href="intro-to-r.html#headers-and-description"><i class="fa fa-check"></i><b>10.2.3</b> Headers and description</a></li>
<li class="chapter" data-level="10.2.4" data-path="intro-to-r.html"><a href="intro-to-r.html#navigating-through-the-script"><i class="fa fa-check"></i><b>10.2.4</b> Navigating through the script</a></li>
<li class="chapter" data-level="10.2.5" data-path="intro-to-r.html"><a href="intro-to-r.html#functions-and-their-arguments"><i class="fa fa-check"></i><b>10.2.5</b> Functions and their arguments</a></li>
<li class="chapter" data-level="10.2.6" data-path="intro-to-r.html"><a href="intro-to-r.html#writing-functions"><i class="fa fa-check"></i><b>10.2.6</b> Writing functions</a></li>
<li class="chapter" data-level="10.2.7" data-path="relational-databases.html"><a href="relational-databases.html#data-types"><i class="fa fa-check"></i><b>10.2.7</b> Data types</a></li>
<li class="chapter" data-level="10.2.8" data-path="intro-to-r.html"><a href="intro-to-r.html#vectors"><i class="fa fa-check"></i><b>10.2.8</b> Vectors</a></li>
<li class="chapter" data-level="10.2.9" data-path="intro-to-r.html"><a href="intro-to-r.html#factors"><i class="fa fa-check"></i><b>10.2.9</b> Factors</a></li>
<li class="chapter" data-level="10.2.10" data-path="intro-to-r.html"><a href="intro-to-r.html#data-frames"><i class="fa fa-check"></i><b>10.2.10</b> Data frames</a></li>
<li class="chapter" data-level="10.2.11" data-path="intro-to-r.html"><a href="intro-to-r.html#dimensions"><i class="fa fa-check"></i><b>10.2.11</b> Dimensions</a></li>
<li class="chapter" data-level="10.2.12" data-path="intro-to-r.html"><a href="intro-to-r.html#subsetting"><i class="fa fa-check"></i><b>10.2.12</b> Subsetting</a></li>
<li class="chapter" data-level="10.2.13" data-path="intro-to-r.html"><a href="intro-to-r.html#logical-conditions"><i class="fa fa-check"></i><b>10.2.13</b> Logical conditions</a></li>
<li class="chapter" data-level="10.2.14" data-path="intro-to-r.html"><a href="intro-to-r.html#lists"><i class="fa fa-check"></i><b>10.2.14</b> Lists</a></li>
<li class="chapter" data-level="10.2.15" data-path="intro-to-r.html"><a href="intro-to-r.html#control-structures"><i class="fa fa-check"></i><b>10.2.15</b> Control structures</a></li>
<li class="chapter" data-level="10.2.16" data-path="intro-to-r.html"><a href="intro-to-r.html#repeating-operations"><i class="fa fa-check"></i><b>10.2.16</b> Repeating operations</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>10.3</b> References</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>11</b> Troubleshooting in R</a><ul>
<li class="chapter" data-level="11.1" data-path="troubleshooting.html"><a href="troubleshooting.html#how-to-interpret-error-messages"><i class="fa fa-check"></i><b>11.1</b> How to interpret error messages</a><ul>
<li class="chapter" data-level="11.1.1" data-path="troubleshooting.html"><a href="troubleshooting.html#locating-the-problematic-piece-of-code"><i class="fa fa-check"></i><b>11.1.1</b> Locating the problematic piece of code</a></li>
<li class="chapter" data-level="11.1.2" data-path="troubleshooting.html"><a href="troubleshooting.html#isolating-the-error"><i class="fa fa-check"></i><b>11.1.2</b> Isolating the error</a></li>
<li class="chapter" data-level="11.1.3" data-path="troubleshooting.html"><a href="troubleshooting.html#deciphering-error-messages"><i class="fa fa-check"></i><b>11.1.3</b> Deciphering error messages</a></li>
<li class="chapter" data-level="11.1.4" data-path="troubleshooting.html"><a href="troubleshooting.html#syntax-errors"><i class="fa fa-check"></i><b>11.1.4</b> Syntax errors</a></li>
<li class="chapter" data-level="11.1.5" data-path="troubleshooting.html"><a href="troubleshooting.html#errors-from-using-package-functions"><i class="fa fa-check"></i><b>11.1.5</b> Errors from using package functions</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="troubleshooting.html"><a href="troubleshooting.html#how-to-look-for-help"><i class="fa fa-check"></i><b>11.2</b> How to look for help</a><ul>
<li class="chapter" data-level="11.2.1" data-path="troubleshooting.html"><a href="troubleshooting.html#r-documentation"><i class="fa fa-check"></i><b>11.2.1</b> R documentation</a></li>
<li class="chapter" data-level="11.2.2" data-path="troubleshooting.html"><a href="troubleshooting.html#google"><i class="fa fa-check"></i><b>11.2.2</b> Google</a></li>
<li class="chapter" data-level="11.2.3" data-path="troubleshooting.html"><a href="troubleshooting.html#stackoverflow-et-al."><i class="fa fa-check"></i><b>11.2.3</b> StackOverflow et al.</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="troubleshooting.html"><a href="troubleshooting.html#how-to-troubleshoot-a-loop"><i class="fa fa-check"></i><b>11.3</b> How to troubleshoot a loop</a></li>
<li class="chapter" data-level="11.4" data-path="troubleshooting.html"><a href="troubleshooting.html#how-to-troubleshoot-a-function"><i class="fa fa-check"></i><b>11.4</b> How to troubleshoot a function</a></li>
<li class="chapter" data-level="11.5" data-path="troubleshooting.html"><a href="troubleshooting.html#reproducible-examples"><i class="fa fa-check"></i><b>11.5</b> Reproducible examples</a></li>
<li class="chapter" data-level="11.6" data-path="troubleshooting.html"><a href="troubleshooting.html#the-rubber-duck"><i class="fa fa-check"></i><b>11.6</b> The rubber duck</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="renv.html"><a href="renv.html"><i class="fa fa-check"></i><b>12</b> Dependency Management in R</a><ul>
<li class="chapter" data-level="12.1" data-path="renv.html"><a href="renv.html#whats-the-need-for-dependency-management"><i class="fa fa-check"></i><b>12.1</b> What’s the need for dependency management?</a></li>
<li class="chapter" data-level="12.2" data-path="renv.html"><a href="renv.html#the-renv-package"><i class="fa fa-check"></i><b>12.2</b> The <code>renv</code> package</a><ul>
<li class="chapter" data-level="12.2.1" data-path="renv.html"><a href="renv.html#usage"><i class="fa fa-check"></i><b>12.2.1</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>12.3</b> References</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>13</b> Data Wrangling with tidyverse</a><ul>
<li class="chapter" data-level="13.1" data-path="tidyverse.html"><a href="tidyverse.html#welcome-to-the-tidyverse"><i class="fa fa-check"></i><b>13.1</b> Welcome to the tidyverse</a></li>
<li class="chapter" data-level="13.2" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse-functions"><i class="fa fa-check"></i><b>13.2</b> Tidyverse functions</a><ul>
<li class="chapter" data-level="13.2.1" data-path="tidyverse.html"><a href="tidyverse.html#subsetting-columns"><i class="fa fa-check"></i><b>13.2.1</b> Subsetting columns</a></li>
<li class="chapter" data-level="13.2.2" data-path="tidyverse.html"><a href="tidyverse.html#subsetting-rows-with-logical-conditions"><i class="fa fa-check"></i><b>13.2.2</b> Subsetting rows with logical conditions</a></li>
<li class="chapter" data-level="13.2.3" data-path="tidyverse.html"><a href="tidyverse.html#concatenating-operations-with-pipes"><i class="fa fa-check"></i><b>13.2.3</b> Concatenating operations with pipes</a></li>
<li class="chapter" data-level="13.2.4" data-path="tidyverse.html"><a href="tidyverse.html#creating-new-columns"><i class="fa fa-check"></i><b>13.2.4</b> Creating new columns</a></li>
<li class="chapter" data-level="13.2.5" data-path="sql.html"><a href="sql.html#limiting-results"><i class="fa fa-check"></i><b>13.2.5</b> Limiting results</a></li>
<li class="chapter" data-level="13.2.6" data-path="tidyverse.html"><a href="tidyverse.html#tibbles"><i class="fa fa-check"></i><b>13.2.6</b> Tibbles</a></li>
<li class="chapter" data-level="13.2.7" data-path="tidyverse.html"><a href="tidyverse.html#joining-tables"><i class="fa fa-check"></i><b>13.2.7</b> Joining tables</a></li>
<li class="chapter" data-level="13.2.8" data-path="tidyverse.html"><a href="tidyverse.html#changing-the-order-of-columns"><i class="fa fa-check"></i><b>13.2.8</b> Changing the order of columns</a></li>
<li class="chapter" data-level="13.2.9" data-path="tidyverse.html"><a href="tidyverse.html#calculations-by-group"><i class="fa fa-check"></i><b>13.2.9</b> Calculations by group</a></li>
<li class="chapter" data-level="13.2.10" data-path="sql.html"><a href="sql.html#sorting-results"><i class="fa fa-check"></i><b>13.2.10</b> Sorting results</a></li>
<li class="chapter" data-level="13.2.11" data-path="tidyverse.html"><a href="tidyverse.html#extracting-columns-as-vectors"><i class="fa fa-check"></i><b>13.2.11</b> Extracting columns as vectors</a></li>
<li class="chapter" data-level="13.2.12" data-path="tidyverse.html"><a href="tidyverse.html#conditional-value-assignment"><i class="fa fa-check"></i><b>13.2.12</b> Conditional value assignment</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="tidyverse.html"><a href="tidyverse.html#style"><i class="fa fa-check"></i><b>13.3</b> Style</a></li>
<li class="chapter" data-level="13.4" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>13.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>14</b> Data Visualization with ggplot2</a><ul>
<li class="chapter" data-level="14.1" data-path="ggplot2.html"><a href="ggplot2.html#a-grammar-of-graphics"><i class="fa fa-check"></i><b>14.1</b> A Grammar of Graphics</a></li>
<li class="chapter" data-level="14.2" data-path="ggplot2.html"><a href="ggplot2.html#building-plots"><i class="fa fa-check"></i><b>14.2</b> Building plots</a><ul>
<li class="chapter" data-level="14.2.1" data-path="ggplot2.html"><a href="ggplot2.html#basic-scatterplot"><i class="fa fa-check"></i><b>14.2.1</b> Basic scatterplot</a></li>
<li class="chapter" data-level="14.2.2" data-path="ggplot2.html"><a href="ggplot2.html#basic-histogram"><i class="fa fa-check"></i><b>14.2.2</b> Basic histogram</a></li>
<li class="chapter" data-level="14.2.3" data-path="ggplot2.html"><a href="ggplot2.html#basic-density-plot"><i class="fa fa-check"></i><b>14.2.3</b> Basic density plot</a></li>
<li class="chapter" data-level="14.2.4" data-path="ggplot2.html"><a href="ggplot2.html#other-geom-functions"><i class="fa fa-check"></i><b>14.2.4</b> Other <code>geom</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="ggplot2.html"><a href="ggplot2.html#customizing-plots"><i class="fa fa-check"></i><b>14.3</b> Customizing plots</a><ul>
<li class="chapter" data-level="14.3.1" data-path="ggplot2.html"><a href="ggplot2.html#changing-axis-labels"><i class="fa fa-check"></i><b>14.3.1</b> Changing axis labels</a></li>
<li class="chapter" data-level="14.3.2" data-path="ggplot2.html"><a href="ggplot2.html#changing-colors"><i class="fa fa-check"></i><b>14.3.2</b> Changing colors</a></li>
<li class="chapter" data-level="14.3.3" data-path="ggplot2.html"><a href="ggplot2.html#modifying-legends"><i class="fa fa-check"></i><b>14.3.3</b> Modifying legends</a></li>
<li class="chapter" data-level="14.3.4" data-path="ggplot2.html"><a href="ggplot2.html#themes"><i class="fa fa-check"></i><b>14.3.4</b> Themes</a></li>
<li class="chapter" data-level="14.3.5" data-path="ggplot2.html"><a href="ggplot2.html#adding-transparency"><i class="fa fa-check"></i><b>14.3.5</b> Adding transparency</a></li>
<li class="chapter" data-level="14.3.6" data-path="ggplot2.html"><a href="ggplot2.html#overlaying-plots-with-different-aesthetics"><i class="fa fa-check"></i><b>14.3.6</b> Overlaying plots with different aesthetics</a></li>
<li class="chapter" data-level="14.3.7" data-path="ggplot2.html"><a href="ggplot2.html#modifying-symbol-appearance"><i class="fa fa-check"></i><b>14.3.7</b> Modifying symbol appearance</a></li>
<li class="chapter" data-level="14.3.8" data-path="ggplot2.html"><a href="ggplot2.html#fill-vs.-color"><i class="fa fa-check"></i><b>14.3.8</b> Fill vs. color</a></li>
<li class="chapter" data-level="14.3.9" data-path="ggplot2.html"><a href="ggplot2.html#modifying-axis-values"><i class="fa fa-check"></i><b>14.3.9</b> Modifying axis values</a></li>
<li class="chapter" data-level="14.3.10" data-path="ggplot2.html"><a href="ggplot2.html#adding-an-extra-dimension-with-facets"><i class="fa fa-check"></i><b>14.3.10</b> Adding an extra dimension with facets</a></li>
<li class="chapter" data-level="14.3.11" data-path="ggplot2.html"><a href="ggplot2.html#error-bars"><i class="fa fa-check"></i><b>14.3.11</b> Error bars</a></li>
<li class="chapter" data-level="14.3.12" data-path="ggplot2.html"><a href="ggplot2.html#plot-model-predictions-with-uncertainty"><i class="fa fa-check"></i><b>14.3.12</b> Plot model predictions with uncertainty</a></li>
<li class="chapter" data-level="14.3.13" data-path="ggplot2.html"><a href="ggplot2.html#plot-paths-of-ordered-observations"><i class="fa fa-check"></i><b>14.3.13</b> Plot paths of ordered observations</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="ggplot2.html"><a href="ggplot2.html#colorblind-friendly-plots-with-viridis"><i class="fa fa-check"></i><b>14.4</b> Colorblind-friendly plots with <code>viridis</code></a></li>
<li class="chapter" data-level="14.5" data-path="ggplot2.html"><a href="ggplot2.html#arranging-multiple-plots-together-with-patchwork"><i class="fa fa-check"></i><b>14.5</b> Arranging multiple plots together with <code>patchwork</code></a></li>
<li class="chapter" data-level="14.6" data-path="ggplot2.html"><a href="ggplot2.html#saving-plots"><i class="fa fa-check"></i><b>14.6</b> Saving plots</a></li>
<li class="chapter" data-level="14.7" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>14.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="lubridate.html"><a href="lubridate.html"><i class="fa fa-check"></i><b>15</b> Dates and Times in R</a></li>
<li class="chapter" data-level="16" data-path="geospatial.html"><a href="geospatial.html"><i class="fa fa-check"></i><b>16</b> Introduction to Geospatial Data in R</a></li>
<li class="chapter" data-level="17" data-path="problem-decomposition.html"><a href="problem-decomposition.html"><i class="fa fa-check"></i><b>17</b> Problem Decomposition</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Computational Tools for Reproducible Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sql" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Basics of SQL Language</h1>
<div id="the-sql-language" class="section level2">
<h2><span class="header-section-number">6.1</span> The SQL language</h2>
<p>The acronym SQL stands for Structured Query Language. It is the most used
language worldwide for relational database management systems. Whenever you
interact with a database in your daily life (for example, any time you browse an
online shopping website, or any time you look up something on Google), you can
bet that it was written in SQL.</p>
<p>SQL is a language that is used and understood by different database management
systems, such as Oracle, PostgreSQL, MySQL, or SQLite. While all these programs
share many similarities, which one of these you’ll end up using depends on
the specifics of what you need it for. For the purposes of this class, we’ll be
using SQLite. SQLite provides all the core functionalities you’ll need to get
familiar with databases while being lightweight in terms of setup (easy to
install and to configure). At the end of this chapter, we’ll talk about why you
may want to make a different choice in the future, but for now we’ll stick with
SQLite.</p>
<p>Each database management program uses a slightly different dialect of SQL. The
language is the same, but there may be some slight differences in the syntax
between different programs. I’ll point out throughout the chapter when we
encounter syntax that is specific to the SQLite dialect.</p>
</div>
<div id="writing-sql-queries" class="section level2">
<h2><span class="header-section-number">6.2</span> Writing SQL queries</h2>
<p>The nice thing about SQL is that it sounds a lot like human language. An SQL
statement, or query, always begins with a verb that describes the action we want
to do. A semicolon at the end of the query lets SQL know that we are done
talking. For example:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb47-1"><a href="sql.html#cb47-1"></a><span class="kw">SELECT</span> dragon_id <span class="kw">FROM</span> dragons;</span></code></pre></div>
<pre><code>##     dragon_id
## 1          D1
## 2         D10
## 3        D100
## 4        D101
## 5        D102
## 6        D103
## 7        D104
## 8        D105
## 9        D106
## 10       D107
## 11       D108
## 12       D109
## 13        D11
## 14       D110
## 15       D111
## 16       D112
## 17       D113
## 18       D114
## 19       D115
## 20       D116
## 21       D117
## 22       D118
## 23       D119
## 24        D12
## 25       D120
## 26       D121
## 27       D122
## 28       D123
## 29       D124
## 30       D125
## 31       D126
## 32       D127
## 33       D128
## 34       D129
## 35        D13
## 36       D130
## 37       D131
## 38       D132
## 39       D133
## 40       D134
## 41       D135
## 42       D136
## 43       D137
## 44       D138
## 45       D139
## 46        D14
## 47       D140
## 48       D141
## 49       D142
## 50       D143
## 51       D144
## 52       D145
## 53       D146
## 54       D147
## 55       D148
## 56       D149
## 57        D15
## 58       D150
## 59       D151
## 60       D152
## 61       D153
## 62       D154
## 63       D155
## 64       D156
## 65       D157
## 66       D158
## 67       D159
## 68        D16
## 69       D160
## 70       D161
## 71       D162
## 72       D163
## 73       D164
## 74       D165
## 75       D166
## 76       D167
## 77       D168
## 78       D169
## 79        D17
## 80       D170
## 81       D171
## 82       D172
## 83       D173
## 84       D174
## 85       D175
## 86       D176
## 87       D177
## 88       D178
## 89       D179
## 90        D18
## 91       D180
## 92       D181
## 93       D182
## 94       D183
## 95       D184
## 96       D185
## 97       D186
## 98       D187
## 99       D188
## 100      D189
## 101       D19
## 102      D190
## 103      D191
## 104      D192
## 105      D193
## 106      D194
## 107      D195
## 108      D196
## 109      D197
## 110      D198
## 111      D199
## 112        D2
## 113       D20
## 114      D200
## 115      D201
## 116      D202
## 117      D203
## 118      D204
## 119      D205
## 120      D206
## 121      D207
## 122      D208
## 123      D209
## 124       D21
## 125      D210
## 126      D211
## 127      D212
## 128      D213
## 129      D214
## 130      D215
## 131      D216
## 132      D217
## 133      D218
## 134      D219
## 135       D22
## 136      D220
## 137      D221
## 138      D222
## 139      D223
## 140      D224
## 141      D225
## 142      D226
## 143      D227
## 144      D228
## 145      D229
## 146       D23
## 147      D230
## 148      D231
## 149      D232
## 150      D233
## 151      D234
## 152      D235
## 153      D236
## 154      D237
## 155      D238
## 156      D239
## 157       D24
## 158      D240
## 159      D241
## 160      D242
## 161      D243
## 162      D244
## 163      D245
## 164      D246
## 165      D247
## 166      D248
## 167      D249
## 168       D25
## 169      D250
## 170      D251
## 171      D252
## 172      D253
## 173      D254
## 174      D255
## 175      D256
## 176      D257
## 177      D258
## 178      D259
## 179       D26
## 180      D260
## 181      D261
## 182      D262
## 183      D263
## 184      D264
## 185      D265
## 186      D266
## 187      D267
## 188      D268
## 189      D269
## 190       D27
## 191      D270
## 192      D271
## 193      D272
## 194      D273
## 195      D274
## 196      D275
## 197      D276
## 198      D277
## 199      D278
## 200      D279
## 201       D28
## 202      D280
## 203      D281
## 204      D282
## 205      D283
## 206      D284
## 207      D285
## 208      D286
## 209      D287
## 210      D288
## 211      D289
## 212       D29
## 213      D290
## 214      D291
## 215      D292
## 216      D293
## 217      D294
## 218      D295
## 219      D296
## 220      D297
## 221      D298
## 222      D299
## 223        D3
## 224       D30
## 225      D300
## 226      D301
## 227      D302
## 228      D303
## 229      D304
## 230      D305
## 231      D306
## 232      D307
## 233      D308
## 234      D309
## 235       D31
## 236      D310
## 237      D311
## 238      D312
## 239      D313
## 240      D314
## 241      D315
## 242      D316
## 243      D317
## 244      D318
## 245      D319
## 246       D32
## 247      D320
## 248      D321
## 249      D322
## 250      D323
## 251      D324
## 252      D325
## 253      D326
## 254      D327
## 255      D328
## 256      D329
## 257       D33
## 258      D330
## 259      D331
## 260      D332
## 261      D333
## 262      D334
## 263      D335
## 264      D336
## 265      D337
## 266      D338
## 267      D339
## 268       D34
## 269      D340
## 270      D341
## 271      D342
## 272      D343
## 273      D344
## 274      D345
## 275      D346
## 276      D347
## 277      D348
## 278      D349
## 279       D35
## 280      D350
## 281      D351
## 282      D352
## 283      D353
## 284      D354
## 285      D355
## 286      D356
## 287      D357
## 288      D358
## 289      D359
## 290       D36
## 291      D360
## 292      D361
## 293      D362
## 294      D363
## 295      D364
## 296      D365
## 297      D366
## 298      D367
## 299      D368
## 300      D369
## 301       D37
## 302      D370
## 303      D371
## 304      D372
## 305      D373
## 306      D374
## 307      D375
## 308      D376
## 309      D377
## 310      D378
## 311      D379
## 312       D38
## 313      D380
## 314      D381
## 315      D382
## 316      D383
## 317      D384
## 318      D385
## 319      D386
## 320      D387
## 321      D388
## 322      D389
## 323       D39
## 324      D390
## 325      D391
## 326      D392
## 327      D393
## 328      D394
## 329      D395
## 330      D396
## 331      D397
## 332      D398
## 333      D399
## 334        D4
## 335       D40
## 336      D400
## 337      D401
## 338      D402
## 339      D403
## 340      D404
## 341      D405
## 342      D406
## 343      D407
## 344      D408
## 345      D409
## 346       D41
## 347      D410
## 348      D411
## 349      D412
## 350      D413
## 351      D414
## 352      D415
## 353      D416
## 354      D417
## 355      D418
## 356      D419
## 357       D42
## 358      D420
## 359      D421
## 360      D422
## 361      D423
## 362      D424
## 363      D425
## 364      D426
## 365      D427
## 366      D428
## 367      D429
## 368       D43
## 369      D430
## 370      D431
## 371      D432
## 372      D433
## 373      D434
## 374      D435
## 375      D436
## 376      D437
## 377      D438
## 378      D439
## 379       D44
## 380      D440
## 381      D441
## 382      D442
## 383      D443
## 384      D444
## 385      D445
## 386      D446
## 387      D447
## 388      D448
## 389      D449
## 390       D45
## 391      D450
## 392      D451
## 393      D452
## 394      D453
## 395      D454
## 396      D455
## 397      D456
## 398      D457
## 399      D458
## 400      D459
## 401       D46
## 402      D460
## 403      D461
## 404      D462
## 405      D463
## 406      D464
## 407      D465
## 408      D466
## 409      D467
## 410      D468
## 411      D469
## 412       D47
## 413      D470
## 414      D471
## 415      D472
## 416      D473
## 417      D474
## 418      D475
## 419      D476
## 420      D477
## 421      D478
## 422      D479
## 423       D48
## 424      D480
## 425      D481
## 426      D482
## 427      D483
## 428      D484
## 429      D485
## 430      D486
## 431      D487
## 432      D488
## 433      D489
## 434       D49
## 435      D490
## 436      D491
## 437      D492
## 438      D493
## 439      D494
## 440      D495
## 441      D496
## 442      D497
## 443      D498
## 444      D499
## 445        D5
## 446       D50
## 447      D500
## 448       D51
## 449       D52
## 450       D53
## 451       D54
## 452       D55
## 453       D56
## 454       D57
## 455       D58
## 456       D59
## 457        D6
## 458       D60
## 459       D61
## 460       D62
## 461       D63
## 462       D64
## 463       D65
## 464       D66
## 465       D67
## 466       D68
## 467       D69
## 468        D7
## 469       D70
## 470       D71
## 471       D72
## 472       D73
## 473       D74
## 474       D75
## 475       D76
## 476       D77
## 477       D78
## 478       D79
## 479        D8
## 480       D80
## 481       D81
## 482       D82
## 483       D83
## 484       D84
## 485       D85
## 486       D86
## 487       D87
## 488       D88
## 489       D89
## 490        D9
## 491       D90
## 492       D91
## 493       D92
## 494       D93
## 495       D94
## 496       D95
## 497       D96
## 498       D97
## 499       D98
## 500       D99</code></pre>
<p>The verb <code>SELECT</code> is one we’ll be using over and over again. Any time you want
to select data you also have to specify which table you want it from, so the
<code>SELECT</code> clause is always followed by a <code>FROM</code> clause. In this case, we asked
to see the column <code>dragon_id</code> from the <code>dragons</code> table. Sounds like English,
right?</p>
<p>If we want to see multiple columns, we can list them separated by commas:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb49-1"><a href="sql.html#cb49-1"></a><span class="kw">SELECT</span> dragon_id, sex </span>
<span id="cb49-2"><a href="sql.html#cb49-2"></a><span class="kw">FROM</span> dragons;</span></code></pre></div>
<pre><code>##     dragon_id  sex
## 1          D1    F
## 2          D2 &lt;NA&gt;
## 3          D3    F
## 4          D4    F
## 5          D5 &lt;NA&gt;
## 6          D6    F
## 7          D7    M
## 8          D8 &lt;NA&gt;
## 9          D9    F
## 10        D10    F
## 11        D11    F
## 12        D12    F
## 13        D13 &lt;NA&gt;
## 14        D14 &lt;NA&gt;
## 15        D15 &lt;NA&gt;
## 16        D16    F
## 17        D17    F
## 18        D18    F
## 19        D19    F
## 20        D20    M
## 21        D21    F
## 22        D22 &lt;NA&gt;
## 23        D23    M
## 24        D24 &lt;NA&gt;
## 25        D25    M
## 26        D26 &lt;NA&gt;
## 27        D27    F
## 28        D28    M
## 29        D29    F
## 30        D30    F
## 31        D31 &lt;NA&gt;
## 32        D32    M
## 33        D33    F
## 34        D34    F
## 35        D35    F
## 36        D36 &lt;NA&gt;
## 37        D37    F
## 38        D38    F
## 39        D39 &lt;NA&gt;
## 40        D40 &lt;NA&gt;
## 41        D41 &lt;NA&gt;
## 42        D42    M
## 43        D43    F
## 44        D44    M
## 45        D45    F
## 46        D46    M
## 47        D47    F
## 48        D48    M
## 49        D49 &lt;NA&gt;
## 50        D50    F
## 51        D51    F
## 52        D52    M
## 53        D53 &lt;NA&gt;
## 54        D54    F
## 55        D55 &lt;NA&gt;
## 56        D56    F
## 57        D57    F
## 58        D58    M
## 59        D59    F
## 60        D60    F
## 61        D61    M
## 62        D62    F
## 63        D63    F
## 64        D64 &lt;NA&gt;
## 65        D65 &lt;NA&gt;
## 66        D66 &lt;NA&gt;
## 67        D67    M
## 68        D68    M
## 69        D69    F
## 70        D70    F
## 71        D71    M
## 72        D72 &lt;NA&gt;
## 73        D73    F
## 74        D74 &lt;NA&gt;
## 75        D75    M
## 76        D76    M
## 77        D77 &lt;NA&gt;
## 78        D78 &lt;NA&gt;
## 79        D79    M
## 80        D80    F
## 81        D81 &lt;NA&gt;
## 82        D82    F
## 83        D83 &lt;NA&gt;
## 84        D84    M
## 85        D85    F
## 86        D86    F
## 87        D87    M
## 88        D88    M
## 89        D89    F
## 90        D90    M
## 91        D91    F
## 92        D92    M
## 93        D93    M
## 94        D94    M
## 95        D95    M
## 96        D96    F
## 97        D97 &lt;NA&gt;
## 98        D98 &lt;NA&gt;
## 99        D99    F
## 100      D100 &lt;NA&gt;
## 101      D101 &lt;NA&gt;
## 102      D102    F
## 103      D103    F
## 104      D104    F
## 105      D105    M
## 106      D106 &lt;NA&gt;
## 107      D107 &lt;NA&gt;
## 108      D108    F
## 109      D109    M
## 110      D110    F
## 111      D111    M
## 112      D112    F
## 113      D113 &lt;NA&gt;
## 114      D114 &lt;NA&gt;
## 115      D115    F
## 116      D116    F
## 117      D117 &lt;NA&gt;
## 118      D118 &lt;NA&gt;
## 119      D119    F
## 120      D120    F
## 121      D121 &lt;NA&gt;
## 122      D122    F
## 123      D123 &lt;NA&gt;
## 124      D124    M
## 125      D125 &lt;NA&gt;
## 126      D126    M
## 127      D127    M
## 128      D128 &lt;NA&gt;
## 129      D129    M
## 130      D130 &lt;NA&gt;
## 131      D131 &lt;NA&gt;
## 132      D132    F
## 133      D133    F
## 134      D134    F
## 135      D135 &lt;NA&gt;
## 136      D136    F
## 137      D137    F
## 138      D138    F
## 139      D139    F
## 140      D140 &lt;NA&gt;
## 141      D141    F
## 142      D142    M
## 143      D143    F
## 144      D144    M
## 145      D145    M
## 146      D146    M
## 147      D147 &lt;NA&gt;
## 148      D148 &lt;NA&gt;
## 149      D149    M
## 150      D150    F
## 151      D151 &lt;NA&gt;
## 152      D152    F
## 153      D153    M
## 154      D154    F
## 155      D155    F
## 156      D156    M
## 157      D157    F
## 158      D158 &lt;NA&gt;
## 159      D159 &lt;NA&gt;
## 160      D160    F
## 161      D161    F
## 162      D162    F
## 163      D163 &lt;NA&gt;
## 164      D164 &lt;NA&gt;
## 165      D165    M
## 166      D166 &lt;NA&gt;
## 167      D167    M
## 168      D168    F
## 169      D169    F
## 170      D170 &lt;NA&gt;
## 171      D171    M
## 172      D172    M
## 173      D173    F
## 174      D174 &lt;NA&gt;
## 175      D175    M
## 176      D176    F
## 177      D177    F
## 178      D178    F
## 179      D179 &lt;NA&gt;
## 180      D180    F
## 181      D181    F
## 182      D182    F
## 183      D183    F
## 184      D184    F
## 185      D185    M
## 186      D186 &lt;NA&gt;
## 187      D187 &lt;NA&gt;
## 188      D188    M
## 189      D189    F
## 190      D190    F
## 191      D191    M
## 192      D192    M
## 193      D193    M
## 194      D194 &lt;NA&gt;
## 195      D195    F
## 196      D196    F
## 197      D197    F
## 198      D198    M
## 199      D199 &lt;NA&gt;
## 200      D200 &lt;NA&gt;
## 201      D201 &lt;NA&gt;
## 202      D202    M
## 203      D203 &lt;NA&gt;
## 204      D204    M
## 205      D205    F
## 206      D206    F
## 207      D207 &lt;NA&gt;
## 208      D208    M
## 209      D209 &lt;NA&gt;
## 210      D210    M
## 211      D211    F
## 212      D212    F
## 213      D213 &lt;NA&gt;
## 214      D214    F
## 215      D215    F
## 216      D216 &lt;NA&gt;
## 217      D217    F
## 218      D218    F
## 219      D219    M
## 220      D220    F
## 221      D221    M
## 222      D222    M
## 223      D223    M
## 224      D224 &lt;NA&gt;
## 225      D225    M
## 226      D226 &lt;NA&gt;
## 227      D227    F
## 228      D228    F
## 229      D229 &lt;NA&gt;
## 230      D230    M
## 231      D231    M
## 232      D232    F
## 233      D233    F
## 234      D234    F
## 235      D235 &lt;NA&gt;
## 236      D236    F
## 237      D237    M
## 238      D238    F
## 239      D239    F
## 240      D240    F
## 241      D241 &lt;NA&gt;
## 242      D242    M
## 243      D243 &lt;NA&gt;
## 244      D244    F
## 245      D245 &lt;NA&gt;
## 246      D246 &lt;NA&gt;
## 247      D247    M
## 248      D248    M
## 249      D249 &lt;NA&gt;
## 250      D250    F
## 251      D251 &lt;NA&gt;
## 252      D252 &lt;NA&gt;
## 253      D253    F
## 254      D254    F
## 255      D255 &lt;NA&gt;
## 256      D256 &lt;NA&gt;
## 257      D257 &lt;NA&gt;
## 258      D258 &lt;NA&gt;
## 259      D259    F
## 260      D260    F
## 261      D261 &lt;NA&gt;
## 262      D262    M
## 263      D263    M
## 264      D264    F
## 265      D265    M
## 266      D266 &lt;NA&gt;
## 267      D267 &lt;NA&gt;
## 268      D268    F
## 269      D269    F
## 270      D270 &lt;NA&gt;
## 271      D271    F
## 272      D272    F
## 273      D273 &lt;NA&gt;
## 274      D274    F
## 275      D275    F
## 276      D276    M
## 277      D277    F
## 278      D278    F
## 279      D279 &lt;NA&gt;
## 280      D280    M
## 281      D281    F
## 282      D282    F
## 283      D283    F
## 284      D284    F
## 285      D285 &lt;NA&gt;
## 286      D286    F
## 287      D287    M
## 288      D288    M
## 289      D289 &lt;NA&gt;
## 290      D290 &lt;NA&gt;
## 291      D291    F
## 292      D292 &lt;NA&gt;
## 293      D293    F
## 294      D294    F
## 295      D295    M
## 296      D296 &lt;NA&gt;
## 297      D297 &lt;NA&gt;
## 298      D298    M
## 299      D299    F
## 300      D300    F
## 301      D301    F
## 302      D302    F
## 303      D303 &lt;NA&gt;
## 304      D304    F
## 305      D305    M
## 306      D306 &lt;NA&gt;
## 307      D307 &lt;NA&gt;
## 308      D308    F
## 309      D309 &lt;NA&gt;
## 310      D310 &lt;NA&gt;
## 311      D311    M
## 312      D312    M
## 313      D313    F
## 314      D314    M
## 315      D315    F
## 316      D316    M
## 317      D317    F
## 318      D318 &lt;NA&gt;
## 319      D319 &lt;NA&gt;
## 320      D320 &lt;NA&gt;
## 321      D321    M
## 322      D322 &lt;NA&gt;
## 323      D323    M
## 324      D324 &lt;NA&gt;
## 325      D325    F
## 326      D326    F
## 327      D327    M
## 328      D328 &lt;NA&gt;
## 329      D329    M
## 330      D330    F
## 331      D331 &lt;NA&gt;
## 332      D332    F
## 333      D333 &lt;NA&gt;
## 334      D334 &lt;NA&gt;
## 335      D335    F
## 336      D336 &lt;NA&gt;
## 337      D337    M
## 338      D338 &lt;NA&gt;
## 339      D339 &lt;NA&gt;
## 340      D340 &lt;NA&gt;
## 341      D341    F
## 342      D342 &lt;NA&gt;
## 343      D343    F
## 344      D344 &lt;NA&gt;
## 345      D345    M
## 346      D346    F
## 347      D347    F
## 348      D348 &lt;NA&gt;
## 349      D349    M
## 350      D350    M
## 351      D351    M
## 352      D352    M
## 353      D353 &lt;NA&gt;
## 354      D354    F
## 355      D355 &lt;NA&gt;
## 356      D356    F
## 357      D357    F
## 358      D358 &lt;NA&gt;
## 359      D359    F
## 360      D360    M
## 361      D361    M
## 362      D362    F
## 363      D363 &lt;NA&gt;
## 364      D364 &lt;NA&gt;
## 365      D365    M
## 366      D366    M
## 367      D367    M
## 368      D368    F
## 369      D369    M
## 370      D370 &lt;NA&gt;
## 371      D371 &lt;NA&gt;
## 372      D372    M
## 373      D373    F
## 374      D374    M
## 375      D375    M
## 376      D376 &lt;NA&gt;
## 377      D377    F
## 378      D378    M
## 379      D379    F
## 380      D380 &lt;NA&gt;
## 381      D381    M
## 382      D382    F
## 383      D383    F
## 384      D384    M
## 385      D385    F
## 386      D386 &lt;NA&gt;
## 387      D387    M
## 388      D388    F
## 389      D389    F
## 390      D390    F
## 391      D391 &lt;NA&gt;
## 392      D392    M
## 393      D393    M
## 394      D394    M
## 395      D395 &lt;NA&gt;
## 396      D396    F
## 397      D397 &lt;NA&gt;
## 398      D398    F
## 399      D399    F
## 400      D400 &lt;NA&gt;
## 401      D401    M
## 402      D402    F
## 403      D403 &lt;NA&gt;
## 404      D404    F
## 405      D405    M
## 406      D406    M
## 407      D407    M
## 408      D408    F
## 409      D409 &lt;NA&gt;
## 410      D410    F
## 411      D411 &lt;NA&gt;
## 412      D412 &lt;NA&gt;
## 413      D413    F
## 414      D414    F
## 415      D415    F
## 416      D416    F
## 417      D417    M
## 418      D418    M
## 419      D419    F
## 420      D420 &lt;NA&gt;
## 421      D421 &lt;NA&gt;
## 422      D422    F
## 423      D423    M
## 424      D424    F
## 425      D425    M
## 426      D426    F
## 427      D427    F
## 428      D428 &lt;NA&gt;
## 429      D429 &lt;NA&gt;
## 430      D430    F
## 431      D431 &lt;NA&gt;
## 432      D432    M
## 433      D433    M
## 434      D434 &lt;NA&gt;
## 435      D435 &lt;NA&gt;
## 436      D436 &lt;NA&gt;
## 437      D437    M
## 438      D438 &lt;NA&gt;
## 439      D439    F
## 440      D440    M
## 441      D441    F
## 442      D442    M
## 443      D443    F
## 444      D444    M
## 445      D445    M
## 446      D446    F
## 447      D447 &lt;NA&gt;
## 448      D448    F
## 449      D449    M
## 450      D450    F
## 451      D451    F
## 452      D452    F
## 453      D453    F
## 454      D454    M
## 455      D455    F
## 456      D456    F
## 457      D457    F
## 458      D458    F
## 459      D459    F
## 460      D460    F
## 461      D461    M
## 462      D462 &lt;NA&gt;
## 463      D463    M
## 464      D464    F
## 465      D465    M
## 466      D466 &lt;NA&gt;
## 467      D467 &lt;NA&gt;
## 468      D468    M
## 469      D469    F
## 470      D470    F
## 471      D471    F
## 472      D472    M
## 473      D473    M
## 474      D474    F
## 475      D475    M
## 476      D476    F
## 477      D477    M
## 478      D478    M
## 479      D479    F
## 480      D480    F
## 481      D481    F
## 482      D482    M
## 483      D483 &lt;NA&gt;
## 484      D484    M
## 485      D485    M
## 486      D486 &lt;NA&gt;
## 487      D487    F
## 488      D488 &lt;NA&gt;
## 489      D489    F
## 490      D490    F
## 491      D491    F
## 492      D492    F
## 493      D493    F
## 494      D494    F
## 495      D495    M
## 496      D496    F
## 497      D497    F
## 498      D498    F
## 499      D499    F
## 500      D500    F</code></pre>
<p>And if we want to see the whole table (not specific columns), we can use a
wildcard:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb51-1"><a href="sql.html#cb51-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb51-2"><a href="sql.html#cb51-2"></a><span class="kw">FROM</span> dragons;</span></code></pre></div>
<pre><code>##     dragon_id  sex age_class             species
## 1          D1    F  Subadult     Hebridean Black
## 2          D2 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 3          D3    F     Adult     Hebridean Black
## 4          D4    F     Adult Peruvian Vipertooth
## 5          D5 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 6          D6    F     Adult Norwegian Ridgeback
## 7          D7    M     Adult     Hebridean Black
## 8          D8 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 9          D9    F     Adult Norwegian Ridgeback
## 10        D10    F     Adult  Common Welsh Green
## 11        D11    F     Adult Peruvian Vipertooth
## 12        D12    F     Adult Swedish Short-Snout
## 13        D13 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 14        D14 &lt;NA&gt;  Juvenile     Hebridean Black
## 15        D15 &lt;NA&gt;  Juvenile    Chinese Fireball
## 16        D16    F     Adult    Chinese Fireball
## 17        D17    F     Adult Peruvian Vipertooth
## 18        D18    F     Adult Norwegian Ridgeback
## 19        D19    F     Adult  Common Welsh Green
## 20        D20    M  Subadult    Chinese Fireball
## 21        D21    F     Adult Ukrainian Ironbelly
## 22        D22 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 23        D23    M     Adult Swedish Short-Snout
## 24        D24 &lt;NA&gt;  Juvenile  Common Welsh Green
## 25        D25    M     Adult Peruvian Vipertooth
## 26        D26 &lt;NA&gt;  Juvenile  Common Welsh Green
## 27        D27    F     Adult Norwegian Ridgeback
## 28        D28    M     Adult  Common Welsh Green
## 29        D29    F     Adult Norwegian Ridgeback
## 30        D30    F     Adult    Chinese Fireball
## 31        D31 &lt;NA&gt;  Juvenile  Common Welsh Green
## 32        D32    M     Adult Ukrainian Ironbelly
## 33        D33    F     Adult   Romanian Longhorn
## 34        D34    F     Adult Norwegian Ridgeback
## 35        D35    F     Adult Ukrainian Ironbelly
## 36        D36 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 37        D37    F  Subadult  Common Welsh Green
## 38        D38    F     Adult  Hungarian Horntail
## 39        D39 &lt;NA&gt;  Juvenile  Antipodean Opaleye
## 40        D40 &lt;NA&gt;  Juvenile  Common Welsh Green
## 41        D41 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 42        D42    M     Adult Swedish Short-Snout
## 43        D43    F  Subadult  Antipodean Opaleye
## 44        D44    M     Adult   Romanian Longhorn
## 45        D45    F     Adult Peruvian Vipertooth
## 46        D46    M  Subadult     Hebridean Black
## 47        D47    F     Adult Ukrainian Ironbelly
## 48        D48    M     Adult Ukrainian Ironbelly
## 49        D49 &lt;NA&gt;  Juvenile  Common Welsh Green
## 50        D50    F     Adult    Chinese Fireball
## 51        D51    F  Subadult Norwegian Ridgeback
## 52        D52    M     Adult  Common Welsh Green
## 53        D53 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 54        D54    F     Adult Norwegian Ridgeback
## 55        D55 &lt;NA&gt;  Juvenile  Common Welsh Green
## 56        D56    F  Subadult Norwegian Ridgeback
## 57        D57    F     Adult  Common Welsh Green
## 58        D58    M     Adult     Hebridean Black
## 59        D59    F     Adult Peruvian Vipertooth
## 60        D60    F     Adult     Hebridean Black
## 61        D61    M  Subadult   Romanian Longhorn
## 62        D62    F     Adult  Hungarian Horntail
## 63        D63    F     Adult  Antipodean Opaleye
## 64        D64 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 65        D65 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 66        D66 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 67        D67    M     Adult Norwegian Ridgeback
## 68        D68    M     Adult  Antipodean Opaleye
## 69        D69    F  Subadult     Hebridean Black
## 70        D70    F     Adult Norwegian Ridgeback
## 71        D71    M     Adult     Hebridean Black
## 72        D72 &lt;NA&gt;  Juvenile  Common Welsh Green
## 73        D73    F     Adult   Romanian Longhorn
## 74        D74 &lt;NA&gt;  Juvenile  Antipodean Opaleye
## 75        D75    M     Adult Swedish Short-Snout
## 76        D76    M     Adult   Romanian Longhorn
## 77        D77 &lt;NA&gt;  Juvenile     Hebridean Black
## 78        D78 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 79        D79    M     Adult  Common Welsh Green
## 80        D80    F     Adult   Romanian Longhorn
## 81        D81 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 82        D82    F     Adult     Hebridean Black
## 83        D83 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 84        D84    M     Adult Norwegian Ridgeback
## 85        D85    F     Adult     Hebridean Black
## 86        D86    F     Adult     Hebridean Black
## 87        D87    M     Adult  Hungarian Horntail
## 88        D88    M     Adult Swedish Short-Snout
## 89        D89    F     Adult Norwegian Ridgeback
## 90        D90    M     Adult Peruvian Vipertooth
## 91        D91    F     Adult     Hebridean Black
## 92        D92    M     Adult     Hebridean Black
## 93        D93    M  Subadult Peruvian Vipertooth
## 94        D94    M     Adult   Romanian Longhorn
## 95        D95    M     Adult   Romanian Longhorn
## 96        D96    F     Adult  Common Welsh Green
## 97        D97 &lt;NA&gt;  Juvenile    Chinese Fireball
## 98        D98 &lt;NA&gt;  Juvenile     Hebridean Black
## 99        D99    F     Adult     Hebridean Black
## 100      D100 &lt;NA&gt;  Juvenile  Common Welsh Green
## 101      D101 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 102      D102    F  Subadult  Hungarian Horntail
## 103      D103    F     Adult     Hebridean Black
## 104      D104    F     Adult     Hebridean Black
## 105      D105    M     Adult  Common Welsh Green
## 106      D106 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 107      D107 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 108      D108    F     Adult Norwegian Ridgeback
## 109      D109    M     Adult Swedish Short-Snout
## 110      D110    F     Adult Peruvian Vipertooth
## 111      D111    M     Adult Norwegian Ridgeback
## 112      D112    F     Adult Peruvian Vipertooth
## 113      D113 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 114      D114 &lt;NA&gt;  Juvenile    Chinese Fireball
## 115      D115    F     Adult  Common Welsh Green
## 116      D116    F     Adult Norwegian Ridgeback
## 117      D117 &lt;NA&gt;  Juvenile  Antipodean Opaleye
## 118      D118 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 119      D119    F     Adult Norwegian Ridgeback
## 120      D120    F     Adult     Hebridean Black
## 121      D121 &lt;NA&gt;  Juvenile  Common Welsh Green
## 122      D122    F     Adult Ukrainian Ironbelly
## 123      D123 &lt;NA&gt;  Juvenile  Common Welsh Green
## 124      D124    M     Adult    Chinese Fireball
## 125      D125 &lt;NA&gt;  Juvenile Swedish Short-Snout
## 126      D126    M     Adult Swedish Short-Snout
## 127      D127    M  Subadult Ukrainian Ironbelly
## 128      D128 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 129      D129    M     Adult   Romanian Longhorn
## 130      D130 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 131      D131 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 132      D132    F     Adult Norwegian Ridgeback
## 133      D133    F     Adult Ukrainian Ironbelly
## 134      D134    F     Adult     Hebridean Black
## 135      D135 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 136      D136    F  Subadult    Chinese Fireball
## 137      D137    F     Adult  Antipodean Opaleye
## 138      D138    F     Adult  Common Welsh Green
## 139      D139    F     Adult     Hebridean Black
## 140      D140 &lt;NA&gt;  Juvenile     Hebridean Black
## 141      D141    F     Adult   Romanian Longhorn
## 142      D142    M  Subadult  Common Welsh Green
## 143      D143    F     Adult  Antipodean Opaleye
## 144      D144    M     Adult Norwegian Ridgeback
## 145      D145    M     Adult Norwegian Ridgeback
## 146      D146    M     Adult Norwegian Ridgeback
## 147      D147 &lt;NA&gt;  Juvenile  Common Welsh Green
## 148      D148 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 149      D149    M     Adult Norwegian Ridgeback
## 150      D150    F     Adult  Hungarian Horntail
## 151      D151 &lt;NA&gt;  Juvenile  Common Welsh Green
## 152      D152    F  Subadult Peruvian Vipertooth
## 153      D153    M     Adult  Antipodean Opaleye
## 154      D154    F     Adult     Hebridean Black
## 155      D155    F     Adult  Common Welsh Green
## 156      D156    M     Adult Peruvian Vipertooth
## 157      D157    F  Subadult Swedish Short-Snout
## 158      D158 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 159      D159 &lt;NA&gt;  Juvenile  Common Welsh Green
## 160      D160    F     Adult  Common Welsh Green
## 161      D161    F     Adult    Chinese Fireball
## 162      D162    F     Adult  Hungarian Horntail
## 163      D163 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 164      D164 &lt;NA&gt;  Juvenile    Chinese Fireball
## 165      D165    M     Adult  Hungarian Horntail
## 166      D166 &lt;NA&gt;  Juvenile Swedish Short-Snout
## 167      D167    M     Adult Norwegian Ridgeback
## 168      D168    F     Adult Swedish Short-Snout
## 169      D169    F     Adult     Hebridean Black
## 170      D170 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 171      D171    M  Subadult Ukrainian Ironbelly
## 172      D172    M     Adult Peruvian Vipertooth
## 173      D173    F     Adult Swedish Short-Snout
## 174      D174 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 175      D175    M     Adult    Chinese Fireball
## 176      D176    F     Adult Ukrainian Ironbelly
## 177      D177    F     Adult   Romanian Longhorn
## 178      D178    F     Adult     Hebridean Black
## 179      D179 &lt;NA&gt;  Juvenile  Common Welsh Green
## 180      D180    F     Adult Norwegian Ridgeback
## 181      D181    F     Adult  Common Welsh Green
## 182      D182    F     Adult  Common Welsh Green
## 183      D183    F     Adult  Common Welsh Green
## 184      D184    F     Adult Norwegian Ridgeback
## 185      D185    M     Adult    Chinese Fireball
## 186      D186 &lt;NA&gt;  Juvenile  Common Welsh Green
## 187      D187 &lt;NA&gt;  Juvenile     Hebridean Black
## 188      D188    M     Adult  Hungarian Horntail
## 189      D189    F     Adult  Hungarian Horntail
## 190      D190    F     Adult     Hebridean Black
## 191      D191    M     Adult Peruvian Vipertooth
## 192      D192    M     Adult Norwegian Ridgeback
## 193      D193    M     Adult Peruvian Vipertooth
## 194      D194 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 195      D195    F     Adult   Romanian Longhorn
## 196      D196    F     Adult   Romanian Longhorn
## 197      D197    F     Adult  Hungarian Horntail
## 198      D198    M     Adult Ukrainian Ironbelly
## 199      D199 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 200      D200 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 201      D201 &lt;NA&gt;  Juvenile  Common Welsh Green
## 202      D202    M     Adult  Common Welsh Green
## 203      D203 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 204      D204    M     Adult   Romanian Longhorn
## 205      D205    F     Adult  Hungarian Horntail
## 206      D206    F     Adult  Hungarian Horntail
## 207      D207 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 208      D208    M     Adult Norwegian Ridgeback
## 209      D209 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 210      D210    M     Adult Norwegian Ridgeback
## 211      D211    F     Adult     Hebridean Black
## 212      D212    F     Adult  Antipodean Opaleye
## 213      D213 &lt;NA&gt;  Juvenile     Hebridean Black
## 214      D214    F  Subadult  Hungarian Horntail
## 215      D215    F     Adult Norwegian Ridgeback
## 216      D216 &lt;NA&gt;  Juvenile  Antipodean Opaleye
## 217      D217    F     Adult Peruvian Vipertooth
## 218      D218    F     Adult     Hebridean Black
## 219      D219    M     Adult Peruvian Vipertooth
## 220      D220    F     Adult  Common Welsh Green
## 221      D221    M     Adult Peruvian Vipertooth
## 222      D222    M  Subadult  Hungarian Horntail
## 223      D223    M     Adult  Antipodean Opaleye
## 224      D224 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 225      D225    M     Adult Norwegian Ridgeback
## 226      D226 &lt;NA&gt;  Juvenile Swedish Short-Snout
## 227      D227    F     Adult   Romanian Longhorn
## 228      D228    F     Adult     Hebridean Black
## 229      D229 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 230      D230    M     Adult Norwegian Ridgeback
## 231      D231    M     Adult Norwegian Ridgeback
## 232      D232    F  Subadult     Hebridean Black
## 233      D233    F  Subadult   Romanian Longhorn
## 234      D234    F     Adult Norwegian Ridgeback
## 235      D235 &lt;NA&gt;  Juvenile     Hebridean Black
## 236      D236    F     Adult  Hungarian Horntail
## 237      D237    M     Adult  Hungarian Horntail
## 238      D238    F     Adult Swedish Short-Snout
## 239      D239    F     Adult     Hebridean Black
## 240      D240    F     Adult Ukrainian Ironbelly
## 241      D241 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 242      D242    M     Adult   Romanian Longhorn
## 243      D243 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 244      D244    F     Adult  Hungarian Horntail
## 245      D245 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 246      D246 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 247      D247    M     Adult Norwegian Ridgeback
## 248      D248    M  Subadult  Common Welsh Green
## 249      D249 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 250      D250    F     Adult   Romanian Longhorn
## 251      D251 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 252      D252 &lt;NA&gt;  Juvenile  Common Welsh Green
## 253      D253    F     Adult Norwegian Ridgeback
## 254      D254    F     Adult   Romanian Longhorn
## 255      D255 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 256      D256 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 257      D257 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 258      D258 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 259      D259    F     Adult     Hebridean Black
## 260      D260    F     Adult  Common Welsh Green
## 261      D261 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 262      D262    M     Adult Peruvian Vipertooth
## 263      D263    M     Adult     Hebridean Black
## 264      D264    F  Subadult Norwegian Ridgeback
## 265      D265    M     Adult     Hebridean Black
## 266      D266 &lt;NA&gt;  Juvenile Swedish Short-Snout
## 267      D267 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 268      D268    F     Adult   Romanian Longhorn
## 269      D269    F     Adult Swedish Short-Snout
## 270      D270 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 271      D271    F     Adult   Romanian Longhorn
## 272      D272    F     Adult   Romanian Longhorn
## 273      D273 &lt;NA&gt;  Juvenile  Common Welsh Green
## 274      D274    F     Adult Norwegian Ridgeback
## 275      D275    F     Adult     Hebridean Black
## 276      D276    M     Adult Norwegian Ridgeback
## 277      D277    F  Subadult Swedish Short-Snout
## 278      D278    F     Adult  Common Welsh Green
## 279      D279 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 280      D280    M     Adult Ukrainian Ironbelly
## 281      D281    F     Adult   Romanian Longhorn
## 282      D282    F     Adult Peruvian Vipertooth
## 283      D283    F     Adult  Common Welsh Green
## 284      D284    F     Adult   Romanian Longhorn
## 285      D285 &lt;NA&gt;  Juvenile     Hebridean Black
## 286      D286    F     Adult Ukrainian Ironbelly
## 287      D287    M     Adult Norwegian Ridgeback
## 288      D288    M  Subadult     Hebridean Black
## 289      D289 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 290      D290 &lt;NA&gt;  Juvenile  Common Welsh Green
## 291      D291    F     Adult     Hebridean Black
## 292      D292 &lt;NA&gt;  Juvenile     Hebridean Black
## 293      D293    F     Adult    Chinese Fireball
## 294      D294    F     Adult  Common Welsh Green
## 295      D295    M  Subadult  Antipodean Opaleye
## 296      D296 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 297      D297 &lt;NA&gt;  Juvenile     Hebridean Black
## 298      D298    M     Adult Peruvian Vipertooth
## 299      D299    F     Adult   Romanian Longhorn
## 300      D300    F     Adult Peruvian Vipertooth
## 301      D301    F  Subadult  Common Welsh Green
## 302      D302    F     Adult Ukrainian Ironbelly
## 303      D303 &lt;NA&gt;  Juvenile  Antipodean Opaleye
## 304      D304    F  Subadult   Romanian Longhorn
## 305      D305    M     Adult  Common Welsh Green
## 306      D306 &lt;NA&gt;  Juvenile  Common Welsh Green
## 307      D307 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 308      D308    F     Adult   Romanian Longhorn
## 309      D309 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 310      D310 &lt;NA&gt;  Juvenile  Common Welsh Green
## 311      D311    M     Adult Norwegian Ridgeback
## 312      D312    M  Subadult    Chinese Fireball
## 313      D313    F     Adult  Antipodean Opaleye
## 314      D314    M     Adult   Romanian Longhorn
## 315      D315    F     Adult  Common Welsh Green
## 316      D316    M  Subadult     Hebridean Black
## 317      D317    F     Adult  Antipodean Opaleye
## 318      D318 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 319      D319 &lt;NA&gt;  Juvenile Swedish Short-Snout
## 320      D320 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 321      D321    M     Adult Norwegian Ridgeback
## 322      D322 &lt;NA&gt;  Juvenile    Chinese Fireball
## 323      D323    M     Adult   Romanian Longhorn
## 324      D324 &lt;NA&gt;  Juvenile  Common Welsh Green
## 325      D325    F     Adult Norwegian Ridgeback
## 326      D326    F     Adult Ukrainian Ironbelly
## 327      D327    M  Subadult   Romanian Longhorn
## 328      D328 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 329      D329    M     Adult   Romanian Longhorn
## 330      D330    F     Adult Peruvian Vipertooth
## 331      D331 &lt;NA&gt;  Juvenile Swedish Short-Snout
## 332      D332    F  Subadult  Common Welsh Green
## 333      D333 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 334      D334 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 335      D335    F     Adult   Romanian Longhorn
## 336      D336 &lt;NA&gt;  Juvenile  Common Welsh Green
## 337      D337    M     Adult Peruvian Vipertooth
## 338      D338 &lt;NA&gt;  Juvenile  Antipodean Opaleye
## 339      D339 &lt;NA&gt;  Juvenile    Chinese Fireball
## 340      D340 &lt;NA&gt;  Juvenile  Antipodean Opaleye
## 341      D341    F     Adult Norwegian Ridgeback
## 342      D342 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 343      D343    F     Adult  Antipodean Opaleye
## 344      D344 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 345      D345    M     Adult Swedish Short-Snout
## 346      D346    F     Adult   Romanian Longhorn
## 347      D347    F  Subadult  Common Welsh Green
## 348      D348 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 349      D349    M     Adult Peruvian Vipertooth
## 350      D350    M     Adult     Hebridean Black
## 351      D351    M     Adult Peruvian Vipertooth
## 352      D352    M     Adult   Romanian Longhorn
## 353      D353 &lt;NA&gt;  Juvenile     Hebridean Black
## 354      D354    F     Adult Norwegian Ridgeback
## 355      D355 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 356      D356    F     Adult   Romanian Longhorn
## 357      D357    F  Subadult   Romanian Longhorn
## 358      D358 &lt;NA&gt;  Juvenile  Common Welsh Green
## 359      D359    F     Adult     Hebridean Black
## 360      D360    M     Adult Norwegian Ridgeback
## 361      D361    M     Adult Swedish Short-Snout
## 362      D362    F  Subadult Norwegian Ridgeback
## 363      D363 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 364      D364 &lt;NA&gt;  Juvenile  Common Welsh Green
## 365      D365    M     Adult   Romanian Longhorn
## 366      D366    M     Adult Norwegian Ridgeback
## 367      D367    M     Adult Peruvian Vipertooth
## 368      D368    F     Adult  Common Welsh Green
## 369      D369    M     Adult Norwegian Ridgeback
## 370      D370 &lt;NA&gt;  Juvenile  Common Welsh Green
## 371      D371 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 372      D372    M     Adult Peruvian Vipertooth
## 373      D373    F     Adult Peruvian Vipertooth
## 374      D374    M     Adult Swedish Short-Snout
## 375      D375    M     Adult Norwegian Ridgeback
## 376      D376 &lt;NA&gt;  Juvenile Swedish Short-Snout
## 377      D377    F     Adult     Hebridean Black
## 378      D378    M     Adult   Romanian Longhorn
## 379      D379    F     Adult  Antipodean Opaleye
## 380      D380 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 381      D381    M     Adult  Common Welsh Green
## 382      D382    F     Adult Norwegian Ridgeback
## 383      D383    F     Adult     Hebridean Black
## 384      D384    M     Adult  Hungarian Horntail
## 385      D385    F     Adult  Common Welsh Green
## 386      D386 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 387      D387    M     Adult     Hebridean Black
## 388      D388    F  Subadult  Common Welsh Green
## 389      D389    F     Adult     Hebridean Black
## 390      D390    F     Adult  Common Welsh Green
## 391      D391 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 392      D392    M     Adult Peruvian Vipertooth
## 393      D393    M     Adult     Hebridean Black
## 394      D394    M     Adult Swedish Short-Snout
## 395      D395 &lt;NA&gt;  Juvenile  Antipodean Opaleye
## 396      D396    F  Subadult Norwegian Ridgeback
## 397      D397 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 398      D398    F     Adult  Common Welsh Green
## 399      D399    F     Adult   Romanian Longhorn
## 400      D400 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 401      D401    M  Subadult Norwegian Ridgeback
## 402      D402    F     Adult  Common Welsh Green
## 403      D403 &lt;NA&gt;  Juvenile  Common Welsh Green
## 404      D404    F     Adult  Common Welsh Green
## 405      D405    M     Adult   Romanian Longhorn
## 406      D406    M     Adult     Hebridean Black
## 407      D407    M     Adult  Antipodean Opaleye
## 408      D408    F     Adult  Common Welsh Green
## 409      D409 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 410      D410    F     Adult     Hebridean Black
## 411      D411 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 412      D412 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 413      D413    F     Adult   Romanian Longhorn
## 414      D414    F     Adult Peruvian Vipertooth
## 415      D415    F     Adult   Romanian Longhorn
## 416      D416    F     Adult   Romanian Longhorn
## 417      D417    M     Adult Norwegian Ridgeback
## 418      D418    M  Subadult  Common Welsh Green
## 419      D419    F     Adult Norwegian Ridgeback
## 420      D420 &lt;NA&gt;  Juvenile  Common Welsh Green
## 421      D421 &lt;NA&gt;  Juvenile  Common Welsh Green
## 422      D422    F     Adult Norwegian Ridgeback
## 423      D423    M     Adult  Common Welsh Green
## 424      D424    F     Adult     Hebridean Black
## 425      D425    M     Adult   Romanian Longhorn
## 426      D426    F     Adult Norwegian Ridgeback
## 427      D427    F     Adult Peruvian Vipertooth
## 428      D428 &lt;NA&gt;  Juvenile  Common Welsh Green
## 429      D429 &lt;NA&gt;  Juvenile  Common Welsh Green
## 430      D430    F     Adult  Hungarian Horntail
## 431      D431 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 432      D432    M     Adult  Antipodean Opaleye
## 433      D433    M     Adult Peruvian Vipertooth
## 434      D434 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 435      D435 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 436      D436 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 437      D437    M     Adult  Common Welsh Green
## 438      D438 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 439      D439    F  Subadult  Hungarian Horntail
## 440      D440    M     Adult  Common Welsh Green
## 441      D441    F     Adult Norwegian Ridgeback
## 442      D442    M     Adult   Romanian Longhorn
## 443      D443    F     Adult     Hebridean Black
## 444      D444    M     Adult     Hebridean Black
## 445      D445    M     Adult Norwegian Ridgeback
## 446      D446    F     Adult Swedish Short-Snout
## 447      D447 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 448      D448    F     Adult Peruvian Vipertooth
## 449      D449    M     Adult    Chinese Fireball
## 450      D450    F     Adult Peruvian Vipertooth
## 451      D451    F     Adult  Common Welsh Green
## 452      D452    F     Adult Swedish Short-Snout
## 453      D453    F     Adult  Antipodean Opaleye
## 454      D454    M     Adult   Romanian Longhorn
## 455      D455    F     Adult  Common Welsh Green
## 456      D456    F     Adult Peruvian Vipertooth
## 457      D457    F     Adult  Antipodean Opaleye
## 458      D458    F     Adult   Romanian Longhorn
## 459      D459    F  Subadult Swedish Short-Snout
## 460      D460    F     Adult Norwegian Ridgeback
## 461      D461    M     Adult     Hebridean Black
## 462      D462 &lt;NA&gt;  Juvenile  Common Welsh Green
## 463      D463    M     Adult Peruvian Vipertooth
## 464      D464    F     Adult     Hebridean Black
## 465      D465    M     Adult  Hungarian Horntail
## 466      D466 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 467      D467 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 468      D468    M     Adult Peruvian Vipertooth
## 469      D469    F     Adult   Romanian Longhorn
## 470      D470    F     Adult  Hungarian Horntail
## 471      D471    F     Adult Peruvian Vipertooth
## 472      D472    M     Adult  Hungarian Horntail
## 473      D473    M     Adult Peruvian Vipertooth
## 474      D474    F     Adult Ukrainian Ironbelly
## 475      D475    M  Subadult Norwegian Ridgeback
## 476      D476    F     Adult Norwegian Ridgeback
## 477      D477    M     Adult Norwegian Ridgeback
## 478      D478    M     Adult  Common Welsh Green
## 479      D479    F     Adult    Chinese Fireball
## 480      D480    F     Adult     Hebridean Black
## 481      D481    F     Adult  Hungarian Horntail
## 482      D482    M  Subadult   Romanian Longhorn
## 483      D483 &lt;NA&gt;  Juvenile     Hebridean Black
## 484      D484    M     Adult     Hebridean Black
## 485      D485    M     Adult     Hebridean Black
## 486      D486 &lt;NA&gt;  Juvenile  Common Welsh Green
## 487      D487    F     Adult  Hungarian Horntail
## 488      D488 &lt;NA&gt;  Juvenile  Hungarian Horntail
## 489      D489    F     Adult  Common Welsh Green
## 490      D490    F     Adult   Romanian Longhorn
## 491      D491    F     Adult     Hebridean Black
## 492      D492    F     Adult  Hungarian Horntail
## 493      D493    F     Adult     Hebridean Black
## 494      D494    F     Adult    Chinese Fireball
## 495      D495    M     Adult   Romanian Longhorn
## 496      D496    F     Adult   Romanian Longhorn
## 497      D497    F     Adult  Hungarian Horntail
## 498      D498    F     Adult  Common Welsh Green
## 499      D499    F     Adult Peruvian Vipertooth
## 500      D500    F     Adult  Common Welsh Green</code></pre>
<div id="limiting-results" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Limiting results</h3>
<p>If the whole table is too big and we only want to take a look at the first, say,
10 rows, we can add a <code>LIMIT</code> clause:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb53-1"><a href="sql.html#cb53-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb53-2"><a href="sql.html#cb53-2"></a><span class="kw">FROM</span> dragons </span>
<span id="cb53-3"><a href="sql.html#cb53-3"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id  sex age_class             species
## 1         D1    F  Subadult     Hebridean Black
## 2         D2 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 3         D3    F     Adult     Hebridean Black
## 4         D4    F     Adult Peruvian Vipertooth
## 5         D5 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 6         D6    F     Adult Norwegian Ridgeback
## 7         D7    M     Adult     Hebridean Black
## 8         D8 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 9         D9    F     Adult Norwegian Ridgeback
## 10       D10    F     Adult  Common Welsh Green</code></pre>
</div>
<div id="sorting-results" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Sorting results</h3>
<p>One thing to remember with SQL is that the data returned by a <code>SELECT</code> statement
does not necessarily return the data in any specific order unless we tell it to.
You can never assume the output is already sorted. To be explicit about how you
want the data ordered, you can add an <code>ORDER BY</code> clause:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb55-1"><a href="sql.html#cb55-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb55-2"><a href="sql.html#cb55-2"></a><span class="kw">FROM</span> dragons </span>
<span id="cb55-3"><a href="sql.html#cb55-3"></a><span class="kw">ORDER</span> <span class="kw">BY</span> species</span>
<span id="cb55-4"><a href="sql.html#cb55-4"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id  sex age_class            species
## 1        D39 &lt;NA&gt;  Juvenile Antipodean Opaleye
## 2        D43    F  Subadult Antipodean Opaleye
## 3        D63    F     Adult Antipodean Opaleye
## 4        D68    M     Adult Antipodean Opaleye
## 5        D74 &lt;NA&gt;  Juvenile Antipodean Opaleye
## 6       D117 &lt;NA&gt;  Juvenile Antipodean Opaleye
## 7       D137    F     Adult Antipodean Opaleye
## 8       D143    F     Adult Antipodean Opaleye
## 9       D153    M     Adult Antipodean Opaleye
## 10      D212    F     Adult Antipodean Opaleye</code></pre>
<p>The default ordering will be ascending. If we want descending ordering instead,
we can specify that as follows:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb57-1"><a href="sql.html#cb57-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb57-2"><a href="sql.html#cb57-2"></a><span class="kw">FROM</span> dragons </span>
<span id="cb57-3"><a href="sql.html#cb57-3"></a><span class="kw">ORDER</span> <span class="kw">BY</span> species <span class="kw">DESC</span></span>
<span id="cb57-4"><a href="sql.html#cb57-4"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id  sex age_class             species
## 1         D5 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 2        D21    F     Adult Ukrainian Ironbelly
## 3        D32    M     Adult Ukrainian Ironbelly
## 4        D35    F     Adult Ukrainian Ironbelly
## 5        D41 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 6        D47    F     Adult Ukrainian Ironbelly
## 7        D48    M     Adult Ukrainian Ironbelly
## 8        D66 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 9       D122    F     Adult Ukrainian Ironbelly
## 10      D127    M  Subadult Ukrainian Ironbelly</code></pre>
</div>
<div id="finding-unique-values" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Finding unique values</h3>
<p>Say that we wanted to know what species of dragons are in the database. We can
ask for unique values as follows:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb59-1"><a href="sql.html#cb59-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> species </span>
<span id="cb59-2"><a href="sql.html#cb59-2"></a><span class="kw">FROM</span> dragons;</span></code></pre></div>
<pre><code>##                species
## 1      Hebridean Black
## 2    Romanian Longhorn
## 3  Peruvian Vipertooth
## 4  Ukrainian Ironbelly
## 5  Norwegian Ridgeback
## 6   Common Welsh Green
## 7  Swedish Short-Snout
## 8     Chinese Fireball
## 9   Hungarian Horntail
## 10  Antipodean Opaleye</code></pre>
</div>
<div id="filtering" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Filtering</h3>
<p>We can filter data based on any logical condition using a <code>WHERE</code> clause. For
instance, say that we we only want Norwegian Ridgebacks:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb61-1"><a href="sql.html#cb61-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb61-2"><a href="sql.html#cb61-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb61-3"><a href="sql.html#cb61-3"></a><span class="kw">WHERE</span> species <span class="op">=</span> <span class="st">&#39;Norwegian Ridgeback&#39;</span></span>
<span id="cb61-4"><a href="sql.html#cb61-4"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id  sex age_class             species
## 1         D6    F     Adult Norwegian Ridgeback
## 2         D9    F     Adult Norwegian Ridgeback
## 3        D18    F     Adult Norwegian Ridgeback
## 4        D22 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 5        D27    F     Adult Norwegian Ridgeback
## 6        D29    F     Adult Norwegian Ridgeback
## 7        D34    F     Adult Norwegian Ridgeback
## 8        D51    F  Subadult Norwegian Ridgeback
## 9        D53 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 10       D54    F     Adult Norwegian Ridgeback</code></pre>
<p>We can specify multiple conditions at once. For example, if we want only female
Norwegian Ridgebacks:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb63-1"><a href="sql.html#cb63-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb63-2"><a href="sql.html#cb63-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb63-3"><a href="sql.html#cb63-3"></a><span class="kw">WHERE</span> species <span class="op">=</span> <span class="st">&#39;Norwegian Ridgeback&#39;</span> <span class="kw">AND</span> sex <span class="op">=</span> <span class="st">&#39;F&#39;</span></span>
<span id="cb63-4"><a href="sql.html#cb63-4"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id sex age_class             species
## 1         D6   F     Adult Norwegian Ridgeback
## 2         D9   F     Adult Norwegian Ridgeback
## 3        D18   F     Adult Norwegian Ridgeback
## 4        D27   F     Adult Norwegian Ridgeback
## 5        D29   F     Adult Norwegian Ridgeback
## 6        D34   F     Adult Norwegian Ridgeback
## 7        D51   F  Subadult Norwegian Ridgeback
## 8        D54   F     Adult Norwegian Ridgeback
## 9        D56   F  Subadult Norwegian Ridgeback
## 10       D70   F     Adult Norwegian Ridgeback</code></pre>
<p>In the example above, both conditions have to be satisfied at once – dragons
have to be Norwegian Ridgeback <strong>and</strong> females to appear in the results. What if
we want to return data where <strong>at least</strong> one of two conditions is satisfied?
The following query will return dragons that are either Norwegian Ridgebacks or
Peruvian Vipertooths:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb65-1"><a href="sql.html#cb65-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb65-2"><a href="sql.html#cb65-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb65-3"><a href="sql.html#cb65-3"></a><span class="kw">WHERE</span> species <span class="op">=</span> <span class="st">&#39;Norwegian Ridgeback&#39;</span> <span class="kw">OR</span> species <span class="op">=</span> <span class="st">&#39;Peruvian Vipertooth&#39;</span></span>
<span id="cb65-4"><a href="sql.html#cb65-4"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id  sex age_class             species
## 1         D4    F     Adult Peruvian Vipertooth
## 2         D6    F     Adult Norwegian Ridgeback
## 3         D8 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 4         D9    F     Adult Norwegian Ridgeback
## 5        D11    F     Adult Peruvian Vipertooth
## 6        D13 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 7        D17    F     Adult Peruvian Vipertooth
## 8        D18    F     Adult Norwegian Ridgeback
## 9        D22 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 10       D25    M     Adult Peruvian Vipertooth</code></pre>
<p>A more concise way to write the same query would be:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb67-1"><a href="sql.html#cb67-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb67-2"><a href="sql.html#cb67-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb67-3"><a href="sql.html#cb67-3"></a><span class="kw">WHERE</span> species <span class="kw">IN</span> (<span class="st">&#39;Norwegian Ridgeback&#39;</span>, <span class="st">&#39;Peruvian Vipertooth&#39;</span>)</span>
<span id="cb67-4"><a href="sql.html#cb67-4"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id  sex age_class             species
## 1         D4    F     Adult Peruvian Vipertooth
## 2         D6    F     Adult Norwegian Ridgeback
## 3         D8 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 4         D9    F     Adult Norwegian Ridgeback
## 5        D11    F     Adult Peruvian Vipertooth
## 6        D13 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 7        D17    F     Adult Peruvian Vipertooth
## 8        D18    F     Adult Norwegian Ridgeback
## 9        D22 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 10       D25    M     Adult Peruvian Vipertooth</code></pre>
<p>Logical conditions also include “greater than”, “less than”, “not equal to”.
For instance, we can exclude Norwegian Ridgeback like so:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb69-1"><a href="sql.html#cb69-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb69-2"><a href="sql.html#cb69-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb69-3"><a href="sql.html#cb69-3"></a><span class="kw">WHERE</span> species <span class="op">!=</span> <span class="st">&#39;Norwegian Ridgeback&#39;</span></span>
<span id="cb69-4"><a href="sql.html#cb69-4"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id  sex age_class             species
## 1         D1    F  Subadult     Hebridean Black
## 2         D2 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 3         D3    F     Adult     Hebridean Black
## 4         D4    F     Adult Peruvian Vipertooth
## 5         D5 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 6         D7    M     Adult     Hebridean Black
## 7         D8 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 8        D10    F     Adult  Common Welsh Green
## 9        D11    F     Adult Peruvian Vipertooth
## 10       D12    F     Adult Swedish Short-Snout</code></pre>
<p>Let’s see some examples with numbers using the morphometrics table. The
following query returns any dragons with wingspan greater than 8 meters
(incidentally, you can include comments in SQL is by using a double dash):</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb71-1"><a href="sql.html#cb71-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb71-2"><a href="sql.html#cb71-2"></a><span class="kw">FROM</span> morphometrics</span>
<span id="cb71-3"><a href="sql.html#cb71-3"></a><span class="kw">WHERE</span> wingspan_cm <span class="op">&gt;</span> <span class="dv">800</span> <span class="co">-- 800 cm is 8 meters</span></span>
<span id="cb71-4"><a href="sql.html#cb71-4"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    measurement_id dragon_id       date total_body_length_cm wingspan_cm
## 1               1       D96 2012-10-10            1069.8965    1389.553
## 2               3      D316 2017-09-08             866.8935    1052.370
## 3               4      D317 2016-09-05            1146.9708    1356.808
## 4               5      D484 2016-12-04            1032.0520    1720.864
## 5               6      D149 2012-02-13             919.9908    1533.599
## 6               9      D283 2007-06-21            1698.1918    1387.194
## 7              11      D485 2002-10-04             957.4830    1780.262
## 8              16      D343 2016-04-08            1520.7012    1537.747
## 9              19      D237 2009-02-22            1204.7588    2120.408
## 10             20      D312 2001-06-16             927.1642    1267.669
##    tail_length_cm tarsus_length_cm claw_length_cm
## 1        595.2706        121.65175       15.59622
## 2        373.7619         68.16869       12.71970
## 3        542.5670        172.43663       14.80936
## 4        596.4419        114.05057       11.98567
## 5        563.9201        134.18051       11.00507
## 6        666.4246        147.44219       13.18923
## 7        560.8861        130.86021       16.52066
## 8        618.2842        151.93929       10.37198
## 9        655.5090        134.75780       11.13375
## 10       452.7417        108.84082       11.93288</code></pre>
<p>We can also sort the output of the filter:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb73-1"><a href="sql.html#cb73-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb73-2"><a href="sql.html#cb73-2"></a><span class="kw">FROM</span> morphometrics</span>
<span id="cb73-3"><a href="sql.html#cb73-3"></a><span class="kw">WHERE</span> wingspan_cm <span class="op">&gt;</span> <span class="dv">800</span> </span>
<span id="cb73-4"><a href="sql.html#cb73-4"></a><span class="kw">ORDER</span> <span class="kw">BY</span> wingspan_cm <span class="kw">DESC</span></span>
<span id="cb73-5"><a href="sql.html#cb73-5"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    measurement_id dragon_id       date total_body_length_cm wingspan_cm
## 1              90      D494 2004-06-12             1307.224    3101.688
## 2              39       D99 2016-11-16             1334.744    2891.525
## 3              86      D378 2013-09-14             1311.868    2792.250
## 4             138      D414 2015-08-28             1721.825    2653.967
## 5             240      D228 2019-06-28             1789.812    2653.470
## 6             312      D476 2000-06-20             1391.101    2617.818
## 7             127       D70 2010-09-10             1601.945    2518.449
## 8              23      D499 2011-12-09             1268.471    2481.832
## 9             282      D496 2006-08-18             1536.888    2460.436
## 10            256      D321 2017-03-19             1423.789    2440.229
##    tail_length_cm tarsus_length_cm claw_length_cm
## 1        609.9900         131.2439      14.031487
## 2        596.7174         144.0813       7.619286
## 3        601.6576         107.9930      20.714964
## 4        619.6061         128.5858      18.447108
## 5        604.2838         162.4562       8.846004
## 6        599.2680         138.8046       9.720670
## 7        598.8351         135.7797       8.544782
## 8        609.8503         129.6169      10.313340
## 9        679.7031         136.7213      17.495741
## 10       619.7223         116.3764       7.266753</code></pre>
</div>
<div id="calculations" class="section level3">
<h3><span class="header-section-number">6.2.5</span> Calculations</h3>
<p>The morphometric measurements are in centimeters, but we often define our
filtering conditions using meters in our minds (see above, “wingspan greater
than 8 meters”). Instead of converting the condition into centimeters, wouldn’t
it be easier to have SQLite transform the data in meters and then evaluate the
condition? We can do this calculation on the fly:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb75-1"><a href="sql.html#cb75-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb75-2"><a href="sql.html#cb75-2"></a><span class="kw">FROM</span> morphometrics</span>
<span id="cb75-3"><a href="sql.html#cb75-3"></a><span class="kw">WHERE</span> wingspan_cm<span class="op">/</span><span class="dv">100</span> <span class="op">&gt;</span> <span class="dv">8</span></span>
<span id="cb75-4"><a href="sql.html#cb75-4"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    measurement_id dragon_id       date total_body_length_cm wingspan_cm
## 1               1       D96 2012-10-10            1069.8965    1389.553
## 2               3      D316 2017-09-08             866.8935    1052.370
## 3               4      D317 2016-09-05            1146.9708    1356.808
## 4               5      D484 2016-12-04            1032.0520    1720.864
## 5               6      D149 2012-02-13             919.9908    1533.599
## 6               9      D283 2007-06-21            1698.1918    1387.194
## 7              11      D485 2002-10-04             957.4830    1780.262
## 8              16      D343 2016-04-08            1520.7012    1537.747
## 9              19      D237 2009-02-22            1204.7588    2120.408
## 10             20      D312 2001-06-16             927.1642    1267.669
##    tail_length_cm tarsus_length_cm claw_length_cm
## 1        595.2706        121.65175       15.59622
## 2        373.7619         68.16869       12.71970
## 3        542.5670        172.43663       14.80936
## 4        596.4419        114.05057       11.98567
## 5        563.9201        134.18051       11.00507
## 6        666.4246        147.44219       13.18923
## 7        560.8861        130.86021       16.52066
## 8        618.2842        151.93929       10.37198
## 9        655.5090        134.75780       11.13375
## 10       452.7417        108.84082       11.93288</code></pre>
</div>
<div id="aggregate-functions" class="section level3">
<h3><span class="header-section-number">6.2.6</span> Aggregate functions</h3>
<p>Summary statistics are calculated using aggregate functions in SQL. Counting,
summing, calculating the mean, minimum, maximum values are all examples of
aggregate functions. Let’s see how they work.</p>
<p>If we want to know how many Norwegian Ridgebacks are in the database, we can
use:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb77-1"><a href="sql.html#cb77-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>) </span>
<span id="cb77-2"><a href="sql.html#cb77-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb77-3"><a href="sql.html#cb77-3"></a><span class="kw">WHERE</span> species <span class="op">=</span> <span class="st">&#39;Norwegian Ridgeback&#39;</span>;</span></code></pre></div>
<pre><code>##   COUNT(*)
## 1       86</code></pre>
<p>The dragons table has no repeated IDs, so we shouldn’t have counted anybody
twice. However, let’s double check if that’s true by specifying that we want
to only count distinct IDs:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb79-1"><a href="sql.html#cb79-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="kw">DISTINCT</span> dragon_id) </span>
<span id="cb79-2"><a href="sql.html#cb79-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb79-3"><a href="sql.html#cb79-3"></a><span class="kw">WHERE</span> species <span class="op">=</span> <span class="st">&#39;Norwegian Ridgeback&#39;</span>;</span></code></pre></div>
<pre><code>##   COUNT(DISTINCT dragon_id)
## 1                        86</code></pre>
<p>Now let’s see how to calculate some summary stats on dragon morphometrics. What
is the mean total body length of dragons in our sample?</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb81-1"><a href="sql.html#cb81-1"></a><span class="kw">SELECT</span> <span class="fu">AVG</span>(total_body_length_cm)</span>
<span id="cb81-2"><a href="sql.html#cb81-2"></a><span class="kw">FROM</span> morphometrics;</span></code></pre></div>
<pre><code>##   AVG(total_body_length_cm)
## 1                  961.3612</code></pre>
<p>We can also calculate several different things at once:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb83-1"><a href="sql.html#cb83-1"></a><span class="kw">SELECT</span> <span class="fu">AVG</span>(total_body_length_cm), <span class="fu">MIN</span>(total_body_length_cm), <span class="fu">MAX</span>(total_body_length_cm)</span>
<span id="cb83-2"><a href="sql.html#cb83-2"></a><span class="kw">FROM</span> morphometrics;</span></code></pre></div>
<pre><code>##   AVG(total_body_length_cm) MIN(total_body_length_cm) MAX(total_body_length_cm)
## 1                  961.3612                  285.6049                  2250.789</code></pre>
</div>
<div id="aliases" class="section level3">
<h3><span class="header-section-number">6.2.7</span> Aliases</h3>
<p>Aliases are temporary names that we can assign to a column (or a table) during
the execution of a query. For example, we can use an alias to rename the output
of our mean body length calculation:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb85-1"><a href="sql.html#cb85-1"></a><span class="kw">SELECT</span> <span class="fu">AVG</span>(total_body_length_cm) <span class="kw">AS</span> mean_body_length</span>
<span id="cb85-2"><a href="sql.html#cb85-2"></a><span class="kw">FROM</span> morphometrics;</span></code></pre></div>
<pre><code>##   mean_body_length
## 1         961.3612</code></pre>
</div>
<div id="grouping" class="section level3">
<h3><span class="header-section-number">6.2.8</span> Grouping</h3>
<p>If we want to apply the same calculation to different groups within the data,
we can use the <code>GROUP BY</code> clause. <code>GROUP BY</code> is used in conjunction with an
aggregate function to return the computed values broken down by group. For
instance, if we want to count how many dragons we have for each species (and
sort them from the most numerous to the least numerous):</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb87-1"><a href="sql.html#cb87-1"></a><span class="kw">SELECT</span> species, <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> n_dragons</span>
<span id="cb87-2"><a href="sql.html#cb87-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb87-3"><a href="sql.html#cb87-3"></a><span class="kw">GROUP</span> <span class="kw">BY</span> species</span>
<span id="cb87-4"><a href="sql.html#cb87-4"></a><span class="kw">ORDER</span> <span class="kw">BY</span> n_dragons <span class="kw">DESC</span>;</span></code></pre></div>
<pre><code>##                species n_dragons
## 1  Norwegian Ridgeback        86
## 2   Common Welsh Green        81
## 3    Romanian Longhorn        69
## 4      Hebridean Black        66
## 5  Peruvian Vipertooth        60
## 6   Hungarian Horntail        40
## 7  Swedish Short-Snout        27
## 8  Ukrainian Ironbelly        26
## 9   Antipodean Opaleye        25
## 10    Chinese Fireball        20</code></pre>
</div>
<div id="filtering-based-on-computed-values" class="section level3">
<h3><span class="header-section-number">6.2.9</span> Filtering based on computed values</h3>
<p>If we want to apply any filtering to our results based on calculated values, the
<code>WHERE</code> clause is not going to work. Instead, a <code>HAVING</code> clause is used in
combination with an aggregate function and a <code>GROUP BY</code>. <code>HAVING</code> does the same
thing as <code>WHERE</code> except that it handles logical conditions on computed values.
For example, say that we want to count how many individuals we have in our
database and then only keep the species for which we have at least 50 individuals.
The following query counts how many individual dragons we have for each species:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb89-1"><a href="sql.html#cb89-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="kw">DISTINCT</span> dragon_id) <span class="kw">AS</span> n_dragons, species</span>
<span id="cb89-2"><a href="sql.html#cb89-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb89-3"><a href="sql.html#cb89-3"></a><span class="kw">GROUP</span> <span class="kw">BY</span> species;</span></code></pre></div>
<pre><code>##    n_dragons             species
## 1         25  Antipodean Opaleye
## 2         20    Chinese Fireball
## 3         81  Common Welsh Green
## 4         66     Hebridean Black
## 5         40  Hungarian Horntail
## 6         86 Norwegian Ridgeback
## 7         60 Peruvian Vipertooth
## 8         69   Romanian Longhorn
## 9         27 Swedish Short-Snout
## 10        26 Ukrainian Ironbelly</code></pre>
<p>Because the count is a calculated value (the output of the aggregate function
<code>COUNT</code>), if we try to apply a filter using <code>WHERE</code> we’ll get an error. Instead, we can use <code>HAVING</code>:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb91-1"><a href="sql.html#cb91-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="kw">DISTINCT</span> dragon_id) <span class="kw">AS</span> n_dragons, species</span>
<span id="cb91-2"><a href="sql.html#cb91-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb91-3"><a href="sql.html#cb91-3"></a><span class="kw">GROUP</span> <span class="kw">BY</span> species</span>
<span id="cb91-4"><a href="sql.html#cb91-4"></a><span class="kw">HAVING</span> n_dragons <span class="op">&gt;</span> <span class="dv">50</span>;</span></code></pre></div>
<pre><code>##   n_dragons             species
## 1        81  Common Welsh Green
## 2        66     Hebridean Black
## 3        86 Norwegian Ridgeback
## 4        60 Peruvian Vipertooth
## 5        69   Romanian Longhorn</code></pre>
</div>
<div id="null-values" class="section level3">
<h3><span class="header-section-number">6.2.10</span> Null values</h3>
<p>Missing values in SQL are represented as <code>NULL</code>. We can filter (or filter out)
these values using the <code>IS NULL</code> operator:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb93-1"><a href="sql.html#cb93-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb93-2"><a href="sql.html#cb93-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb93-3"><a href="sql.html#cb93-3"></a><span class="kw">WHERE</span> sex <span class="kw">IS</span> <span class="kw">NULL</span></span>
<span id="cb93-4"><a href="sql.html#cb93-4"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id  sex age_class             species
## 1         D2 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 2         D5 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 3         D8 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 4        D13 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 5        D14 &lt;NA&gt;  Juvenile     Hebridean Black
## 6        D15 &lt;NA&gt;  Juvenile    Chinese Fireball
## 7        D22 &lt;NA&gt;  Juvenile Norwegian Ridgeback
## 8        D24 &lt;NA&gt;  Juvenile  Common Welsh Green
## 9        D26 &lt;NA&gt;  Juvenile  Common Welsh Green
## 10       D31 &lt;NA&gt;  Juvenile  Common Welsh Green</code></pre>
<p>The query above returns all the dragons for which sex is unknown. If we want to
exclude any individuals for which sex is unknown, then we can add the <code>NOT</code>
operator to our statement:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb95-1"><a href="sql.html#cb95-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb95-2"><a href="sql.html#cb95-2"></a><span class="kw">FROM</span> dragons</span>
<span id="cb95-3"><a href="sql.html#cb95-3"></a><span class="kw">WHERE</span> sex <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb95-4"><a href="sql.html#cb95-4"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id sex age_class             species
## 1         D1   F  Subadult     Hebridean Black
## 2         D3   F     Adult     Hebridean Black
## 3         D4   F     Adult Peruvian Vipertooth
## 4         D6   F     Adult Norwegian Ridgeback
## 5         D7   M     Adult     Hebridean Black
## 6         D9   F     Adult Norwegian Ridgeback
## 7        D10   F     Adult  Common Welsh Green
## 8        D11   F     Adult Peruvian Vipertooth
## 9        D12   F     Adult Swedish Short-Snout
## 10       D16   F     Adult    Chinese Fireball</code></pre>
</div>
<div id="joins" class="section level3">
<h3><span class="header-section-number">6.2.11</span> Joins</h3>
<p>So far, we have learned how to query data from a single table. But what if we
need to combine information from multiple tables to get the result we want?
Let’s make an example. Say that we want to calculate the average wingspan for
male versus female dragons. The wingspan measurements are in the morphometrics
table. However, the morphometrics table does not have a “sex” column. The
information on sex is in the dragons table. To get our answer, we need to
combine information from the dragons and morphometrics tables. To do so, we
introduce SQL joins.</p>
<p>Joins are the heart of relational database use. Without joins, there is no point
in a relational database because we can’t take advantage of the relations
between tables. Joins exploit the links we established between tables via
foreign keys to combine information across them.</p>
<p>There are several types of join. The most common types are left join, inner
join, or full join. To understand this terminology, consider this:
whenever you are joining two tables, the first table you mention (the one to
which you’re joining) is called the <strong>left</strong> table, whereas the second table
(the one you’re joining to the first) is called the <strong>right</strong> table. With a left
join, you keep all the records in the left table and add information from the
right table whenever there’s a matching row. A full join means that you retain
all rows from both tables, matching them whenever possible. An inner join means
that you only retain the rows that match between the two tables.</p>
<div class="figure" style="text-align: center"><span id="fig:sql-joins"></span>
<img src="img/sql-joins.png" alt="SQL Joins" width="60%" />
<p class="caption">
Figure 6.1: SQL Joins
</p>
</div>
<p>Let’s look at this in practice and it will make more sense. Our database
contains a deployments table and a morphometrics table. Not all dragons that
were tracked were also measured. If we do a left join using the deployments as
the left table, we get in output the whole deployments table (all the dragons
that were tracked) with the associated morphometric information whenever
available (for the dragons that were also measured):</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb97-1"><a href="sql.html#cb97-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb97-2"><a href="sql.html#cb97-2"></a><span class="kw">FROM</span> deployments <span class="co">-- this is our left table</span></span>
<span id="cb97-3"><a href="sql.html#cb97-3"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> morphometrics <span class="co">-- this is our right table </span></span>
<span id="cb97-4"><a href="sql.html#cb97-4"></a><span class="kw">ON</span> deployments.dragon_id <span class="op">=</span> morphometrics.dragon_id <span class="co">-- this is the shared column</span></span>
<span id="cb97-5"><a href="sql.html#cb97-5"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    deployment_id dragon_id tag_id start_deployment end_deployment
## 1              1      D486 N33529       2006-12-20     2007-07-04
## 2              2      D393 J47978       2008-01-13     2008-10-13
## 3              3       D88 R61684       2004-09-19     2004-12-01
## 4              4      D330 B35524       2015-11-21     2016-08-02
## 5              5      D478 T55954       2002-05-07     2002-10-26
## 6              6      D300 O31688       2006-01-20     2006-08-23
## 7              7      D380 B61925       2015-01-27     2015-10-21
## 8              8      D315 P47677       2006-03-03     2006-06-06
## 9              9      D209 P35987       2007-02-26     2007-05-31
## 10            10      D357 I41609       2013-09-09     2014-03-08
##    measurement_id dragon_id       date total_body_length_cm wingspan_cm
## 1              14      D486 2006-12-20             315.2255    616.5057
## 2             146      D393 2008-01-13            1275.6809    803.7776
## 3              NA      &lt;NA&gt;       &lt;NA&gt;                   NA          NA
## 4             252      D330 2015-11-21            1364.8418   1351.6375
## 5              NA      &lt;NA&gt;       &lt;NA&gt;                   NA          NA
## 6              NA      &lt;NA&gt;       &lt;NA&gt;                   NA          NA
## 7             260      D380 2015-01-27             327.5435    616.5409
## 8              NA      &lt;NA&gt;       &lt;NA&gt;                   NA          NA
## 9              82      D209 2007-02-26             325.2996    670.5136
## 10             31      D357 2013-09-09             730.9783    972.8464
##    tail_length_cm tarsus_length_cm claw_length_cm
## 1        117.3121         31.70299       4.980824
## 2        638.4500        133.38012      12.472582
## 3              NA               NA             NA
## 4        637.7992        140.29208      14.076526
## 5              NA               NA             NA
## 6              NA               NA             NA
## 7        102.2240         35.78315       4.716980
## 8              NA               NA             NA
## 9        118.8795         41.10574       4.926693
## 10       489.0859         93.98672      17.895960</code></pre>
<p>Since the shared column is named the same in the two tables (<code>dragon_id</code>), I had
to specify which table I was referring to each time in the <code>ON</code> clause, or it
would have been ambiguous. The syntax to do so is <code>table.column</code>. Also note that,
because the dragon ID column appears in both tables and we did not specify which
table we wanted it from, SQLite is duplicating it. To avoid that, we need to get
rid of the wildcard and spell out the name of each of the columns we want in
output (also specifying the table when ambiguous):</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb99-1"><a href="sql.html#cb99-1"></a><span class="kw">SELECT</span> deployments.dragon_id, <span class="dt">date</span>, tag_id, start_deployment, end_deployment,</span>
<span id="cb99-2"><a href="sql.html#cb99-2"></a>total_body_length_cm, wingspan_cm, tail_length_cm, tarsus_length_cm, claw_length_cm</span>
<span id="cb99-3"><a href="sql.html#cb99-3"></a><span class="kw">FROM</span> deployments </span>
<span id="cb99-4"><a href="sql.html#cb99-4"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> morphometrics </span>
<span id="cb99-5"><a href="sql.html#cb99-5"></a><span class="kw">ON</span> deployments.dragon_id <span class="op">=</span> morphometrics.dragon_id </span>
<span id="cb99-6"><a href="sql.html#cb99-6"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id       date tag_id start_deployment end_deployment
## 1       D486 2006-12-20 N33529       2006-12-20     2007-07-04
## 2       D393 2008-01-13 J47978       2008-01-13     2008-10-13
## 3        D88       &lt;NA&gt; R61684       2004-09-19     2004-12-01
## 4       D330 2015-11-21 B35524       2015-11-21     2016-08-02
## 5       D478       &lt;NA&gt; T55954       2002-05-07     2002-10-26
## 6       D300       &lt;NA&gt; O31688       2006-01-20     2006-08-23
## 7       D380 2015-01-27 B61925       2015-01-27     2015-10-21
## 8       D315       &lt;NA&gt; P47677       2006-03-03     2006-06-06
## 9       D209 2007-02-26 P35987       2007-02-26     2007-05-31
## 10      D357 2013-09-09 I41609       2013-09-09     2014-03-08
##    total_body_length_cm wingspan_cm tail_length_cm tarsus_length_cm
## 1              315.2255    616.5057       117.3121         31.70299
## 2             1275.6809    803.7776       638.4500        133.38012
## 3                    NA          NA             NA               NA
## 4             1364.8418   1351.6375       637.7992        140.29208
## 5                    NA          NA             NA               NA
## 6                    NA          NA             NA               NA
## 7              327.5435    616.5409       102.2240         35.78315
## 8                    NA          NA             NA               NA
## 9              325.2996    670.5136       118.8795         41.10574
## 10             730.9783    972.8464       489.0859         93.98672
##    claw_length_cm
## 1        4.980824
## 2       12.472582
## 3              NA
## 4       14.076526
## 5              NA
## 6              NA
## 7        4.716980
## 8              NA
## 9        4.926693
## 10      17.895960</code></pre>
<p>If we invert the tables (the morphometrics becomes the left table and the
deployments becomes the right), we get in output the whole morphometric table
(all the dragons that were measured) with the associated deployment information
whenever available (for the dragons that were also tracked):</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb101-1"><a href="sql.html#cb101-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb101-2"><a href="sql.html#cb101-2"></a><span class="kw">FROM</span> morphometrics <span class="co">-- this is our left table</span></span>
<span id="cb101-3"><a href="sql.html#cb101-3"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> deployments <span class="co">-- this is our right table </span></span>
<span id="cb101-4"><a href="sql.html#cb101-4"></a><span class="kw">ON</span> morphometrics.dragon_id <span class="op">=</span> deployments.dragon_id </span>
<span id="cb101-5"><a href="sql.html#cb101-5"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    measurement_id dragon_id       date total_body_length_cm wingspan_cm
## 1               1       D96 2012-10-10            1069.8965   1389.5527
## 2               2      D400 2003-07-03             333.4600    634.9109
## 3               3      D316 2017-09-08             866.8935   1052.3702
## 4               4      D317 2016-09-05            1146.9708   1356.8084
## 5               5      D484 2016-12-04            1032.0520   1720.8641
## 6               6      D149 2012-02-13             919.9908   1533.5991
## 7               7      D285 2016-03-23             304.8285    698.8157
## 8               8      D256 2013-09-07             358.9701    652.0053
## 9               9      D283 2007-06-21            1698.1918   1387.1943
## 10             10      D213 2001-12-12             353.6952    670.5283
##    tail_length_cm tarsus_length_cm claw_length_cm deployment_id dragon_id
## 1        595.2706        121.65175      15.596219           274       D96
## 2        104.2241         38.10844       4.305086           260      D400
## 3        373.7619         68.16869      12.719697            NA      &lt;NA&gt;
## 4        542.5670        172.43663      14.809363            98      D317
## 5        596.4419        114.05057      11.985672           285      D484
## 6        563.9201        134.18051      11.005070            NA      &lt;NA&gt;
## 7        115.8964         42.18657       5.041634           126      D285
## 8        148.3656         43.57849       4.576640           291      D256
## 9        666.4246        147.44219      13.189233           145      D283
## 10       140.4342         43.60513       4.248564           128      D213
##    tag_id start_deployment end_deployment
## 1  H83101       2012-10-10     2013-06-02
## 2  S49621       2003-07-03     2004-01-17
## 3    &lt;NA&gt;             &lt;NA&gt;           &lt;NA&gt;
## 4  A49007       2016-09-05     2017-01-09
## 5  V63425       2016-12-04     2017-02-19
## 6    &lt;NA&gt;             &lt;NA&gt;           &lt;NA&gt;
## 7  B74989       2016-03-23     2016-11-08
## 8  O66678       2013-09-07     2013-11-10
## 9  G59298       2007-06-21     2007-11-14
## 10 F64333       2001-12-12     2002-02-05</code></pre>
<p>An inner join only keeps the rows that match between two tables. In this case,
that means we only get in output data for animals that were both tracked <strong>and</strong>
measured:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb103-1"><a href="sql.html#cb103-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb103-2"><a href="sql.html#cb103-2"></a><span class="kw">FROM</span> morphometrics</span>
<span id="cb103-3"><a href="sql.html#cb103-3"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> deployments </span>
<span id="cb103-4"><a href="sql.html#cb103-4"></a><span class="kw">ON</span> morphometrics.dragon_id <span class="op">=</span> deployments.dragon_id </span>
<span id="cb103-5"><a href="sql.html#cb103-5"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    measurement_id dragon_id       date total_body_length_cm wingspan_cm
## 1               1       D96 2012-10-10            1069.8965   1389.5527
## 2               2      D400 2003-07-03             333.4600    634.9109
## 3               4      D317 2016-09-05            1146.9708   1356.8084
## 4               5      D484 2016-12-04            1032.0520   1720.8641
## 5               7      D285 2016-03-23             304.8285    698.8157
## 6               8      D256 2013-09-07             358.9701    652.0053
## 7               9      D283 2007-06-21            1698.1918   1387.1943
## 8              10      D213 2001-12-12             353.6952    670.5283
## 9              13       D41 2016-11-03             325.5946    626.2576
## 10             14      D486 2006-12-20             315.2255    616.5057
##    tail_length_cm tarsus_length_cm claw_length_cm deployment_id dragon_id
## 1       595.27056        121.65175      15.596219           274       D96
## 2       104.22414         38.10844       4.305086           260      D400
## 3       542.56700        172.43663      14.809363            98      D317
## 4       596.44195        114.05057      11.985672           285      D484
## 5       115.89640         42.18657       5.041634           126      D285
## 6       148.36555         43.57849       4.576640           291      D256
## 7       666.42455        147.44219      13.189233           145      D283
## 8       140.43424         43.60513       4.248564           128      D213
## 9        86.63968         39.26696       6.077829           114       D41
## 10      117.31209         31.70299       4.980824             1      D486
##    tag_id start_deployment end_deployment
## 1  H83101       2012-10-10     2013-06-02
## 2  S49621       2003-07-03     2004-01-17
## 3  A49007       2016-09-05     2017-01-09
## 4  V63425       2016-12-04     2017-02-19
## 5  B74989       2016-03-23     2016-11-08
## 6  O66678       2013-09-07     2013-11-10
## 7  G59298       2007-06-21     2007-11-14
## 8  F64333       2001-12-12     2002-02-05
## 9  X71699       2016-11-03     2017-05-10
## 10 N33529       2006-12-20     2007-07-04</code></pre>
<p>A full join keeps all records from both the left and the right table, matching
them whenever possible. That is, we get in output all the dragons, with blanks
in the morphometrics table for those that were only tracked and blanks in the
deployments table for those that were only measured. Unfortunately, SQLite does
not support full joins, so we cannot demonstrate it here, but it’s important to
know that a full join exists and what it does because you’ll find yourself using
it in any other database management program or even in R (see Chapter <a href="tidyverse.html#tidyverse">13</a>).</p>
</div>
<div id="nested-select-statements" class="section level3">
<h3><span class="header-section-number">6.2.12</span> Nested <code>SELECT</code> statements</h3>
<p>Now that we know how to use joins, we can go back to our challenge of calculating
the average wingspan for male versus female dragons. What we need to do is add
the sex column to the morphometrics table. We can do this by looking at the
dragon ID, which is the column the two tables have in common. So the join clause
will look like this:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb105-1"><a href="sql.html#cb105-1"></a><span class="kw">SELECT</span> morphometrics.dragon_id, wingspan_cm, sex</span>
<span id="cb105-2"><a href="sql.html#cb105-2"></a><span class="kw">FROM</span> morphometrics <span class="co">-- this is our left table</span></span>
<span id="cb105-3"><a href="sql.html#cb105-3"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> dragons <span class="co">-- this is our left table </span></span>
<span id="cb105-4"><a href="sql.html#cb105-4"></a><span class="kw">ON</span> morphometrics.dragon_id <span class="op">=</span> dragons.dragon_id <span class="co">-- this is the shared column</span></span>
<span id="cb105-5"><a href="sql.html#cb105-5"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id wingspan_cm  sex
## 1        D96   1389.5527    F
## 2       D400    634.9109 &lt;NA&gt;
## 3       D316   1052.3702    M
## 4       D317   1356.8084    F
## 5       D484   1720.8641    M
## 6       D149   1533.5991    M
## 7       D285    698.8157 &lt;NA&gt;
## 8       D256    652.0053 &lt;NA&gt;
## 9       D283   1387.1943    F
## 10      D213    670.5283 &lt;NA&gt;</code></pre>
<p>By using a left join, we are saying that we want to keep all rows from the left
table (morphometrics) while adding information on sex whenever available. Now we
can compute the average wingspan broken down by sex:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb107-1"><a href="sql.html#cb107-1"></a><span class="kw">SELECT</span> sex, <span class="fu">AVG</span>(wingspan_cm) <span class="kw">AS</span> mean_wingspan</span>
<span id="cb107-2"><a href="sql.html#cb107-2"></a><span class="kw">FROM</span> (</span>
<span id="cb107-3"><a href="sql.html#cb107-3"></a>    <span class="kw">SELECT</span> morphometrics.dragon_id, wingspan_cm, sex</span>
<span id="cb107-4"><a href="sql.html#cb107-4"></a>    <span class="kw">FROM</span> morphometrics </span>
<span id="cb107-5"><a href="sql.html#cb107-5"></a>    <span class="kw">LEFT</span> <span class="kw">JOIN</span> dragons </span>
<span id="cb107-6"><a href="sql.html#cb107-6"></a>    <span class="kw">ON</span> morphometrics.dragon_id <span class="op">=</span> dragons.dragon_id</span>
<span id="cb107-7"><a href="sql.html#cb107-7"></a>    )</span>
<span id="cb107-8"><a href="sql.html#cb107-8"></a><span class="kw">GROUP</span> <span class="kw">BY</span> sex; </span></code></pre></div>
<pre><code>##    sex mean_wingspan
## 1 &lt;NA&gt;      645.3158
## 2    F     1550.0009
## 3    M     1549.1300</code></pre>
<p>The one above is a nested query, which means there are two <code>SELECT</code> statements
nested within one another. The inner <code>SELECT</code> statement (everything between the
parentheses) is treated as if it were a table in the database. SQL will
execute the query from the inside out, so even though that table physically does
not exist, it gets temporarily created when the inner query is run and is then
used in input to the second query.</p>
</div>
<div id="order-of-operations" class="section level3">
<h3><span class="header-section-number">6.2.13</span> Order of operations</h3>
<p>The fact that SQL will execute nested queries from the inside out is one aspect
of order of operations. But there’s also a logic to the order in which SQL
executes clauses within a query: first, it gathers the data, then it filters it
and aggregates it as needed, then it computes results, and finally it sorts them
and truncate them if necessary. Let’s look at this step by step:</p>
<ol style="list-style-type: decimal">
<li>First, SQL executes the <code>FROM</code> clause and any
<code>JOIN</code> clauses, if present, to determine what tables are being queried.</li>
<li>Then, it will execute the <code>WHERE</code> clause to filter the data.</li>
<li>Then, it will <code>GROUP BY</code> the column/s of interest.</li>
<li>Then it will calculate any derived values based on aggregate functions.</li>
<li>Then, it will apply any filters specified by <code>HAVING</code>.</li>
<li>Now, and only now, it will execute the <code>SELECT</code> clause!</li>
<li>Once the computations are completed and the output of <code>SELECT</code> is ready,
SQL can start refining it. First, it will discard any duplicates if <code>DISTINCT</code>
is specified.</li>
<li>Then, it will sort the results based on <code>ORDER BY</code>.</li>
<li>Finally, it will truncate the output if a <code>LIMIT</code> is specified.</li>
</ol>
<p>If you think about it, all of this makes logical sense. You can’t select a
column if you’re not sure what table to look in. You can’t compute a per-group
count before defining the groups. You can’t order results that you haven’t
computed yet. But then why do we start our queries with <code>SELECT</code>? And does the
order in which we write our queries matter?</p>
<p>The answer to both of those questions is that there is a difference between the
<em>logical</em> order of operations and the <em>lexical</em> (or syntactical) order of
operations, which is how we actually write queries. Even though these don’t
correspond, writing a query in any other order than the following is incorrect
(and will return an error):</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb109-1"><a href="sql.html#cb109-1"></a><span class="kw">SELECT</span> </span>
<span id="cb109-2"><a href="sql.html#cb109-2"></a><span class="kw">FROM</span> </span>
<span id="cb109-3"><a href="sql.html#cb109-3"></a>    <span class="kw">JOIN</span> </span>
<span id="cb109-4"><a href="sql.html#cb109-4"></a>      <span class="kw">ON</span> </span>
<span id="cb109-5"><a href="sql.html#cb109-5"></a>    <span class="kw">WHERE</span> </span>
<span id="cb109-6"><a href="sql.html#cb109-6"></a>    <span class="kw">GROUP</span> <span class="kw">BY</span> </span>
<span id="cb109-7"><a href="sql.html#cb109-7"></a>    <span class="kw">HAVING</span> </span>
<span id="cb109-8"><a href="sql.html#cb109-8"></a>    <span class="kw">ORDER</span> <span class="kw">BY</span> </span>
<span id="cb109-9"><a href="sql.html#cb109-9"></a>    <span class="kw">LIMIT</span>;</span></code></pre></div>
</div>
</div>
<div id="building-a-database" class="section level2">
<h2><span class="header-section-number">6.3</span> Building a database</h2>
<div id="creating-a-new-database-in-sqlite-studio" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Creating a new database in SQLite Studio</h3>
<p>We are now going to see how to build a database by recreating the dragons
database we have been practicing on. Let’s open up SQLite Studio and, on the
<em>Database</em> tab, click “Add a database” (or use Ctrl/Cmd + O as a shortcut).
Click on the green plus sign, navigate to the folder where you want to save the
database, and choose a file name. Click “Save”. Now we need to also choose a
name to use internally (this name will appear in the drop-down list of databases
within SQLite, but it does not necessarily need to be the same as the filename.)
Click “OK” and you should see your new database in the list on the left.</p>
</div>
<div id="creating-tables" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Creating tables</h3>
<p>Now let’s open the SQL editor (<em>Tools</em> &gt; <em>SQL editor</em>). Double check that you
are working on the correct database (the name of the active database is shown
in the toolbar). We are ready to create our first table!</p>
<p>To create a table, we need to specify a name for the table, as well as a name
and a data type for each column. The basic format is as follows:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb110-1"><a href="sql.html#cb110-1"></a></span>
<span id="cb110-2"><a href="sql.html#cb110-2"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> table_name (</span>
<span id="cb110-3"><a href="sql.html#cb110-3"></a>column_1 data_type,</span>
<span id="cb110-4"><a href="sql.html#cb110-4"></a>column_2 data_type,</span>
<span id="cb110-5"><a href="sql.html#cb110-5"></a>column_3 data_type,</span>
<span id="cb110-6"><a href="sql.html#cb110-6"></a><span class="op">..</span>.</span>
<span id="cb110-7"><a href="sql.html#cb110-7"></a>)</span></code></pre></div>
<p>Let’s start by creating the dragons table. Remember that each table needs to
have a primary key, i.e., a column that serves as the unique identifier of each
row. The values in this column need to be unique and cannot be null. In this
table, we can use the dragon ID as the primary key:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb111-1"><a href="sql.html#cb111-1"></a></span>
<span id="cb111-2"><a href="sql.html#cb111-2"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dragons (</span>
<span id="cb111-3"><a href="sql.html#cb111-3"></a>dragon_id <span class="dt">varchar</span>(<span class="dv">5</span>),</span>
<span id="cb111-4"><a href="sql.html#cb111-4"></a>sex <span class="dt">char</span>(<span class="dv">1</span>),</span>
<span id="cb111-5"><a href="sql.html#cb111-5"></a>age_class <span class="dt">varchar</span>(<span class="dv">8</span>),</span>
<span id="cb111-6"><a href="sql.html#cb111-6"></a>species <span class="dt">varchar</span>(<span class="dv">50</span>),</span>
<span id="cb111-7"><a href="sql.html#cb111-7"></a><span class="kw">PRIMARY</span> <span class="kw">KEY</span> (dragon_id)</span>
<span id="cb111-8"><a href="sql.html#cb111-8"></a>);</span></code></pre></div>
<p>Notice that I specified a number of digits for each character variable. Because
the format of the dragon ID is “D” + number from 1 up to 500 (for now), setting
the ID as a character string with varying size up to 5 digits allows for IDs
from “D1” to “D9999”. So far, we only have 500 individuals, so strictly it would
have been enough to set the limit to 4 digits only, but it’s good to have some
forethought and allow for growth into the future. At the same time, it seems
reasonable to assume we won’t catch 10 thousand dragons in this project, so 5
digits is a good compromise. In reality, space is rarely limiting to the
point where 4 or 10 digits makes a difference, so when in doubt err on the side
of more room for growth.</p>
<p>While dragon ID, age class, and species have a variable number of digits, sex
always has one (it can be “M” or “F”). So we can make this a <code>char</code> instead of
a <code>varchar</code> and specify it will have 1 digit.</p>
</div>
<div id="adding-constraints" class="section level3">
<h3><span class="header-section-number">6.3.3</span> Adding constraints</h3>
<p>We can also add some constraints for the purpose of quality assurance. For
example, because the dragon ID is the primary key, we can’t accept null values
in this column. Sex is always one of “M” or “F” and age is always one of
“Juvenile”, “Subadult”, or “Adult”. In other SQL dialects you can add these
after the fact, but in SQLite the only way to add these constraints is at the
same time as you create the table. We can delete the table and re-create it by
modifying the above syntax as follows:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb112-1"><a href="sql.html#cb112-1"></a></span>
<span id="cb112-2"><a href="sql.html#cb112-2"></a><span class="kw">DROP</span> <span class="kw">TABLE</span> dragons;</span>
<span id="cb112-3"><a href="sql.html#cb112-3"></a></span>
<span id="cb112-4"><a href="sql.html#cb112-4"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> dragons (</span>
<span id="cb112-5"><a href="sql.html#cb112-5"></a>dragon_id <span class="dt">varchar</span>(<span class="dv">5</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb112-6"><a href="sql.html#cb112-6"></a>sex <span class="dt">char</span>(<span class="dv">1</span>) <span class="kw">CHECK</span> (sex <span class="kw">IN</span> (<span class="st">&#39;M&#39;</span>, <span class="st">&#39;F&#39;</span>)),</span>
<span id="cb112-7"><a href="sql.html#cb112-7"></a>age_class <span class="dt">varchar</span>(<span class="dv">8</span>) <span class="kw">CHECK</span> (age_class <span class="kw">IN</span> (<span class="st">&#39;Juvenile&#39;</span>, <span class="st">&#39;Subadult&#39;</span>, <span class="st">&#39;Adult&#39;</span>)),</span>
<span id="cb112-8"><a href="sql.html#cb112-8"></a>species <span class="dt">varchar</span>(<span class="dv">50</span>),</span>
<span id="cb112-9"><a href="sql.html#cb112-9"></a><span class="kw">PRIMARY</span> <span class="kw">KEY</span> (dragon_id)</span>
<span id="cb112-10"><a href="sql.html#cb112-10"></a>);</span></code></pre></div>
</div>
<div id="order-of-table-creation" class="section level3">
<h3><span class="header-section-number">6.3.4</span> Order of table creation</h3>
<p>Foreign keys are also specified as constraints. Because it’s not possible to
enforce constraints as an afterthought, we need to plan the order in which we
add tables carefully. If we try to add a foreign key that refers to a table that
doesn’t exist yet, we won’t be able to. Let’s take another look at the diagram
of our table relationships:</p>
<div class="figure" style="text-align: center"><span id="fig:db-diagram2"></span>
<img src="img/database_diagram.png" alt="Diagram of the dragons database" width="80%" />
<p class="caption">
Figure 6.2: Diagram of the dragons database
</p>
</div>
<p>Any table that has one or more foreign keys needs to be added <em>after</em> the
related table/s. In our case, there are three “root” tables that do not have
any foreign keys: the dragons table, the tags table, and the capture sites
table. We can add these three first and then all the others.</p>
<p>The tags table has a <code>tag_id</code> field which is unique and can therefore be used as
a primary key. Note that when you make a column the primary key you automatically
enforce a unique constraint on that column. However, SQLite does not enforce a
not-null constraint on primary keys like most other SQL dialects. Because SQLite
doesn’t, we have to do it ourselves:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb113-1"><a href="sql.html#cb113-1"></a></span>
<span id="cb113-2"><a href="sql.html#cb113-2"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> tags (</span>
<span id="cb113-3"><a href="sql.html#cb113-3"></a>tag_id <span class="dt">char</span>(<span class="dv">6</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb113-4"><a href="sql.html#cb113-4"></a>brand <span class="dt">varchar</span>(<span class="dv">50</span>),</span>
<span id="cb113-5"><a href="sql.html#cb113-5"></a>status <span class="dt">varchar</span>(<span class="dv">20</span>)</span>
<span id="cb113-6"><a href="sql.html#cb113-6"></a>);</span></code></pre></div>
<p>The capture sites table has a <code>site</code> field which contains a 3-letter code that
uniquely identifies the site. We can use that as a primary key. The UTM
coordinates are numeric values for which we can use the data type called “double
precision”, or just “double”. There are several possible choices for numeric
data types. “Double precision” and “float” are both suitable data types for
storing real numbers, but double precision stores numeric values
with higher precision than float. Both of these allow for variable decimal
places, whereas the data type “decimal” enforces the same number of decimal
places across records. The choice between these data types depends on 1. whether
we want the measurements to all have the same number of decimal places or not,
and 2. how many significant digits do we expect/care about. Double precision can
store up to 15 significant digits (unlike float which can store up to 8), but it
also occupies double the space (64 bit instead of 32.) For UTM coordinates, the
Y value has a minimum of 7 digits, and we want to keep decimal places because
we need the highest precision possible on the position of animals in space.
Therefore, we’ll go with double precision:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb114-1"><a href="sql.html#cb114-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> capture_sites (</span>
<span id="cb114-2"><a href="sql.html#cb114-2"></a>site <span class="dt">char</span>(<span class="dv">3</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb114-3"><a href="sql.html#cb114-3"></a>utm_x <span class="dt">double</span>,</span>
<span id="cb114-4"><a href="sql.html#cb114-4"></a>utm_y <span class="dt">double</span></span>
<span id="cb114-5"><a href="sql.html#cb114-5"></a>);</span></code></pre></div>
<p>Note that I used an alternative syntax to specify the primary key.
This is equivalent to the one I used above for the dragons table.</p>
</div>
<div id="populating-the-tables" class="section level3">
<h3><span class="header-section-number">6.3.5</span> Populating the tables</h3>
<p>Now that we added a few tables, we can start to populate the database by loading
the data as .csv files. On the <em>Tools</em> tab, click “Import.”</p>
<div class="figure" style="text-align: center">
<img src="img/sqlite_import1.png" alt=" " width="80%" />
<p class="caption">
</p>
</div>
<p>Check that the database is correct and then select the table you want to import
data into. For example, let’s start with the dragons table:</p>
<div class="figure" style="text-align: center">
<img src="img/sqlite_import2.png" alt=" " width="80%" />
<p class="caption">
</p>
</div>
<p>Click <em>Next</em>. Now, browse your directory to select the input file. Then check
the box that says “First line represents CSV column names”, make sure the field
separator is a comma, and set the <em>NULL</em> values to <code>NA</code> (which is how they are
encoded in the .csv.) Click <em>Finish</em>.</p>
<p>To check if the table was imported correctly, go back into the query editor and
try to look at the first 10 rows:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb115-1"><a href="sql.html#cb115-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> dragons <span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<pre><code>##    dragon_id  sex age_class             species
## 1         D1    F  Subadult     Hebridean Black
## 2         D2 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 3         D3    F     Adult     Hebridean Black
## 4         D4    F     Adult Peruvian Vipertooth
## 5         D5 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 6         D6    F     Adult Norwegian Ridgeback
## 7         D7    M     Adult     Hebridean Black
## 8         D8 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 9         D9    F     Adult Norwegian Ridgeback
## 10       D10    F     Adult  Common Welsh Green</code></pre>
<p>If everything looks good, we can go ahead and import data in the other two
tables.</p>
</div>
<div id="autoincrements-as-primary-keys" class="section level3">
<h3><span class="header-section-number">6.3.6</span> Autoincrements as primary keys</h3>
<p>Sometimes a table does not contain any columns with unique values. This is the
case for all the tables we have left to add. What do we use as primary key in
these situations? Adding a column with a serial number that gets automatically
updated is a good option. SQLite has something called auto-increment, which is
an integer column that automatically increases by 1 each time you add a row to
a table. Because it’s incremental, the values of an auto-increment will always
be unique, and because it’s automatic, they will never be null. Sounds like a
perfect candidate for a primary key.</p>
<p>The problem with using an auto-increment as a primary key arises when you’re
trying to import data from a .csv file. If the column with the auto-increment
does not already exist in the .csv, SQLite won’t let you import the file into
the table because the number of columns does not match. We don’t want to add the
auto-increment into the .csv ourselves because that defeats the purpose of
having SQLite doing it for us. But if we import the .csv as it is (without
primary key) and then add the auto-increment column later, we won’t be able to
make it the primary key because SQLite won’t let us. So, what do we do?</p>
<p>One workaround that people have found to solve this issue is to trick SQLite by
using a temporary table. This is how the process works:</p>
<ol style="list-style-type: decimal">
<li>Create the table the way we want it, with an auto-increment primary key plus
all the columns we want to import from the .csv;</li>
<li>Create a temporary table without primary key that only contains the columns
from the .csv;</li>
<li>Import the .csv into the temporary table;</li>
<li>Populate the final table by pulling data from the temporary table;</li>
<li>Delete the temporary table.</li>
</ol>
<p>A little convoluted, but it does the job. Let’s demonstrate this on the captures
table. First, we create the table like we want it to look in the end (note that
I am adding foreign keys; we’ll go over that part in the next section):</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb117-1"><a href="sql.html#cb117-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> captures (</span>
<span id="cb117-2"><a href="sql.html#cb117-2"></a>capture_id <span class="dt">INTEGER</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> AUTOINCREMENT,</span>
<span id="cb117-3"><a href="sql.html#cb117-3"></a>dragon_id <span class="dt">varchar</span>(<span class="dv">5</span>),</span>
<span id="cb117-4"><a href="sql.html#cb117-4"></a><span class="dt">date</span> text,</span>
<span id="cb117-5"><a href="sql.html#cb117-5"></a>site <span class="dt">char</span>(<span class="dv">3</span>),</span>
<span id="cb117-6"><a href="sql.html#cb117-6"></a><span class="kw">FOREIGN</span> <span class="kw">KEY</span>(dragon_id) <span class="kw">REFERENCES</span> dragons(dragon_id)</span>
<span id="cb117-7"><a href="sql.html#cb117-7"></a><span class="kw">FOREIGN</span> <span class="kw">KEY</span>(site) <span class="kw">REFERENCES</span> capture_sites(site)</span>
<span id="cb117-8"><a href="sql.html#cb117-8"></a>);</span></code></pre></div>
<p>Second, we create a temporary table without the primary key (no need to add
foreign keys to this one as we are going to delete it anyway):</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb118-1"><a href="sql.html#cb118-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> captures_temp (</span>
<span id="cb118-2"><a href="sql.html#cb118-2"></a>dragon_id <span class="dt">varchar</span>(<span class="dv">5</span>),</span>
<span id="cb118-3"><a href="sql.html#cb118-3"></a><span class="dt">date</span> text,</span>
<span id="cb118-4"><a href="sql.html#cb118-4"></a>site <span class="dt">char</span>(<span class="dv">3</span>));</span></code></pre></div>
<p>Now on <em>Tools</em> &gt; <em>Import</em>, we upload <code>captures.csv</code> into <code>captures_temp</code>. Then
we can populate the final table as follows:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb119-1"><a href="sql.html#cb119-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> captures(dragon_id, <span class="dt">date</span>, site) <span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> captures_temp;</span></code></pre></div>
<p>And finally we delete our temporary table:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb120-1"><a href="sql.html#cb120-1"></a><span class="kw">DROP</span> <span class="kw">TABLE</span> captures_temp;</span></code></pre></div>
<p>We better get familiar with this workflow because we are going to use it for all
the other tables now.</p>
</div>
<div id="foreign-keys" class="section level3">
<h3><span class="header-section-number">6.3.7</span> Foreign keys</h3>
<p>For each of the remaining tables, we will specify one or more foreign keys to
enforce the relationships between tables. Each foreign key is the primary key of
another table. See for example what we did above: the captures table we just
imported contains information on when and where each dragon was captured. This
means this table needs to have two foreign keys: the <code>dragon_id</code> column links it
to the dragons table and the <code>site</code> column links it to the capture sites table.
Now let’s apply the concept to the other tables.</p>
<p>The morphometrics table will have a single foreign key linking it to the dragons
table (the dragon ID). The second column is a date – SQLite does not have a
dedicated data type for dates. Instead, we stored this as a character string in
ISO8601 format (“YYYY-MM-DD HH:MM:SS.SSS”). This time there is no need for
double precision because we want to only retain up to the third decimal place
and the numbers are not larger than ~3000, so 8 significant digits is sufficient.
We’ll use float as the data type for the measurements. Because individuals may
have been measured multiple times, none of the existing columns are unique. This
means we’ll create a serial number to use as the primary key. We’ll use the same
trick as above:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb121-1"><a href="sql.html#cb121-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> morphometrics (</span>
<span id="cb121-2"><a href="sql.html#cb121-2"></a>measurement_id <span class="dt">INTEGER</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> AUTOINCREMENT,</span>
<span id="cb121-3"><a href="sql.html#cb121-3"></a>dragon_id <span class="dt">varchar</span>(<span class="dv">5</span>),</span>
<span id="cb121-4"><a href="sql.html#cb121-4"></a><span class="dt">date</span> text,</span>
<span id="cb121-5"><a href="sql.html#cb121-5"></a>total_body_length_cm <span class="dt">float</span>,</span>
<span id="cb121-6"><a href="sql.html#cb121-6"></a>wingspan_cm <span class="dt">float</span>,</span>
<span id="cb121-7"><a href="sql.html#cb121-7"></a>tail_length_cm <span class="dt">float</span>,</span>
<span id="cb121-8"><a href="sql.html#cb121-8"></a>tarsus_length_cm <span class="dt">float</span>,</span>
<span id="cb121-9"><a href="sql.html#cb121-9"></a>claw_length_cm <span class="dt">float</span>,</span>
<span id="cb121-10"><a href="sql.html#cb121-10"></a><span class="kw">FOREIGN</span> <span class="kw">KEY</span> (dragon_id) <span class="kw">REFERENCES</span> dragons(dragon_id)</span>
<span id="cb121-11"><a href="sql.html#cb121-11"></a>);</span>
<span id="cb121-12"><a href="sql.html#cb121-12"></a></span>
<span id="cb121-13"><a href="sql.html#cb121-13"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> morphometrics_temp (</span>
<span id="cb121-14"><a href="sql.html#cb121-14"></a>dragon_id <span class="dt">varchar</span>(<span class="dv">5</span>),</span>
<span id="cb121-15"><a href="sql.html#cb121-15"></a><span class="dt">date</span> text,</span>
<span id="cb121-16"><a href="sql.html#cb121-16"></a>total_body_length_cm <span class="dt">float</span>,</span>
<span id="cb121-17"><a href="sql.html#cb121-17"></a>wingspan_cm <span class="dt">float</span>,</span>
<span id="cb121-18"><a href="sql.html#cb121-18"></a>tail_length_cm <span class="dt">float</span>,</span>
<span id="cb121-19"><a href="sql.html#cb121-19"></a>tarsus_length_cm <span class="dt">float</span>,</span>
<span id="cb121-20"><a href="sql.html#cb121-20"></a>claw_length_cm <span class="dt">float</span></span>
<span id="cb121-21"><a href="sql.html#cb121-21"></a>);</span></code></pre></div>
<p>Now on <em>Tools</em> &gt; <em>Import</em>, we upload <code>morphometrics.csv</code> into
<code>morphometrics_temp</code>. Then we populate the final table:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb122-1"><a href="sql.html#cb122-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> morphometrics(dragon_id, <span class="dt">date</span>, total_body_length_cm, wingspan_cm,</span>
<span id="cb122-2"><a href="sql.html#cb122-2"></a>tail_length_cm, tarsus_length_cm, claw_length_cm) </span>
<span id="cb122-3"><a href="sql.html#cb122-3"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> morphometrics_temp;</span></code></pre></div>
<p>And delete our temporary table:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb123-1"><a href="sql.html#cb123-1"></a><span class="kw">DROP</span> <span class="kw">TABLE</span> morphometrics_temp;</span></code></pre></div>
<p>The diet table contains repeated sample IDs and repeated item IDs within each
sample. We’ll need a serial number here too because none of the columns are
unique. The item ID is an integer so we are going to use a new numeric data type
for it. The foreign key will be, again, the dragon ID referring to the dragons
table:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb124-1"><a href="sql.html#cb124-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> diet (</span>
<span id="cb124-2"><a href="sql.html#cb124-2"></a>diet_id <span class="dt">INTEGER</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> AUTOINCREMENT,</span>
<span id="cb124-3"><a href="sql.html#cb124-3"></a>dragon_id <span class="dt">varchar</span>(<span class="dv">5</span>),</span>
<span id="cb124-4"><a href="sql.html#cb124-4"></a>sample_id <span class="dt">varchar</span>(<span class="dv">8</span>),</span>
<span id="cb124-5"><a href="sql.html#cb124-5"></a><span class="dt">date</span> text,</span>
<span id="cb124-6"><a href="sql.html#cb124-6"></a>item_id <span class="dt">integer</span>,</span>
<span id="cb124-7"><a href="sql.html#cb124-7"></a>item <span class="dt">varchar</span>(<span class="dv">50</span>),</span>
<span id="cb124-8"><a href="sql.html#cb124-8"></a><span class="kw">FOREIGN</span> <span class="kw">KEY</span> (dragon_id) <span class="kw">REFERENCES</span> dragons(dragon_id)</span>
<span id="cb124-9"><a href="sql.html#cb124-9"></a>);</span>
<span id="cb124-10"><a href="sql.html#cb124-10"></a></span>
<span id="cb124-11"><a href="sql.html#cb124-11"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> diet_temp (</span>
<span id="cb124-12"><a href="sql.html#cb124-12"></a>dragon_id <span class="dt">varchar</span>(<span class="dv">5</span>),</span>
<span id="cb124-13"><a href="sql.html#cb124-13"></a>sample_id <span class="dt">varchar</span>(<span class="dv">8</span>),</span>
<span id="cb124-14"><a href="sql.html#cb124-14"></a><span class="dt">date</span> text,</span>
<span id="cb124-15"><a href="sql.html#cb124-15"></a>item_id <span class="dt">integer</span>,</span>
<span id="cb124-16"><a href="sql.html#cb124-16"></a>item <span class="dt">varchar</span>(<span class="dv">50</span>)</span>
<span id="cb124-17"><a href="sql.html#cb124-17"></a>);</span></code></pre></div>
<p>Upload <code>diet.csv</code> into <code>diet_temp</code>.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb125-1"><a href="sql.html#cb125-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> diet(dragon_id, sample_id, <span class="dt">date</span>, item_id, item) </span>
<span id="cb125-2"><a href="sql.html#cb125-2"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> diet_temp;</span>
<span id="cb125-3"><a href="sql.html#cb125-3"></a></span>
<span id="cb125-4"><a href="sql.html#cb125-4"></a><span class="kw">DROP</span> <span class="kw">TABLE</span> diet_temp;</span></code></pre></div>
<p>The deployments table assigns a tag to each individual within a certain period
of time. The <code>dragon_id</code> column will be the foreign key that links it to the
dragons table, and the <code>tag_id</code> column will link it to the tags table. The start
and end deployment dates will be stored as ISO8601 text. Again, we’ll need a
serial number to use as a primary key:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb126-1"><a href="sql.html#cb126-1"></a></span>
<span id="cb126-2"><a href="sql.html#cb126-2"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> deployments (</span>
<span id="cb126-3"><a href="sql.html#cb126-3"></a>deployment_id <span class="dt">INTEGER</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> AUTOINCREMENT,</span>
<span id="cb126-4"><a href="sql.html#cb126-4"></a>dragon_id <span class="dt">varchar</span>(<span class="dv">5</span>),</span>
<span id="cb126-5"><a href="sql.html#cb126-5"></a>tag_id <span class="dt">char</span>(<span class="dv">6</span>),</span>
<span id="cb126-6"><a href="sql.html#cb126-6"></a>start_deployment text,</span>
<span id="cb126-7"><a href="sql.html#cb126-7"></a>end_deployment text,</span>
<span id="cb126-8"><a href="sql.html#cb126-8"></a><span class="kw">FOREIGN</span> <span class="kw">KEY</span>(dragon_id) <span class="kw">REFERENCES</span> dragons(dragon_id)</span>
<span id="cb126-9"><a href="sql.html#cb126-9"></a><span class="kw">FOREIGN</span> <span class="kw">KEY</span>(tag_id) <span class="kw">REFERENCES</span> tags(tag_id)</span>
<span id="cb126-10"><a href="sql.html#cb126-10"></a>);</span>
<span id="cb126-11"><a href="sql.html#cb126-11"></a></span>
<span id="cb126-12"><a href="sql.html#cb126-12"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> deployments_temp (</span>
<span id="cb126-13"><a href="sql.html#cb126-13"></a>dragon_id <span class="dt">varchar</span>(<span class="dv">5</span>),</span>
<span id="cb126-14"><a href="sql.html#cb126-14"></a>tag_id <span class="dt">char</span>(<span class="dv">6</span>),</span>
<span id="cb126-15"><a href="sql.html#cb126-15"></a>start_deployment text,</span>
<span id="cb126-16"><a href="sql.html#cb126-16"></a>end_deployment text</span>
<span id="cb126-17"><a href="sql.html#cb126-17"></a>);</span></code></pre></div>
<p>Upload <code>deployments.csv</code> into <code>deployments_temp</code>.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb127-1"><a href="sql.html#cb127-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> deployments(dragon_id, tag_id, start_deployment, end_deployment) </span>
<span id="cb127-2"><a href="sql.html#cb127-2"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> deployments_temp;</span>
<span id="cb127-3"><a href="sql.html#cb127-3"></a></span>
<span id="cb127-4"><a href="sql.html#cb127-4"></a><span class="kw">DROP</span> <span class="kw">TABLE</span> deployments_temp;</span></code></pre></div>
<p>Now we can input the telemetry data. This table contains the raw tracking data
as we download it from the tags. We’ll need a serial number to uniquely identify
each record, and we’ll add the tag ID as the foreign key to the tags table:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb128-1"><a href="sql.html#cb128-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> gps_data_raw (</span>
<span id="cb128-2"><a href="sql.html#cb128-2"></a>gps_id <span class="dt">INTEGER</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> AUTOINCREMENT,</span>
<span id="cb128-3"><a href="sql.html#cb128-3"></a>tag_id <span class="dt">char</span>(<span class="dv">6</span>),</span>
<span id="cb128-4"><a href="sql.html#cb128-4"></a><span class="dt">timestamp</span> text, </span>
<span id="cb128-5"><a href="sql.html#cb128-5"></a>utm_x <span class="dt">double</span>,</span>
<span id="cb128-6"><a href="sql.html#cb128-6"></a>utm_y <span class="dt">double</span>,</span>
<span id="cb128-7"><a href="sql.html#cb128-7"></a><span class="kw">FOREIGN</span> <span class="kw">KEY</span>(tag_id) <span class="kw">REFERENCES</span> tags(tag_id)</span>
<span id="cb128-8"><a href="sql.html#cb128-8"></a>);</span>
<span id="cb128-9"><a href="sql.html#cb128-9"></a></span>
<span id="cb128-10"><a href="sql.html#cb128-10"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> gps_data_raw_temp (</span>
<span id="cb128-11"><a href="sql.html#cb128-11"></a>tag_id <span class="dt">char</span>(<span class="dv">6</span>),</span>
<span id="cb128-12"><a href="sql.html#cb128-12"></a><span class="dt">timestamp</span> text, </span>
<span id="cb128-13"><a href="sql.html#cb128-13"></a>utm_x <span class="dt">double</span>,</span>
<span id="cb128-14"><a href="sql.html#cb128-14"></a>utm_y <span class="dt">double</span></span>
<span id="cb128-15"><a href="sql.html#cb128-15"></a>);</span></code></pre></div>
<p>Upload <code>telemetry_raw.csv</code> into <code>gps_data_raw_temp</code>.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb129-1"><a href="sql.html#cb129-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> gps_data_raw(tag_id, <span class="dt">timestamp</span>, utm_x, utm_y) </span>
<span id="cb129-2"><a href="sql.html#cb129-2"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> gps_data_raw_temp;</span>
<span id="cb129-3"><a href="sql.html#cb129-3"></a></span>
<span id="cb129-4"><a href="sql.html#cb129-4"></a><span class="kw">DROP</span> <span class="kw">TABLE</span> gps_data_raw_temp;</span></code></pre></div>
</div>
<div id="crossing-existing-information-to-derive-new-tables" class="section level3">
<h3><span class="header-section-number">6.3.8</span> Crossing existing information to derive new tables</h3>
<p>The raw GPS data table does not give us any information about which animal each
location corresponds to; all we know is the tag ID. Each tag does not correspond
to an individual, because some tags are reused on multiple dragons. So how do
we make these data usable? How do we know who is who? To associate each location
to the correct animal, we need to know who was wearing the tag at the time that
location was taken. There is a very elegant solution to our problem, as we can
pull the range of dates an individual was wearing a certain tag from the
deployments table, cross those dates with the dates in the raw GPS data, and
create an updated telemetry table where each location is assigned to the correct
individual. No manual work involved. Are you ready for some magic?! First, we
create the table structure:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb130-1"><a href="sql.html#cb130-1"></a></span>
<span id="cb130-2"><a href="sql.html#cb130-2"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> gps_data (</span>
<span id="cb130-3"><a href="sql.html#cb130-3"></a>loc_id <span class="dt">INTEGER</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb130-4"><a href="sql.html#cb130-4"></a>tag_id <span class="dt">char</span>(<span class="dv">6</span>),</span>
<span id="cb130-5"><a href="sql.html#cb130-5"></a>dragon_id <span class="dt">varchar</span>(<span class="dv">5</span>),</span>
<span id="cb130-6"><a href="sql.html#cb130-6"></a><span class="dt">timestamp</span> text,</span>
<span id="cb130-7"><a href="sql.html#cb130-7"></a>utm_x <span class="dt">double</span>,</span>
<span id="cb130-8"><a href="sql.html#cb130-8"></a>utm_y <span class="dt">double</span>,</span>
<span id="cb130-9"><a href="sql.html#cb130-9"></a><span class="kw">FOREIGN</span> <span class="kw">KEY</span> (tag_id) <span class="kw">REFERENCES</span> tags(tag_id)</span>
<span id="cb130-10"><a href="sql.html#cb130-10"></a><span class="kw">FOREIGN</span> <span class="kw">KEY</span> (dragon_id) <span class="kw">REFERENCES</span> dragons(dragon_id)</span>
<span id="cb130-11"><a href="sql.html#cb130-11"></a>);</span></code></pre></div>
<p>And then we populate it by pulling information from the raw GPS and deployment
tables. Locations are assigned to the individual that was wearing the tag at the
time based on the <code>WHERE</code> clause:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb131-1"><a href="sql.html#cb131-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> gps_data (</span>
<span id="cb131-2"><a href="sql.html#cb131-2"></a>tag_id, dragon_id, <span class="dt">timestamp</span>, utm_x, utm_y)</span>
<span id="cb131-3"><a href="sql.html#cb131-3"></a><span class="kw">SELECT</span></span>
<span id="cb131-4"><a href="sql.html#cb131-4"></a>deployments.tag_id,</span>
<span id="cb131-5"><a href="sql.html#cb131-5"></a>deployments.dragon_id,</span>
<span id="cb131-6"><a href="sql.html#cb131-6"></a>gps_data_raw.<span class="dt">timestamp</span>,</span>
<span id="cb131-7"><a href="sql.html#cb131-7"></a>gps_data_raw.utm_x,</span>
<span id="cb131-8"><a href="sql.html#cb131-8"></a>gps_data_raw.utm_y</span>
<span id="cb131-9"><a href="sql.html#cb131-9"></a><span class="kw">FROM</span> deployments <span class="kw">LEFT</span> <span class="kw">JOIN</span> gps_data_raw <span class="kw">USING</span> (tag_id)</span>
<span id="cb131-10"><a href="sql.html#cb131-10"></a><span class="kw">WHERE</span> gps_data_raw.tag_id <span class="op">=</span> deployments.tag_id <span class="kw">AND</span></span>
<span id="cb131-11"><a href="sql.html#cb131-11"></a>(</span>
<span id="cb131-12"><a href="sql.html#cb131-12"></a>    (</span>
<span id="cb131-13"><a href="sql.html#cb131-13"></a>    (strftime(gps_data_raw.<span class="dt">timestamp</span>) <span class="op">&gt;=</span> strftime(deployments.start_deployment)) <span class="kw">AND</span></span>
<span id="cb131-14"><a href="sql.html#cb131-14"></a>    (strftime(gps_data_raw.<span class="dt">timestamp</span>) <span class="op">&lt;=</span> strftime(deployments.end_deployment))</span>
<span id="cb131-15"><a href="sql.html#cb131-15"></a>    )</span>
<span id="cb131-16"><a href="sql.html#cb131-16"></a><span class="kw">OR</span> </span>
<span id="cb131-17"><a href="sql.html#cb131-17"></a>    (</span>
<span id="cb131-18"><a href="sql.html#cb131-18"></a>    (gps_data_raw.<span class="dt">timestamp</span> <span class="op">&gt;=</span> deployments.start_deployment) <span class="kw">AND</span></span>
<span id="cb131-19"><a href="sql.html#cb131-19"></a>    (deployments.end_deployment <span class="kw">IS</span> <span class="kw">NULL</span>)</span>
<span id="cb131-20"><a href="sql.html#cb131-20"></a>    )</span>
<span id="cb131-21"><a href="sql.html#cb131-21"></a>);</span></code></pre></div>
<p>Note that, because we populated this table with data from other existing tables,
we ended up using <code>INSERT INTO</code> anyway and there was no need to use our trick
with a temporary table.</p>
<p>It should now be apparent that keeping the deployments table correctly filled
out with no gaps or errors is of vital importance for the integrity of the whole
telemetry database. Having the database set up this way means we never have to
manually assign locations to animals, which would for sure lead to errors, but
it also means that any analysis downstream hinges on keeping the deployments
table up-to-date with new captures, tag retrievals, and deaths. This is just one
example of how databases can save us time and ensure data integrity with minimal
routine effort, but only if the data is curated with care in the first place.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="relational-databases.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rsqlite.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["reproducible-science.pdf", "reproducible-science.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
