<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Interfacing Databases in R with RSQLite | Computational Tools for Reproducible Science</title>
  <meta name="description" content="WILD 6900: Computational Tools for Reproducible Science" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Interfacing Databases in R with RSQLite | Computational Tools for Reproducible Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="WILD 6900: Computational Tools for Reproducible Science" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Interfacing Databases in R with RSQLite | Computational Tools for Reproducible Science" />
  
  <meta name="twitter:description" content="WILD 6900: Computational Tools for Reproducible Science" />
  

<meta name="author" content="Simona Picardi" />


<meta name="date" content="2021-01-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sql.html"/>
<link rel="next" href="rmarkdown.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Course Material</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#software-requirements-and-installation-instructions"><i class="fa fa-check"></i><b>0.1</b> Software Requirements and Installation Instructions</a><ul>
<li class="chapter" data-level="0.1.1" data-path="index.html"><a href="index.html#git"><i class="fa fa-check"></i><b>0.1.1</b> Git</a></li>
<li class="chapter" data-level="0.1.2" data-path="index.html"><a href="index.html#spreadsheet-editor"><i class="fa fa-check"></i><b>0.1.2</b> Spreadsheet Editor</a></li>
<li class="chapter" data-level="0.1.3" data-path="index.html"><a href="index.html#sqlite"><i class="fa fa-check"></i><b>0.1.3</b> SQLite</a></li>
<li class="chapter" data-level="0.1.4" data-path="index.html"><a href="index.html#r"><i class="fa fa-check"></i><b>0.1.4</b> R</a></li>
<li class="chapter" data-level="0.1.5" data-path="index.html"><a href="index.html#rstudio"><i class="fa fa-check"></i><b>0.1.5</b> RStudio</a></li>
<li class="chapter" data-level="0.1.6" data-path="index.html"><a href="index.html#required-r-packages"><i class="fa fa-check"></i><b>0.1.6</b> Required R Packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="project-organization.html"><a href="project-organization.html"><i class="fa fa-check"></i><b>1</b> Project Organization</a><ul>
<li class="chapter" data-level="1.1" data-path="project-organization.html"><a href="project-organization.html#directory-structure"><i class="fa fa-check"></i><b>1.1</b> Directory structure</a><ul>
<li class="chapter" data-level="1.1.1" data-path="project-organization.html"><a href="project-organization.html#overlap"><i class="fa fa-check"></i><b>1.1.1</b> Overlap</a></li>
<li class="chapter" data-level="1.1.2" data-path="project-organization.html"><a href="project-organization.html#minimizing-duplication"><i class="fa fa-check"></i><b>1.1.2</b> Minimizing duplication</a></li>
<li class="chapter" data-level="1.1.3" data-path="project-organization.html"><a href="project-organization.html#self-containedness"><i class="fa fa-check"></i><b>1.1.3</b> Self-containedness</a></li>
<li class="chapter" data-level="1.1.4" data-path="project-organization.html"><a href="project-organization.html#tradeoffs"><i class="fa fa-check"></i><b>1.1.4</b> Tradeoffs</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="project-organization.html"><a href="project-organization.html#golden-rules"><i class="fa fa-check"></i><b>1.2</b> Golden rules</a></li>
<li class="chapter" data-level="1.3" data-path="project-organization.html"><a href="project-organization.html#be-flexible"><i class="fa fa-check"></i><b>1.3</b> Be flexible</a></li>
<li class="chapter" data-level="1.4" data-path="project-organization.html"><a href="project-organization.html#documentation"><i class="fa fa-check"></i><b>1.4</b> Documentation</a></li>
<li class="chapter" data-level="1.5" data-path="project-organization.html"><a href="project-organization.html#naming-files"><i class="fa fa-check"></i><b>1.5</b> Naming files</a><ul>
<li class="chapter" data-level="1.5.1" data-path="project-organization.html"><a href="project-organization.html#computer-readable-file-names"><i class="fa fa-check"></i><b>1.5.1</b> Computer-readable file names</a></li>
<li class="chapter" data-level="1.5.2" data-path="project-organization.html"><a href="project-organization.html#human-readable-file-names"><i class="fa fa-check"></i><b>1.5.2</b> Human-readable file names</a></li>
<li class="chapter" data-level="1.5.3" data-path="project-organization.html"><a href="project-organization.html#file-names-that-work-well-with-default-ordering"><i class="fa fa-check"></i><b>1.5.3</b> File names that work well with default ordering</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="project-organization.html"><a href="project-organization.html#rstudio-projects"><i class="fa fa-check"></i><b>1.6</b> RStudio Projects</a></li>
<li class="chapter" data-level="1.7" data-path="project-organization.html"><a href="project-organization.html#relative-and-absolute-paths"><i class="fa fa-check"></i><b>1.7</b> Relative and absolute paths</a><ul>
<li class="chapter" data-level="1.7.1" data-path="project-organization.html"><a href="project-organization.html#path-separators"><i class="fa fa-check"></i><b>1.7.1</b> Path separators</a></li>
<li class="chapter" data-level="1.7.2" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>1.7.2</b> References</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="version-control-git.html"><a href="version-control-git.html"><i class="fa fa-check"></i><b>2</b> Version Control with Git</a><ul>
<li class="chapter" data-level="2.1" data-path="version-control-git.html"><a href="version-control-git.html#command-line-basics"><i class="fa fa-check"></i><b>2.1</b> Command line basics</a></li>
<li class="chapter" data-level="2.2" data-path="version-control-git.html"><a href="version-control-git.html#configuring-git"><i class="fa fa-check"></i><b>2.2</b> Configuring Git</a></li>
<li class="chapter" data-level="2.3" data-path="version-control-git.html"><a href="version-control-git.html#getting-help"><i class="fa fa-check"></i><b>2.3</b> Getting help</a></li>
<li class="chapter" data-level="2.4" data-path="version-control-git.html"><a href="version-control-git.html#creating-a-repository"><i class="fa fa-check"></i><b>2.4</b> Creating a repository</a></li>
<li class="chapter" data-level="2.5" data-path="version-control-git.html"><a href="version-control-git.html#tracking-files"><i class="fa fa-check"></i><b>2.5</b> Tracking files</a></li>
<li class="chapter" data-level="2.6" data-path="version-control-git.html"><a href="version-control-git.html#ignoring-files"><i class="fa fa-check"></i><b>2.6</b> Ignoring files</a></li>
<li class="chapter" data-level="2.7" data-path="version-control-git.html"><a href="version-control-git.html#the-3-states"><i class="fa fa-check"></i><b>2.7</b> The 3 states</a></li>
<li class="chapter" data-level="2.8" data-path="version-control-git.html"><a href="version-control-git.html#un-staging-files"><i class="fa fa-check"></i><b>2.8</b> Un-staging files</a></li>
<li class="chapter" data-level="2.9" data-path="version-control-git.html"><a href="version-control-git.html#recovering-a-previous-version-of-a-file"><i class="fa fa-check"></i><b>2.9</b> Recovering a previous version of a file</a></li>
<li class="chapter" data-level="2.10" data-path="version-control-git.html"><a href="version-control-git.html#removing-git"><i class="fa fa-check"></i><b>2.10</b> Removing Git</a></li>
<li class="chapter" data-level="2.11" data-path="version-control-git.html"><a href="version-control-git.html#git-everyday"><i class="fa fa-check"></i><b>2.11</b> Git everyday</a></li>
<li class="chapter" data-level="2.12" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>2.12</b> References</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>3</b> Collaborative Science with GitHub</a><ul>
<li class="chapter" data-level="3.1" data-path="github.html"><a href="github.html#adding-a-remote-to-a-local-repository"><i class="fa fa-check"></i><b>3.1</b> Adding a remote to a local repository</a></li>
<li class="chapter" data-level="3.2" data-path="github.html"><a href="github.html#pushing-to-a-remote-repository"><i class="fa fa-check"></i><b>3.2</b> Pushing to a remote repository</a></li>
<li class="chapter" data-level="3.3" data-path="github.html"><a href="github.html#cloning-a-repository"><i class="fa fa-check"></i><b>3.3</b> Cloning a repository</a></li>
<li class="chapter" data-level="3.4" data-path="github.html"><a href="github.html#synchronizing-changes-among-collaborators"><i class="fa fa-check"></i><b>3.4</b> Synchronizing changes among collaborators</a></li>
<li class="chapter" data-level="3.5" data-path="github.html"><a href="github.html#resolving-conflicts"><i class="fa fa-check"></i><b>3.5</b> Resolving conflicts</a></li>
<li class="chapter" data-level="3.6" data-path="github.html"><a href="github.html#avoiding-conflicts"><i class="fa fa-check"></i><b>3.6</b> Avoiding conflicts</a></li>
<li class="chapter" data-level="3.7" data-path="github.html"><a href="github.html#working-with-branches"><i class="fa fa-check"></i><b>3.7</b> Working with branches</a></li>
<li class="chapter" data-level="3.8" data-path="github.html"><a href="github.html#forking-a-repository"><i class="fa fa-check"></i><b>3.8</b> Forking a repository</a></li>
<li class="chapter" data-level="3.9" data-path="github.html"><a href="github.html#pull-requests"><i class="fa fa-check"></i><b>3.9</b> Pull requests</a></li>
<li class="chapter" data-level="3.10" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>3.10</b> References</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="spreadsheets.html"><a href="spreadsheets.html"><i class="fa fa-check"></i><b>4</b> Best Practices in the Use of Spreadsheets</a><ul>
<li class="chapter" data-level="4.1" data-path="spreadsheets.html"><a href="spreadsheets.html#what-are-spreadsheets-good-for"><i class="fa fa-check"></i><b>4.1</b> What are spreadsheets good for?</a></li>
<li class="chapter" data-level="4.2" data-path="spreadsheets.html"><a href="spreadsheets.html#human-readable-vs.-computer-readable-data"><i class="fa fa-check"></i><b>4.2</b> Human-readable vs. computer-readable data</a></li>
<li class="chapter" data-level="4.3" data-path="spreadsheets.html"><a href="spreadsheets.html#tidydata"><i class="fa fa-check"></i><b>4.3</b> Tidy data</a></li>
<li class="chapter" data-level="4.4" data-path="spreadsheets.html"><a href="spreadsheets.html#problematic-practices"><i class="fa fa-check"></i><b>4.4</b> Problematic practices</a><ul>
<li class="chapter" data-level="4.4.1" data-path="spreadsheets.html"><a href="spreadsheets.html#multiple-variables-in-a-single-column"><i class="fa fa-check"></i><b>4.4.1</b> Multiple variables in a single column</a></li>
<li class="chapter" data-level="4.4.2" data-path="spreadsheets.html"><a href="spreadsheets.html#rows-for-variables-columns-for-observation"><i class="fa fa-check"></i><b>4.4.2</b> Rows for variables, columns for observation</a></li>
<li class="chapter" data-level="4.4.3" data-path="spreadsheets.html"><a href="spreadsheets.html#multiple-tables-in-a-single-spreadsheet"><i class="fa fa-check"></i><b>4.4.3</b> Multiple tables in a single spreadsheet</a></li>
<li class="chapter" data-level="4.4.4" data-path="spreadsheets.html"><a href="spreadsheets.html#multiple-sheets"><i class="fa fa-check"></i><b>4.4.4</b> Multiple sheets</a></li>
<li class="chapter" data-level="4.4.5" data-path="spreadsheets.html"><a href="spreadsheets.html#using-formatting-to-convey-information"><i class="fa fa-check"></i><b>4.4.5</b> Using formatting to convey information</a></li>
<li class="chapter" data-level="4.4.6" data-path="spreadsheets.html"><a href="spreadsheets.html#putting-units-in-cells"><i class="fa fa-check"></i><b>4.4.6</b> Putting units in cells</a></li>
<li class="chapter" data-level="4.4.7" data-path="spreadsheets.html"><a href="spreadsheets.html#using-problematic-column-names"><i class="fa fa-check"></i><b>4.4.7</b> Using problematic column names</a></li>
<li class="chapter" data-level="4.4.8" data-path="spreadsheets.html"><a href="spreadsheets.html#conflating-zeros-and-missing-values"><i class="fa fa-check"></i><b>4.4.8</b> Conflating zeros and missing values</a></li>
<li class="chapter" data-level="4.4.9" data-path="spreadsheets.html"><a href="spreadsheets.html#using-problematic-null-values"><i class="fa fa-check"></i><b>4.4.9</b> Using problematic null values</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="spreadsheets.html"><a href="spreadsheets.html#document-document-document"><i class="fa fa-check"></i><b>4.5</b> Document, document, document!</a></li>
<li class="chapter" data-level="4.6" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>4.6</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="relational-databases.html"><a href="relational-databases.html"><i class="fa fa-check"></i><b>5</b> Relational Databases</a><ul>
<li class="chapter" data-level="5.1" data-path="relational-databases.html"><a href="relational-databases.html#what-is-a-relational-database"><i class="fa fa-check"></i><b>5.1</b> What is a relational database?</a></li>
<li class="chapter" data-level="5.2" data-path="relational-databases.html"><a href="relational-databases.html#why-bothering-with-relational-databases"><i class="fa fa-check"></i><b>5.2</b> Why bothering with relational databases?</a></li>
<li class="chapter" data-level="5.3" data-path="relational-databases.html"><a href="relational-databases.html#database-components"><i class="fa fa-check"></i><b>5.3</b> Database components</a></li>
<li class="chapter" data-level="5.4" data-path="relational-databases.html"><a href="relational-databases.html#database-design-and-architecture"><i class="fa fa-check"></i><b>5.4</b> Database design and architecture</a></li>
<li class="chapter" data-level="5.5" data-path="relational-databases.html"><a href="relational-databases.html#data-types"><i class="fa fa-check"></i><b>5.5</b> Data types</a></li>
<li class="chapter" data-level="5.6" data-path="relational-databases.html"><a href="relational-databases.html#a-first-look-at-our-practice-database"><i class="fa fa-check"></i><b>5.6</b> A first look at our practice database</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sql.html"><a href="sql.html"><i class="fa fa-check"></i><b>6</b> Basics of SQL Language</a><ul>
<li class="chapter" data-level="6.1" data-path="sql.html"><a href="sql.html#the-sql-language"><i class="fa fa-check"></i><b>6.1</b> The SQL language</a></li>
<li class="chapter" data-level="6.2" data-path="sql.html"><a href="sql.html#writing-sql-queries"><i class="fa fa-check"></i><b>6.2</b> Writing SQL queries</a><ul>
<li class="chapter" data-level="6.2.1" data-path="sql.html"><a href="sql.html#limiting-results"><i class="fa fa-check"></i><b>6.2.1</b> Limiting results</a></li>
<li class="chapter" data-level="6.2.2" data-path="sql.html"><a href="sql.html#sorting-results"><i class="fa fa-check"></i><b>6.2.2</b> Sorting results</a></li>
<li class="chapter" data-level="6.2.3" data-path="sql.html"><a href="sql.html#finding-unique-values"><i class="fa fa-check"></i><b>6.2.3</b> Finding unique values</a></li>
<li class="chapter" data-level="6.2.4" data-path="sql.html"><a href="sql.html#filtering"><i class="fa fa-check"></i><b>6.2.4</b> Filtering</a></li>
<li class="chapter" data-level="6.2.5" data-path="sql.html"><a href="sql.html#calculations"><i class="fa fa-check"></i><b>6.2.5</b> Calculations</a></li>
<li class="chapter" data-level="6.2.6" data-path="sql.html"><a href="sql.html#aggregate-functions"><i class="fa fa-check"></i><b>6.2.6</b> Aggregate functions</a></li>
<li class="chapter" data-level="6.2.7" data-path="sql.html"><a href="sql.html#aliases"><i class="fa fa-check"></i><b>6.2.7</b> Aliases</a></li>
<li class="chapter" data-level="6.2.8" data-path="sql.html"><a href="sql.html#grouping"><i class="fa fa-check"></i><b>6.2.8</b> Grouping</a></li>
<li class="chapter" data-level="6.2.9" data-path="sql.html"><a href="sql.html#filtering-based-on-computed-values"><i class="fa fa-check"></i><b>6.2.9</b> Filtering based on computed values</a></li>
<li class="chapter" data-level="6.2.10" data-path="sql.html"><a href="sql.html#null-values"><i class="fa fa-check"></i><b>6.2.10</b> Null values</a></li>
<li class="chapter" data-level="6.2.11" data-path="sql.html"><a href="sql.html#joins"><i class="fa fa-check"></i><b>6.2.11</b> Joins</a></li>
<li class="chapter" data-level="6.2.12" data-path="sql.html"><a href="sql.html#nested-select-statements"><i class="fa fa-check"></i><b>6.2.12</b> Nested <code>SELECT</code> statements</a></li>
<li class="chapter" data-level="6.2.13" data-path="sql.html"><a href="sql.html#order-of-operations"><i class="fa fa-check"></i><b>6.2.13</b> Order of operations</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="sql.html"><a href="sql.html#building-a-database"><i class="fa fa-check"></i><b>6.3</b> Building a database</a><ul>
<li class="chapter" data-level="6.3.1" data-path="sql.html"><a href="sql.html#creating-a-new-database-in-sqlite-studio"><i class="fa fa-check"></i><b>6.3.1</b> Creating a new database in SQLite Studio</a></li>
<li class="chapter" data-level="6.3.2" data-path="sql.html"><a href="sql.html#creating-tables"><i class="fa fa-check"></i><b>6.3.2</b> Creating tables</a></li>
<li class="chapter" data-level="6.3.3" data-path="sql.html"><a href="sql.html#adding-constraints"><i class="fa fa-check"></i><b>6.3.3</b> Adding constraints</a></li>
<li class="chapter" data-level="6.3.4" data-path="sql.html"><a href="sql.html#order-of-table-creation"><i class="fa fa-check"></i><b>6.3.4</b> Order of table creation</a></li>
<li class="chapter" data-level="6.3.5" data-path="sql.html"><a href="sql.html#populating-the-tables"><i class="fa fa-check"></i><b>6.3.5</b> Populating the tables</a></li>
<li class="chapter" data-level="6.3.6" data-path="sql.html"><a href="sql.html#autoincrements-as-primary-keys"><i class="fa fa-check"></i><b>6.3.6</b> Autoincrements as primary keys</a></li>
<li class="chapter" data-level="6.3.7" data-path="sql.html"><a href="sql.html#foreign-keys"><i class="fa fa-check"></i><b>6.3.7</b> Foreign keys</a></li>
<li class="chapter" data-level="6.3.8" data-path="sql.html"><a href="sql.html#crossing-existing-information-to-derive-new-tables"><i class="fa fa-check"></i><b>6.3.8</b> Crossing existing information to derive new tables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rsqlite.html"><a href="rsqlite.html"><i class="fa fa-check"></i><b>7</b> Interfacing Databases in R with RSQLite</a><ul>
<li class="chapter" data-level="7.1" data-path="rsqlite.html"><a href="rsqlite.html#the-rsqlite-package"><i class="fa fa-check"></i><b>7.1</b> The RSQLite package</a></li>
<li class="chapter" data-level="7.2" data-path="rsqlite.html"><a href="rsqlite.html#establising-a-database-connection"><i class="fa fa-check"></i><b>7.2</b> Establising a database connection</a></li>
<li class="chapter" data-level="7.3" data-path="rsqlite.html"><a href="rsqlite.html#sending-queries-to-the-database"><i class="fa fa-check"></i><b>7.3</b> Sending queries to the database</a></li>
<li class="chapter" data-level="7.4" data-path="rsqlite.html"><a href="rsqlite.html#a-note-on-reproducibility"><i class="fa fa-check"></i><b>7.4</b> A note on reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>8</b> Dynamic Documents with RMarkdown</a><ul>
<li class="chapter" data-level="8.1" data-path="rmarkdown.html"><a href="rmarkdown.html#what-is-a-dynamic-document"><i class="fa fa-check"></i><b>8.1</b> What is a dynamic document?</a></li>
<li class="chapter" data-level="8.2" data-path="rmarkdown.html"><a href="rmarkdown.html#markdown-and-rmarkdown"><i class="fa fa-check"></i><b>8.2</b> Markdown and RMarkdown</a></li>
<li class="chapter" data-level="8.3" data-path="rmarkdown.html"><a href="rmarkdown.html#installing-rmarkdown"><i class="fa fa-check"></i><b>8.3</b> Installing RMarkdown</a></li>
<li class="chapter" data-level="8.4" data-path="rmarkdown.html"><a href="rmarkdown.html#writing-an-rmarkdown-document"><i class="fa fa-check"></i><b>8.4</b> Writing an RMarkdown document</a><ul>
<li class="chapter" data-level="8.4.1" data-path="rmarkdown.html"><a href="rmarkdown.html#creating-the-document"><i class="fa fa-check"></i><b>8.4.1</b> Creating the document</a></li>
<li class="chapter" data-level="8.4.2" data-path="rmarkdown.html"><a href="rmarkdown.html#yaml-headers"><i class="fa fa-check"></i><b>8.4.2</b> YAML headers</a></li>
<li class="chapter" data-level="8.4.3" data-path="rmarkdown.html"><a href="rmarkdown.html#code-chunks"><i class="fa fa-check"></i><b>8.4.3</b> Code chunks</a></li>
<li class="chapter" data-level="8.4.4" data-path="rmarkdown.html"><a href="rmarkdown.html#inline-code"><i class="fa fa-check"></i><b>8.4.4</b> Inline code</a></li>
<li class="chapter" data-level="8.4.5" data-path="rmarkdown.html"><a href="rmarkdown.html#text-formatting"><i class="fa fa-check"></i><b>8.4.5</b> Text formatting</a></li>
<li class="chapter" data-level="8.4.6" data-path="rmarkdown.html"><a href="rmarkdown.html#embedding-images"><i class="fa fa-check"></i><b>8.4.6</b> Embedding images</a></li>
<li class="chapter" data-level="8.4.7" data-path="rmarkdown.html"><a href="rmarkdown.html#adding-a-table-of-contents"><i class="fa fa-check"></i><b>8.4.7</b> Adding a table of contents</a></li>
<li class="chapter" data-level="8.4.8" data-path="rmarkdown.html"><a href="rmarkdown.html#knitting-the-document"><i class="fa fa-check"></i><b>8.4.8</b> Knitting the document</a></li>
<li class="chapter" data-level="8.4.9" data-path="rmarkdown.html"><a href="rmarkdown.html#the-sky-is-the-limit"><i class="fa fa-check"></i><b>8.4.9</b> The sky is the limit!</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="github-pages.html"><a href="github-pages.html"><i class="fa fa-check"></i><b>9</b> Automatically Generated Websites with GitHub Pages</a><ul>
<li class="chapter" data-level="9.1" data-path="github-pages.html"><a href="github-pages.html#bookdown"><i class="fa fa-check"></i><b>9.1</b> Bookdown</a><ul>
<li class="chapter" data-level="9.1.1" data-path="github-pages.html"><a href="github-pages.html#creating-a-book"><i class="fa fa-check"></i><b>9.1.1</b> Creating a book</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="github-pages.html"><a href="github-pages.html#publishing-a-book-with-github-pages"><i class="fa fa-check"></i><b>9.2</b> Publishing a book with GitHub Pages</a><ul>
<li class="chapter" data-level="9.2.1" data-path="github-pages.html"><a href="github-pages.html#step-1-set-up-compatibility-with-github-pages"><i class="fa fa-check"></i><b>9.2.1</b> Step 1: Set up compatibility with GitHub Pages</a></li>
<li class="chapter" data-level="9.2.2" data-path="github-pages.html"><a href="github-pages.html#step-2-set-up-git-repository"><i class="fa fa-check"></i><b>9.2.2</b> Step 2: Set up Git repository</a></li>
<li class="chapter" data-level="9.2.3" data-path="github-pages.html"><a href="github-pages.html#step-3-link-git-repository-to-remote-github-repository"><i class="fa fa-check"></i><b>9.2.3</b> Step 3: Link Git repository to remote GitHub repository</a></li>
<li class="chapter" data-level="9.2.4" data-path="github-pages.html"><a href="github-pages.html#step-4-enable-github-pages"><i class="fa fa-check"></i><b>9.2.4</b> Step 4: Enable GitHub Pages</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="github-pages.html"><a href="github-pages.html#maintaining-the-website"><i class="fa fa-check"></i><b>9.3</b> Maintaining the website</a></li>
<li class="chapter" data-level="9.4" data-path="project-organization.html"><a href="project-organization.html#references"><i class="fa fa-check"></i><b>9.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>10</b> Introduction to R</a></li>
<li class="chapter" data-level="11" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>11</b> Troubleshooting in R</a></li>
<li class="chapter" data-level="12" data-path="renv.html"><a href="renv.html"><i class="fa fa-check"></i><b>12</b> Working Environments in R</a></li>
<li class="chapter" data-level="13" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>13</b> Data Wrangling with tidyverse</a></li>
<li class="chapter" data-level="14" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>14</b> Data Visualization with ggplot2</a></li>
<li class="chapter" data-level="15" data-path="geospatial.html"><a href="geospatial.html"><i class="fa fa-check"></i><b>15</b> Introduction to Geospatial Data in R</a></li>
<li class="chapter" data-level="16" data-path="problem-decomposition.html"><a href="problem-decomposition.html"><i class="fa fa-check"></i><b>16</b> Problem Decomposition</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Computational Tools for Reproducible Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rsqlite" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Interfacing Databases in R with RSQLite</h1>
<div id="the-rsqlite-package" class="section level2">
<h2><span class="header-section-number">7.1</span> The RSQLite package</h2>
<p>RSQLite is an R package that provides an interface with SQLite such that you can
interact with the database from within R. Everything we have done so far on the database can be done from R without ever opening SQLite Studio. You could
actually do all of those things without even having SQLite installed on your
computer, because the R package itself contains SQLite.</p>
<p>In turn, RSQLite relies on another R package called DBI (which stands for
database interface). DBI is a package that provides generic functions for
interfacing databases with R, and RSQLite makes adjustments that are specific
to SQLite. So, first things first, we are going to load the DBI package:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="rsqlite.html#cb132-1"></a><span class="kw">library</span>(DBI)</span></code></pre></div>
</div>
<div id="establising-a-database-connection" class="section level2">
<h2><span class="header-section-number">7.2</span> Establising a database connection</h2>
<p>We start by connecting to a database, either an existing one or one we create
new. The <code>dbConnect</code> function takes as input a file path for the database. If
the path exists, it will connect to the existing database; if it does not, it
will create it. We also specify that the type of database connection is SQLite:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="rsqlite.html#cb133-1"></a>dragons_db &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(RSQLite<span class="op">::</span><span class="kw">SQLite</span>(), <span class="st">&quot;../../Course Material/Data/dragons/dragons.db&quot;</span>)</span></code></pre></div>
</div>
<div id="sending-queries-to-the-database" class="section level2">
<h2><span class="header-section-number">7.3</span> Sending queries to the database</h2>
<p>Now that the connection is established, we can start sending queries to the
database. Any time we perform actions that affect the database (creating or
deleting tables, inserting data, etc.) we use the function <code>dbExecute</code>. This
function takes as input a database connection and the SQL code that we want to
run (as a character string). For example, we can copy-paste the code we used in
Chapter <a href="sql.html#sql">6</a> to create the dragons table:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="rsqlite.html#cb134-1"></a><span class="kw">dbExecute</span>(dragons_db, <span class="st">&quot;CREATE TABLE dragons (</span></span>
<span id="cb134-2"><a href="rsqlite.html#cb134-2"></a><span class="st">dragon_id varchar(5) NOT NULL,</span></span>
<span id="cb134-3"><a href="rsqlite.html#cb134-3"></a><span class="st">sex char(1) CHECK (sex IN (&#39;M&#39;, &#39;F&#39;)),</span></span>
<span id="cb134-4"><a href="rsqlite.html#cb134-4"></a><span class="st">age_class varchar(8) CHECK (age_class IN (&#39;Juvenile&#39;, &#39;Subadult&#39;, &#39;Adult&#39;)),</span></span>
<span id="cb134-5"><a href="rsqlite.html#cb134-5"></a><span class="st">species varchar(50),</span></span>
<span id="cb134-6"><a href="rsqlite.html#cb134-6"></a><span class="st">PRIMARY KEY (dragon_id)</span></span>
<span id="cb134-7"><a href="rsqlite.html#cb134-7"></a><span class="st">);&quot;</span>)</span></code></pre></div>
<p>Now, instead of manually importing the data by pointing and clicking, we can
load the data from .csv files into R and insert it into the newly created table.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="rsqlite.html#cb135-1"></a>dragons &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;../../Course Material/Data/dragons/dragons.csv&quot;</span>, </span>
<span id="cb135-2"><a href="rsqlite.html#cb135-2"></a>                   <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>) </span>
<span id="cb135-3"><a href="rsqlite.html#cb135-3"></a></span>
<span id="cb135-4"><a href="rsqlite.html#cb135-4"></a><span class="kw">names</span>(dragons)</span></code></pre></div>
<pre><code>## [1] &quot;dragon&quot;    &quot;sex&quot;       &quot;age_class&quot; &quot;species&quot;</code></pre>
<p>Note that the column names in the .csv differ slightly from the column names we
assigned when creating the dragons table. This is a problem because RSQLite
won’t recognize the columns and won’t be able to insert the data. We can prevent
this by changing any names that do not match so that they match the database:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="rsqlite.html#cb137-1"></a><span class="kw">names</span>(dragons)[<span class="dv">1</span>] &lt;-<span class="st"> &quot;dragon_id&quot;</span></span></code></pre></div>
<p>Now we can enter the data from the .csv into the dragons table. The function
<code>dbWriteTable</code> takes as input the database connection, the name of the table we
want to fill (in quotes), and the name of the data frame we want to input. Note
that I’m using <code>append = TRUE</code> because otherwise RSQLite will overwrite the
current table with whatever is in the .csv, and any constraints we have enforced (primary key, foreign key, etc.) will be lost:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="rsqlite.html#cb138-1"></a><span class="kw">dbWriteTable</span>(dragons_db, <span class="st">&quot;dragons&quot;</span>, dragons, <span class="dt">append =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>Now we can send a query to the database to check that the data were inserted
correctly. Because this is a query that retrieves data, not a query that
modifies the database, we use <code>dbGetQuery</code> instead of <code>dbExecute</code>:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="rsqlite.html#cb139-1"></a><span class="kw">dbGetQuery</span>(dragons_db, <span class="st">&quot;SELECT * FROM dragons LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##    dragon_id  sex age_class             species
## 1         D1    F  Subadult     Hebridean Black
## 2         D2 &lt;NA&gt;  Juvenile   Romanian Longhorn
## 3         D3    F     Adult     Hebridean Black
## 4         D4    F     Adult Peruvian Vipertooth
## 5         D5 &lt;NA&gt;  Juvenile Ukrainian Ironbelly
## 6         D6    F     Adult Norwegian Ridgeback
## 7         D7    M     Adult     Hebridean Black
## 8         D8 &lt;NA&gt;  Juvenile Peruvian Vipertooth
## 9         D9    F     Adult Norwegian Ridgeback
## 10       D10    F     Adult  Common Welsh Green</code></pre>
<p>Now we can repeat this process with the other tables:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="rsqlite.html#cb141-1"></a><span class="kw">dbExecute</span>(dragons_db, <span class="st">&quot;CREATE TABLE tags (</span></span>
<span id="cb141-2"><a href="rsqlite.html#cb141-2"></a><span class="st">tag_id char(6) NOT NULL PRIMARY KEY,</span></span>
<span id="cb141-3"><a href="rsqlite.html#cb141-3"></a><span class="st">brand varchar(50),</span></span>
<span id="cb141-4"><a href="rsqlite.html#cb141-4"></a><span class="st">status varchar(20)</span></span>
<span id="cb141-5"><a href="rsqlite.html#cb141-5"></a><span class="st">);&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="rsqlite.html#cb142-1"></a>tags &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;../../Course Material/Data/dragons/tags.csv&quot;</span>)</span>
<span id="cb142-2"><a href="rsqlite.html#cb142-2"></a></span>
<span id="cb142-3"><a href="rsqlite.html#cb142-3"></a><span class="kw">dbWriteTable</span>(dragons_db, <span class="st">&quot;tags&quot;</span>, tags, <span class="dt">append =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="rsqlite.html#cb143-1"></a><span class="kw">dbGetQuery</span>(dragons_db, <span class="st">&quot;SELECT * FROM tags LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##    tag_id              brand      status
## 1  N33529 Heatwave Telemetry Refurbished
## 2  J47978          Undertone         New
## 3  R61684 Heatwave Telemetry         New
## 4  B35524         Aerotronic         New
## 5  T55954         Aerotronic         New
## 6  O31688          Undertone         New
## 7  B61925          Undertone         New
## 8  P47677         Aerotronic         New
## 9  P35987         Aerotronic         New
## 10 I41609 Heatwave Telemetry Refurbished</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="rsqlite.html#cb145-1"></a><span class="kw">dbExecute</span>(dragons_db, <span class="st">&quot;CREATE TABLE capture_sites (</span></span>
<span id="cb145-2"><a href="rsqlite.html#cb145-2"></a><span class="st">site char(3) NOT NULL PRIMARY KEY,</span></span>
<span id="cb145-3"><a href="rsqlite.html#cb145-3"></a><span class="st">utm_x double,</span></span>
<span id="cb145-4"><a href="rsqlite.html#cb145-4"></a><span class="st">utm_y double</span></span>
<span id="cb145-5"><a href="rsqlite.html#cb145-5"></a><span class="st">);&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="rsqlite.html#cb146-1"></a>capture_sites &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;../../Course Material/Data/dragons/capture_sites.csv&quot;</span>)</span>
<span id="cb146-2"><a href="rsqlite.html#cb146-2"></a></span>
<span id="cb146-3"><a href="rsqlite.html#cb146-3"></a><span class="kw">names</span>(capture_sites)[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;utm_x&quot;</span>, <span class="st">&quot;utm_y&quot;</span>)</span>
<span id="cb146-4"><a href="rsqlite.html#cb146-4"></a></span>
<span id="cb146-5"><a href="rsqlite.html#cb146-5"></a><span class="kw">dbWriteTable</span>(dragons_db, <span class="st">&quot;capture_sites&quot;</span>, capture_sites, <span class="dt">append =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="rsqlite.html#cb147-1"></a><span class="kw">dbGetQuery</span>(dragons_db, <span class="st">&quot;SELECT * FROM capture_sites;&quot;</span>)</span></code></pre></div>
<pre><code>##   site  utm_x   utm_y
## 1  LOG 430659 4620909
## 2  SLC 424790 4512583
## 3  MOA 626325 4270426
## 4  STG 271064 4108535
## 5  DLT 364106 4357045</code></pre>
<p>Remember how in SQLite we had to find a workaround to add auto-incremental
primary keys? Well, using RSQLite to build the database instead means we do not
need that trick anymore. We can just add the auto-incremental serial number to
the data and append it to the table while keeping all the structure and the
constraints we have enforced. Let’s try this with the captures table. First, we
create the table:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="rsqlite.html#cb149-1"></a><span class="kw">dbExecute</span>(dragons_db, <span class="st">&quot;CREATE TABLE captures (</span></span>
<span id="cb149-2"><a href="rsqlite.html#cb149-2"></a><span class="st">capture_id INTEGER PRIMARY KEY AUTOINCREMENT,</span></span>
<span id="cb149-3"><a href="rsqlite.html#cb149-3"></a><span class="st">dragon_id varchar(5),</span></span>
<span id="cb149-4"><a href="rsqlite.html#cb149-4"></a><span class="st">date text,</span></span>
<span id="cb149-5"><a href="rsqlite.html#cb149-5"></a><span class="st">site char(3),</span></span>
<span id="cb149-6"><a href="rsqlite.html#cb149-6"></a><span class="st">FOREIGN KEY(dragon_id) REFERENCES dragons(dragon_id)</span></span>
<span id="cb149-7"><a href="rsqlite.html#cb149-7"></a><span class="st">FOREIGN KEY(site) REFERENCES capture_sites(site)</span></span>
<span id="cb149-8"><a href="rsqlite.html#cb149-8"></a><span class="st">);&quot;</span>)</span></code></pre></div>
<p>Then we read in the .csv file and add a column called <code>capture_id</code> with the
serial number we’ll use as primary key:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="rsqlite.html#cb150-1"></a>captures &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;../../Course Material/Data/dragons/captures.csv&quot;</span>) </span>
<span id="cb150-2"><a href="rsqlite.html#cb150-2"></a></span>
<span id="cb150-3"><a href="rsqlite.html#cb150-3"></a>captures<span class="op">$</span>capture_id &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(captures)</span>
<span id="cb150-4"><a href="rsqlite.html#cb150-4"></a></span>
<span id="cb150-5"><a href="rsqlite.html#cb150-5"></a><span class="kw">head</span>(captures)</span></code></pre></div>
<pre><code>##   dragon capture_date capture_site capture_id
## 1     D1   2012-08-10          MOA          1
## 2     D2   2013-07-23          MOA          2
## 3     D3   2016-10-19          SLC          3
## 4     D4   2001-01-10          LOG          4
## 5     D5   2000-09-28          MOA          5
## 6     D6   2016-02-25          LOG          6</code></pre>
<p>Not only the column names need to match the names in the database table, but the
order has to match too. So we re-order the columns:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="rsqlite.html#cb152-1"></a>captures &lt;-<span class="st"> </span>captures[, <span class="kw">c</span>(<span class="st">&quot;capture_id&quot;</span>, <span class="st">&quot;dragon&quot;</span>, <span class="st">&quot;capture_date&quot;</span>, <span class="st">&quot;capture_site&quot;</span>)]</span></code></pre></div>
<p>We fix the names so they match:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="rsqlite.html#cb153-1"></a><span class="kw">names</span>(captures)[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dragon_id&quot;</span>, <span class="st">&quot;date&quot;</span>, <span class="st">&quot;site&quot;</span>)</span></code></pre></div>
<p>And we append the data frame to the database table:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="rsqlite.html#cb154-1"></a><span class="kw">dbWriteTable</span>(dragons_db, <span class="st">&quot;captures&quot;</span>, captures, <span class="dt">append =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>Let’s check that everything worked:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="rsqlite.html#cb155-1"></a><span class="kw">dbGetQuery</span>(dragons_db, <span class="st">&quot;SELECT * FROM captures LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##    capture_id dragon_id       date site
## 1           1        D1 2012-08-10  MOA
## 2           2        D2 2013-07-23  MOA
## 3           3        D3 2016-10-19  SLC
## 4           4        D4 2001-01-10  LOG
## 5           5        D5 2000-09-28  MOA
## 6           6        D6 2016-02-25  LOG
## 7           7        D7 2012-11-05  MOA
## 8           8        D8 2009-07-14  LOG
## 9           9        D9 2001-08-17  STG
## 10         10       D10 2017-01-17  LOG</code></pre>
<p>Now we can repeat this process with the remaining tables:</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="rsqlite.html#cb157-1"></a><span class="kw">dbExecute</span>(dragons_db, <span class="st">&quot;CREATE TABLE morphometrics (</span></span>
<span id="cb157-2"><a href="rsqlite.html#cb157-2"></a><span class="st">measurement_id INTEGER PRIMARY KEY AUTOINCREMENT,</span></span>
<span id="cb157-3"><a href="rsqlite.html#cb157-3"></a><span class="st">dragon_id varchar(5),</span></span>
<span id="cb157-4"><a href="rsqlite.html#cb157-4"></a><span class="st">date text,</span></span>
<span id="cb157-5"><a href="rsqlite.html#cb157-5"></a><span class="st">total_body_length_cm float,</span></span>
<span id="cb157-6"><a href="rsqlite.html#cb157-6"></a><span class="st">wingspan_cm float,</span></span>
<span id="cb157-7"><a href="rsqlite.html#cb157-7"></a><span class="st">tail_length_cm float,</span></span>
<span id="cb157-8"><a href="rsqlite.html#cb157-8"></a><span class="st">tarsus_length_cm float,</span></span>
<span id="cb157-9"><a href="rsqlite.html#cb157-9"></a><span class="st">claw_length_cm float,</span></span>
<span id="cb157-10"><a href="rsqlite.html#cb157-10"></a><span class="st">FOREIGN KEY (dragon_id) REFERENCES dragons(dragon_id)</span></span>
<span id="cb157-11"><a href="rsqlite.html#cb157-11"></a><span class="st">);&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="rsqlite.html#cb158-1"></a><span class="co"># Load csv file</span></span>
<span id="cb158-2"><a href="rsqlite.html#cb158-2"></a>morphometrics &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;../../Course Material/Data/dragons/morphometrics.csv&quot;</span>) </span>
<span id="cb158-3"><a href="rsqlite.html#cb158-3"></a></span>
<span id="cb158-4"><a href="rsqlite.html#cb158-4"></a><span class="co"># Add auto-incremental number</span></span>
<span id="cb158-5"><a href="rsqlite.html#cb158-5"></a>morphometrics<span class="op">$</span>measurement_id &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(morphometrics)</span>
<span id="cb158-6"><a href="rsqlite.html#cb158-6"></a></span>
<span id="cb158-7"><a href="rsqlite.html#cb158-7"></a><span class="co"># Re-order columns</span></span>
<span id="cb158-8"><a href="rsqlite.html#cb158-8"></a>morphometrics &lt;-<span class="st"> </span>morphometrics[, <span class="kw">c</span>(<span class="st">&quot;measurement_id&quot;</span>, <span class="st">&quot;dragon&quot;</span>, <span class="st">&quot;date&quot;</span>,</span>
<span id="cb158-9"><a href="rsqlite.html#cb158-9"></a>                                   <span class="st">&quot;total_body_length_cm&quot;</span>, <span class="st">&quot;wingspan_cm&quot;</span>,</span>
<span id="cb158-10"><a href="rsqlite.html#cb158-10"></a>                                   <span class="st">&quot;tail_length_cm&quot;</span>, <span class="st">&quot;tarsus_length_cm&quot;</span>, </span>
<span id="cb158-11"><a href="rsqlite.html#cb158-11"></a>                                   <span class="st">&quot;claw_length_cm&quot;</span>)]</span>
<span id="cb158-12"><a href="rsqlite.html#cb158-12"></a></span>
<span id="cb158-13"><a href="rsqlite.html#cb158-13"></a><span class="co"># Change column names to match</span></span>
<span id="cb158-14"><a href="rsqlite.html#cb158-14"></a><span class="kw">names</span>(morphometrics)[<span class="dv">2</span>] &lt;-<span class="st"> &quot;dragon_id&quot;</span></span>
<span id="cb158-15"><a href="rsqlite.html#cb158-15"></a></span>
<span id="cb158-16"><a href="rsqlite.html#cb158-16"></a><span class="co"># Append to database table</span></span>
<span id="cb158-17"><a href="rsqlite.html#cb158-17"></a><span class="kw">dbWriteTable</span>(dragons_db, <span class="st">&quot;morphometrics&quot;</span>, morphometrics, <span class="dt">append =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="rsqlite.html#cb159-1"></a><span class="kw">dbGetQuery</span>(dragons_db, <span class="st">&quot;SELECT * FROM morphometrics LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##    measurement_id dragon_id       date total_body_length_cm wingspan_cm
## 1               1       D96 2012-10-10            1069.8965   1389.5527
## 2               2      D400 2003-07-03             333.4600    634.9109
## 3               3      D316 2017-09-08             866.8935   1052.3702
## 4               4      D317 2016-09-05            1146.9708   1356.8084
## 5               5      D484 2016-12-04            1032.0520   1720.8641
## 6               6      D149 2012-02-13             919.9908   1533.5991
## 7               7      D285 2016-03-23             304.8285    698.8157
## 8               8      D256 2013-09-07             358.9701    652.0053
## 9               9      D283 2007-06-21            1698.1918   1387.1943
## 10             10      D213 2001-12-12             353.6952    670.5283
##    tail_length_cm tarsus_length_cm claw_length_cm
## 1        595.2706        121.65175      15.596219
## 2        104.2241         38.10844       4.305086
## 3        373.7619         68.16869      12.719697
## 4        542.5670        172.43663      14.809363
## 5        596.4419        114.05057      11.985672
## 6        563.9201        134.18051      11.005070
## 7        115.8964         42.18657       5.041634
## 8        148.3656         43.57849       4.576640
## 9        666.4246        147.44219      13.189233
## 10       140.4342         43.60513       4.248564</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="rsqlite.html#cb161-1"></a><span class="kw">dbExecute</span>(dragons_db, <span class="st">&quot;CREATE TABLE diet (</span></span>
<span id="cb161-2"><a href="rsqlite.html#cb161-2"></a><span class="st">diet_id INTEGER PRIMARY KEY AUTOINCREMENT,</span></span>
<span id="cb161-3"><a href="rsqlite.html#cb161-3"></a><span class="st">dragon_id varchar(5),</span></span>
<span id="cb161-4"><a href="rsqlite.html#cb161-4"></a><span class="st">sample_id varchar(8),</span></span>
<span id="cb161-5"><a href="rsqlite.html#cb161-5"></a><span class="st">date text,</span></span>
<span id="cb161-6"><a href="rsqlite.html#cb161-6"></a><span class="st">item_id integer,</span></span>
<span id="cb161-7"><a href="rsqlite.html#cb161-7"></a><span class="st">item varchar(50),</span></span>
<span id="cb161-8"><a href="rsqlite.html#cb161-8"></a><span class="st">FOREIGN KEY (dragon_id) REFERENCES dragons(dragon_id)</span></span>
<span id="cb161-9"><a href="rsqlite.html#cb161-9"></a><span class="st">);&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="rsqlite.html#cb162-1"></a>diet &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;../../Course Material/Data/dragons/diet.csv&quot;</span>) </span>
<span id="cb162-2"><a href="rsqlite.html#cb162-2"></a></span>
<span id="cb162-3"><a href="rsqlite.html#cb162-3"></a>diet<span class="op">$</span>diet_id &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(diet)</span>
<span id="cb162-4"><a href="rsqlite.html#cb162-4"></a></span>
<span id="cb162-5"><a href="rsqlite.html#cb162-5"></a>diet &lt;-<span class="st"> </span>diet[, <span class="kw">c</span>(<span class="st">&quot;diet_id&quot;</span>, <span class="st">&quot;dragon&quot;</span>, <span class="st">&quot;sample_id&quot;</span>, <span class="st">&quot;sample_dates&quot;</span>, <span class="st">&quot;item_id&quot;</span>,</span>
<span id="cb162-6"><a href="rsqlite.html#cb162-6"></a>                 <span class="st">&quot;item&quot;</span>)]</span>
<span id="cb162-7"><a href="rsqlite.html#cb162-7"></a></span>
<span id="cb162-8"><a href="rsqlite.html#cb162-8"></a><span class="kw">names</span>(diet)[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dragon_id&quot;</span>, <span class="st">&quot;date&quot;</span>)</span>
<span id="cb162-9"><a href="rsqlite.html#cb162-9"></a></span>
<span id="cb162-10"><a href="rsqlite.html#cb162-10"></a><span class="kw">dbWriteTable</span>(dragons_db, <span class="st">&quot;diet&quot;</span>, diet, <span class="dt">append =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="rsqlite.html#cb163-1"></a><span class="kw">dbGetQuery</span>(dragons_db, <span class="st">&quot;SELECT * FROM diet LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##    diet_id dragon_id sample_id       date item_id          item
## 1        1      D221    D221-1 2017-11-22       1  Domestic cow
## 2        2      D221    D221-1 2017-11-22       2 Domestic goat
## 3        3      D221    D221-1 2017-11-22       3        Coyote
## 4        4      D221    D221-1 2017-11-22       4  Domestic cow
## 5        5      D221    D221-1 2017-11-22       5  Domestic cow
## 6        6      D221    D221-1 2017-11-22       6     Mule deer
## 7        7      D119    D119-1 2012-06-28       1     Mule deer
## 8        8      D119    D119-1 2012-06-28       2        Cougar
## 9        9      D119    D119-1 2012-06-28       3 Domestic goat
## 10      10      D119    D119-1 2012-06-28       4 Mountain goat</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="rsqlite.html#cb165-1"></a><span class="kw">dbExecute</span>(dragons_db, <span class="st">&quot;CREATE TABLE deployments (</span></span>
<span id="cb165-2"><a href="rsqlite.html#cb165-2"></a><span class="st">deployment_id INTEGER PRIMARY KEY AUTOINCREMENT,</span></span>
<span id="cb165-3"><a href="rsqlite.html#cb165-3"></a><span class="st">dragon_id varchar(5),</span></span>
<span id="cb165-4"><a href="rsqlite.html#cb165-4"></a><span class="st">tag_id char(6),</span></span>
<span id="cb165-5"><a href="rsqlite.html#cb165-5"></a><span class="st">start_deployment text,</span></span>
<span id="cb165-6"><a href="rsqlite.html#cb165-6"></a><span class="st">end_deployment text,</span></span>
<span id="cb165-7"><a href="rsqlite.html#cb165-7"></a><span class="st">FOREIGN KEY(dragon_id) REFERENCES dragons(dragon_id)</span></span>
<span id="cb165-8"><a href="rsqlite.html#cb165-8"></a><span class="st">FOREIGN KEY(tag_id) REFERENCES tags(tag_id)</span></span>
<span id="cb165-9"><a href="rsqlite.html#cb165-9"></a><span class="st">);&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="rsqlite.html#cb166-1"></a>deployments &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;../../Course Material/Data/dragons/deployments.csv&quot;</span>) </span>
<span id="cb166-2"><a href="rsqlite.html#cb166-2"></a></span>
<span id="cb166-3"><a href="rsqlite.html#cb166-3"></a>deployments<span class="op">$</span>deployment_id &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(deployments)</span>
<span id="cb166-4"><a href="rsqlite.html#cb166-4"></a></span>
<span id="cb166-5"><a href="rsqlite.html#cb166-5"></a>deployments &lt;-<span class="st"> </span>deployments[, <span class="kw">c</span>(<span class="st">&quot;deployment_id&quot;</span>, <span class="st">&quot;dragon&quot;</span>, <span class="st">&quot;tag&quot;</span>, </span>
<span id="cb166-6"><a href="rsqlite.html#cb166-6"></a>                               <span class="st">&quot;start_deploy&quot;</span>, <span class="st">&quot;end_deploy&quot;</span>)]</span>
<span id="cb166-7"><a href="rsqlite.html#cb166-7"></a></span>
<span id="cb166-8"><a href="rsqlite.html#cb166-8"></a><span class="kw">names</span>(deployments)[<span class="dv">2</span><span class="op">:</span><span class="dv">5</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dragon_id&quot;</span>, <span class="st">&quot;tag_id&quot;</span>, <span class="st">&quot;start_deployment&quot;</span>, <span class="st">&quot;end_deployment&quot;</span>)</span>
<span id="cb166-9"><a href="rsqlite.html#cb166-9"></a></span>
<span id="cb166-10"><a href="rsqlite.html#cb166-10"></a><span class="kw">dbWriteTable</span>(dragons_db, <span class="st">&quot;deployments&quot;</span>, deployments, <span class="dt">append =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="rsqlite.html#cb167-1"></a><span class="kw">dbGetQuery</span>(dragons_db, <span class="st">&quot;SELECT * FROM deployments LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##    deployment_id dragon_id tag_id start_deployment end_deployment
## 1              1      D486 N33529       2006-12-20     2007-07-04
## 2              2      D393 J47978       2008-01-13     2008-10-13
## 3              3       D88 R61684       2004-09-19     2004-12-01
## 4              4      D330 B35524       2015-11-21     2016-08-02
## 5              5      D478 T55954       2002-05-07     2002-10-26
## 6              6      D300 O31688       2006-01-20     2006-08-23
## 7              7      D380 B61925       2015-01-27     2015-10-21
## 8              8      D315 P47677       2006-03-03     2006-06-06
## 9              9      D209 P35987       2007-02-26     2007-05-31
## 10            10      D357 I41609       2013-09-09     2014-03-08</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="rsqlite.html#cb169-1"></a><span class="kw">dbExecute</span>(dragons_db, <span class="st">&quot;CREATE TABLE gps_data_raw (</span></span>
<span id="cb169-2"><a href="rsqlite.html#cb169-2"></a><span class="st">gps_id INTEGER PRIMARY KEY AUTOINCREMENT,</span></span>
<span id="cb169-3"><a href="rsqlite.html#cb169-3"></a><span class="st">tag_id char(6),</span></span>
<span id="cb169-4"><a href="rsqlite.html#cb169-4"></a><span class="st">timestamp text, </span></span>
<span id="cb169-5"><a href="rsqlite.html#cb169-5"></a><span class="st">utm_x double,</span></span>
<span id="cb169-6"><a href="rsqlite.html#cb169-6"></a><span class="st">utm_y double,</span></span>
<span id="cb169-7"><a href="rsqlite.html#cb169-7"></a><span class="st">FOREIGN KEY(tag_id) REFERENCES tags(tag_id)</span></span>
<span id="cb169-8"><a href="rsqlite.html#cb169-8"></a><span class="st">);&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="rsqlite.html#cb170-1"></a>gps_data_raw &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;../../Course Material/Data/dragons/telemetry_raw.csv&quot;</span>) </span>
<span id="cb170-2"><a href="rsqlite.html#cb170-2"></a></span>
<span id="cb170-3"><a href="rsqlite.html#cb170-3"></a>gps_data_raw<span class="op">$</span>gps_id &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(gps_data_raw)</span>
<span id="cb170-4"><a href="rsqlite.html#cb170-4"></a></span>
<span id="cb170-5"><a href="rsqlite.html#cb170-5"></a>gps_data_raw &lt;-<span class="st"> </span>gps_data_raw[, <span class="kw">c</span>(<span class="st">&quot;gps_id&quot;</span>, <span class="st">&quot;tag&quot;</span>, <span class="st">&quot;timestamp&quot;</span>, <span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>)]</span>
<span id="cb170-6"><a href="rsqlite.html#cb170-6"></a></span>
<span id="cb170-7"><a href="rsqlite.html#cb170-7"></a><span class="kw">names</span>(gps_data_raw)[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>)] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;tag_id&quot;</span>, <span class="st">&quot;utm_x&quot;</span>, <span class="st">&quot;utm_y&quot;</span>)</span>
<span id="cb170-8"><a href="rsqlite.html#cb170-8"></a></span>
<span id="cb170-9"><a href="rsqlite.html#cb170-9"></a><span class="kw">dbWriteTable</span>(dragons_db, <span class="st">&quot;gps_data_raw&quot;</span>, gps_data_raw, <span class="dt">append =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="rsqlite.html#cb171-1"></a><span class="kw">dbGetQuery</span>(dragons_db, <span class="st">&quot;SELECT * FROM gps_data_raw LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##    gps_id tag_id           timestamp    utm_x   utm_y
## 1       1 N33529 2006-12-20 00:02:03 626479.9 4270480
## 2       2 N33529 2006-12-20 03:02:01 628321.6 4271404
## 3       3 N33529 2006-12-20 06:00:45 628111.1 4271812
## 4       4 N33529 2006-12-20 08:59:56 628294.4 4271940
## 5       5 N33529 2006-12-20 12:02:14 628642.2 4273090
## 6       6 N33529 2006-12-20 15:00:12 628750.1 4273879
## 7       7 N33529 2006-12-20 18:00:29 625775.1 4272723
## 8       8 N33529 2006-12-20 20:59:54 625682.6 4272723
## 9       9 N33529 2006-12-21 00:02:12 625493.0 4272917
## 10     10 N33529 2006-12-21 03:01:18 628051.1 4272672</code></pre>
<p>Now we are ready to generate the <code>gps_data</code> table based on information from
existing tables. We can create and populate the table in 2 steps using
<code>dbExecute</code>:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="rsqlite.html#cb173-1"></a><span class="kw">dbExecute</span>(dragons_db, <span class="st">&quot;CREATE TABLE gps_data (</span></span>
<span id="cb173-2"><a href="rsqlite.html#cb173-2"></a><span class="st">loc_id INTEGER PRIMARY KEY,</span></span>
<span id="cb173-3"><a href="rsqlite.html#cb173-3"></a><span class="st">tag_id char(6),</span></span>
<span id="cb173-4"><a href="rsqlite.html#cb173-4"></a><span class="st">dragon_id varchar(5),</span></span>
<span id="cb173-5"><a href="rsqlite.html#cb173-5"></a><span class="st">timestamp text,</span></span>
<span id="cb173-6"><a href="rsqlite.html#cb173-6"></a><span class="st">utm_x double,</span></span>
<span id="cb173-7"><a href="rsqlite.html#cb173-7"></a><span class="st">utm_y double,</span></span>
<span id="cb173-8"><a href="rsqlite.html#cb173-8"></a><span class="st">FOREIGN KEY (tag_id) REFERENCES tags(tag_id)</span></span>
<span id="cb173-9"><a href="rsqlite.html#cb173-9"></a><span class="st">FOREIGN KEY (dragon_id) REFERENCES dragons(dragon_id)</span></span>
<span id="cb173-10"><a href="rsqlite.html#cb173-10"></a><span class="st">);&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="rsqlite.html#cb174-1"></a><span class="kw">dbExecute</span>(dragons_db, <span class="st">&quot;INSERT INTO gps_data (</span></span>
<span id="cb174-2"><a href="rsqlite.html#cb174-2"></a><span class="st">tag_id, dragon_id, timestamp, utm_x, utm_y)</span></span>
<span id="cb174-3"><a href="rsqlite.html#cb174-3"></a><span class="st">SELECT</span></span>
<span id="cb174-4"><a href="rsqlite.html#cb174-4"></a><span class="st">deployments.tag_id,</span></span>
<span id="cb174-5"><a href="rsqlite.html#cb174-5"></a><span class="st">deployments.dragon_id,</span></span>
<span id="cb174-6"><a href="rsqlite.html#cb174-6"></a><span class="st">gps_data_raw.timestamp,</span></span>
<span id="cb174-7"><a href="rsqlite.html#cb174-7"></a><span class="st">gps_data_raw.utm_x,</span></span>
<span id="cb174-8"><a href="rsqlite.html#cb174-8"></a><span class="st">gps_data_raw.utm_y</span></span>
<span id="cb174-9"><a href="rsqlite.html#cb174-9"></a><span class="st">FROM deployments LEFT JOIN gps_data_raw USING (tag_id)</span></span>
<span id="cb174-10"><a href="rsqlite.html#cb174-10"></a><span class="st">WHERE gps_data_raw.tag_id = deployments.tag_id AND</span></span>
<span id="cb174-11"><a href="rsqlite.html#cb174-11"></a><span class="st">(</span></span>
<span id="cb174-12"><a href="rsqlite.html#cb174-12"></a><span class="st">    (</span></span>
<span id="cb174-13"><a href="rsqlite.html#cb174-13"></a><span class="st">    (strftime(gps_data_raw.timestamp) &gt;= strftime(deployments.start_deployment)) AND</span></span>
<span id="cb174-14"><a href="rsqlite.html#cb174-14"></a><span class="st">    (strftime(gps_data_raw.timestamp) &lt;= strftime(deployments.end_deployment))</span></span>
<span id="cb174-15"><a href="rsqlite.html#cb174-15"></a><span class="st">    )</span></span>
<span id="cb174-16"><a href="rsqlite.html#cb174-16"></a><span class="st">OR </span></span>
<span id="cb174-17"><a href="rsqlite.html#cb174-17"></a><span class="st">    (</span></span>
<span id="cb174-18"><a href="rsqlite.html#cb174-18"></a><span class="st">    (gps_data_raw.timestamp &gt;= deployments.start_deployment) AND</span></span>
<span id="cb174-19"><a href="rsqlite.html#cb174-19"></a><span class="st">    (deployments.end_deployment IS NULL)</span></span>
<span id="cb174-20"><a href="rsqlite.html#cb174-20"></a><span class="st">    )</span></span>
<span id="cb174-21"><a href="rsqlite.html#cb174-21"></a><span class="st">);&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="rsqlite.html#cb175-1"></a><span class="kw">dbGetQuery</span>(dragons_db, <span class="st">&quot;SELECT * FROM gps_data LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##    loc_id tag_id dragon_id           timestamp    utm_x   utm_y
## 1       1 N33529      D486 2006-12-20 00:02:03 626479.9 4270480
## 2       2 N33529      D486 2006-12-20 03:02:01 628321.6 4271404
## 3       3 N33529      D486 2006-12-20 06:00:45 628111.1 4271812
## 4       4 N33529      D486 2006-12-20 08:59:56 628294.4 4271940
## 5       5 N33529      D486 2006-12-20 12:02:14 628642.2 4273090
## 6       6 N33529      D486 2006-12-20 15:00:12 628750.1 4273879
## 7       7 N33529      D486 2006-12-20 18:00:29 625775.1 4272723
## 8       8 N33529      D486 2006-12-20 20:59:54 625682.6 4272723
## 9       9 N33529      D486 2006-12-21 00:02:12 625493.0 4272917
## 10     10 N33529      D486 2006-12-21 03:01:18 628051.1 4272672</code></pre>
</div>
<div id="a-note-on-reproducibility" class="section level2">
<h2><span class="header-section-number">7.4</span> A note on reproducibility</h2>
<p>When considering the utility of interfacing a database with R, evaluating the
benefits in terms of reproducibility is an important criterion. As far as the
code to create the database, we could have saved a SQL script in the SQLite
query editor and that would have been comparable to saving it as an R script.
However, by loading the data into the database in R we eliminated the need for
any pointing and clicking. We were able to fully build and populate the database
using a single R script. This gives a major advantage in terms of reproducibility.
Moreover, using R as an interface for the database means we can seamlessly
transition from querying the data to processing it and analyzing it within the
same programming framework, all while taking advantages of database-specific
functionalities that R does not provide on its own.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sql.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rmarkdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["reproducible-science.pdf", "reproducible-science.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
